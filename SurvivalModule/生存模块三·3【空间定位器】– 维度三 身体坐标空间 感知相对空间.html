<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>èŠ¬å…°è¯­æ¨¡å—ä¸‰Â·ç»´åº¦ä¸‰ï¼šæ„ŸçŸ¥â€œç›¸å¯¹â€ç©ºé—´ (æ¼”åŒ–ç‰ˆTTS)</title>
    <style>
        body { font-family: "Microsoft YaHei", sans-serif; line-height: 1.7; margin: 20px auto; max-width: 900px; padding: 0 20px; color: #333; background-color: #f9f9f9; }
        h1, h2, h3, h4 { color: #2c3e50; }
        h1 { text-align: center; margin-bottom: 35px; font-size: 2.2em; }
        h2 { border-bottom: 2px solid #d35400; padding-bottom: 12px; margin-top: 45px; font-size: 1.8em; color: #d35400; } /* Dimension 3 color */
        h3 { margin-top: 30px; font-size: 1.5em; color: #e67e22; } /* Lighter shade for H3 */
        h4 { font-size: 1.3em; color: #f39c12; margin-top:25px; margin-bottom:15px; } /* Even lighter for H4 */
        table.immersion-table, table.vocab-list-table { width: 100%; border-collapse: collapse; margin-bottom: 25px; display: table; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .immersion-table th, .immersion-table td, .vocab-list-table th, .vocab-list-table td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: top;}
        .immersion-table thead, .vocab-list-table thead { background-color: #e9ecef; }
        .immersion-table td:first-child, .vocab-list-table td:first-child { font-weight: bold; }
        .story-card, .practice-plan-card, .cognitive-bleeding-card, .usage-example, .summary-card, .example, .new-vocab-section, .æ–¹ä½ä¼™ä¼´-card { /* Added æ–¹ä½ä¼™ä¼´-card */
            background-color: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; margin-bottom: 30px; box-shadow: 0 4px 10px rgba(0,0,0,0.08);
        }
        .example { border-left: 6px solid #d35400 !important; } /* Dimension 3 example color */
        .æ–¹ä½ä¼™ä¼´-card h4 { color: #c0392b; margin-top: 0; font-size: 1.3em; border-bottom: 1px dashed #f39c12; padding-bottom: 8px; margin-bottom: 15px; }
        .æ–¹ä½ä¼™ä¼´-item { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dotted #eee; }
        .æ–¹ä½ä¼™ä¼´-item:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0;}
        .æ–¹ä½ä¼™ä¼´-item img { width: 100px; height: 100px; object-fit: contain; margin-right: 15px; border-radius: 4px; float: left; }
        .æ–¹ä½ä¼™ä¼´-content { overflow: hidden; /* Clear float */}
        .æ–¹ä½ä¼™ä¼´-content p { margin: 5px 0; font-size: 1.1em; }
        .finnish-phrase { font-weight: bold; color: #d35400; font-size: 1.15em; } /* Dimension 3 phrase color */
        .example-sentence .finnish-phrase { font-size: 1.1em; }
        .chinese-sense, .note { font-size: 0.95em; color: #555; font-style: italic; }
        .tts-button { background: none; border: none; cursor: pointer; font-size: 1.2em; margin-left: 8px; padding: 0; display: inline-block; vertical-align: middle; color: #d35400; } /* Dimension 3 TTS color */
        .tts-button:hover { color: #a04000; opacity: 0.8; }
        .debug-section { background-color: #fffbf0; border: 2px solid #ffa500; padding: 15px; margin: 20px 0; border-radius: 8px; }
        .debug-button { background-color: #4CAF50; color: white; padding: 8px 16px; margin: 5px; border: none; border-radius: 4px; cursor: pointer; }
        .debug-button:hover { background-color: #45a049; }
        .highlight { color: #c0392b; font-weight: bold; }
        hr { border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0,0,0,0), rgba(211,84,0,0.3), rgba(0,0,0,0)); margin: 40px 0; } /* Dimension 3 hr color */
        .task-list { list-style-type: none; padding-left: 0; }
        .task-list > li { margin-bottom: 15px; }
        .task-list h5 { margin-top:0; color: #2c3e50; font-size: 1.15em; }
        .task-list ul { list-style-type: disc; padding-left: 25px; margin-top: 5px; }
        .task-list ul li { font-size: 1em; margin-bottom: 8px; }
        .final-summary-list { list-style-type: none; padding-left:0; }
        .final-summary-list li { margin-bottom: 10px; font-size: 1.1em;}
        .final-summary-list .finnish-phrase { font-weight: normal;}
        .interactive-choice button { background-color: #e67e22; color: white; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; margin: 8px; font-size: 1em; transition: background-color 0.2s; } /* Dimension 3 button color */
        .interactive-choice button:hover { background-color: #d35400; }
        .feedback-area { margin-top: 15px; padding: 12px; border-radius: 5px; text-align:center; font-size: 1.1em; min-height: 1.5em; }
        .correct { background-color: #d1f2eb; color: #0c6255; border: 1px solid #a3e4d7; }
        .incorrect { background-color: #fdedec; color: #c0392b; border: 1px solid #f5b7b1; }
        .action-button { background-color: #e67e22; color: white; padding: 12px 18px; border: none; border-radius: 5px; cursor: pointer; margin-top:12px; font-size: 1em; transition: background-color 0.2s; }
        .action-button:hover { background-color: #d35400; }
        .concept-map { text-align: center; margin: 25px 0; padding: 15px; background-color: #fff3e0; border: 1px dashed #ffcc80; border-radius: 6px; } /* Dimension 3 concept map color */
        .concept-map p { margin: 8px 0; font-size: 1.15em; }
    </style>
</head>
<body>

    <h1>æ¨¡å—ä¸‰ï¼šã€ç©ºé—´å®šä½å™¨ã€‘ â€“ ç»´åº¦ä¸‰ï¼šæ„ŸçŸ¥â€œç›¸å¯¹â€ç©ºé—´</h1>

    <!-- TTSè°ƒè¯•åŒºåŸŸ -->
    <div class="debug-section">
        <h3>ğŸ”§ TTSåŠŸèƒ½æµ‹è¯• (æ¨¡å—ä¸‰Â·ç»´åº¦ä¸‰ ç›¸å¯¹ç©ºé—´ æ¼”åŒ–ç‰ˆ)</h3>
        <p>å¦‚æœTTSæŒ‰é’®æ²¡æœ‰å£°éŸ³ï¼Œè¯·å…ˆæµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
        <button class="debug-button" onclick="testBasicTTS()">æµ‹è¯•åŸºæœ¬TTS</button>
        <button class="debug-button" onclick="testFinnishTTSModule3_Dim3_Evolved()">æµ‹è¯•èŠ¬å…°è¯­TTS (æ¨¡å—3.3æ¼”åŒ–)</button>
        <button class="debug-button" onclick="listVoices()">æŸ¥çœ‹å¯ç”¨è¯­éŸ³</button>
        <button class="debug-button" onclick="removeDebugSection()">ç§»é™¤è°ƒè¯•åŒºåŸŸ</button>
        <div id="debug-output" style="margin-top: 10px; padding: 10px; background-color: #f0f0f0; border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto;"></div>
    </div>

    <hr>

    <section id="intro-dimension3">
        <h2>ğŸš€ ç»´åº¦ä¸‰å¼•å…¥ï¼šä»¥â€œæˆ‘â€ä¸ºä¸­å¿ƒï¼Œå®šä½ä¸–ç•Œï¼</h2>
        <div class="example">
            <p><span class="speakable-finnish">Hienosti jatkettu!</span> (ç»§ç»­å¾—æ¼‚äº®ï¼)</p>
            <p>æˆ‘ä»¬å·²ç»æ¢ç´¢äº†ç‰©ä½“å¦‚ä½•åœ¨â€œå°é—­å®¹å™¨<span class="highlight">é‡Œ</span>â€ï¼ˆæ¯”å¦‚ <span class="finnish-phrase speakable-finnish">talossa</span>ï¼‰å’Œâ€œç‰©ä½“è¡¨é¢<span class="highlight">ä¸Š</span>â€ï¼ˆæ¯”å¦‚ <span class="finnish-phrase speakable-finnish">pÃ¶ydÃ¤llÃ¤</span>ï¼‰å®‰å®¶ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬è¦æŠŠ**ä½ è‡ªå·±**å˜æˆä¸€ä¸ªç§»åŠ¨çš„â€œå‚ç…§ç‚¹â€ï¼</p>
            <p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ çš„èº«ä½“å°±æ˜¯ä¸–ç•Œçš„ä¸­å¿ƒã€‚ä¸œè¥¿å¯ä»¥åœ¨ä½ çš„<span class="highlight">å‰é¢</span>ã€<span class="highlight">åé¢</span>ã€<span class="highlight">å·¦è¾¹</span>ã€<span class="highlight">å³è¾¹</span>ï¼Œç”šè‡³<span class="highlight">ä¸Šé¢</span>æˆ–<span class="highlight">ä¸‹é¢</span>ã€‚è¿™ä¸€ç»´åº¦ï¼Œæˆ‘ä»¬å°±æ¥æ„Ÿå—èŠ¬å…°è¯­æ˜¯å¦‚ä½•æè¿°è¿™äº›ä»¥â€œæˆ‘â€æˆ–â€œä½ â€ä¸ºåŸºå‡†çš„ç›¸å¯¹ä½ç½®çš„ã€‚å‡†å¤‡å¥½ç”¨ä½ çš„èº«ä½“åæ ‡ç³»æ¥â€œå¯¼èˆªâ€èŠ¬å…°è¯­äº†å—ï¼Ÿ</p>
        </div>
        <div class="concept-map">
            <p><strong>ä½ çš„æ–°è§†è§’ï¼š</strong> <img src="https://via.placeholder.com/50x50.png?text=MinÃ¤" alt="æˆ‘" style="vertical-align: middle; border-radius:50%;"> (æˆ‘) æ˜¯åœ†å¿ƒï¼Œä¸‡ç‰©çš†æœ‰æ–¹ä½ï¼</p>
            <p><strong>èŠ¬å…°è¯­æ„ŸçŸ¥ï¼š</strong> å½“ä½ å¬åˆ°åƒ <span class="finnish-phrase speakable-finnish">edessÃ¤</span> è¿™æ ·çš„è¯ï¼Œå®ƒå°±åœ¨å‘Šè¯‰ä½ æŸä¸ªä¸œè¥¿ç›¸å¯¹äºä½ çš„â€œå‰æ–¹â€ä½ç½®ã€‚</p>
        </div>
    </section>

    <hr>

    <section id="relative-spatial-partners">
        <h3>ğŸ§­ è®¤è¯†ä½ çš„â€œæ–¹ä½ä¼™ä¼´â€â€”â€”å®ƒä»¬å¸®ä½ æ‰¾åˆ°ç›¸å¯¹ä½ç½®</h3>
        <p>ä»¥ä¸‹æ˜¯ä¸€äº›å¸®åŠ©æˆ‘ä»¬æè¿°ç‰©ä½“ç›¸å¯¹äºâ€œæˆ‘â€æˆ–â€œä½ â€åœ¨å“ªé‡Œçš„èŠ¬å…°è¯­â€œæ–¹ä½ä¼™ä¼´â€ã€‚æˆ‘ä»¬ä¼šç”¨å›¾ç”»ã€ä¾‹å¥å’Œä¸­æ–‡æ„ŸçŸ¥æ¥ä¸€ä¸€è®¤è¯†å®ƒä»¬ã€‚</p>

        <!-- æ–¹ä½ä¼™ä¼´å¡ç‰‡ 1: å‰é¢ (EdessÃ¤) -->
        <div class="æ–¹ä½ä¼™ä¼´-card">
            <h4><span class="speakable-finnish">EdessÃ¤</span> - åœ¨å‰é¢</h4>
            <div class="æ–¹ä½ä¼™ä¼´-item">
                <img src="https://images.pexels.com/photos/3747505/pexels-photo-3747505.jpeg?auto=compress&cs=tinysrgb&w=300" alt="ä¹¦åœ¨äººå‰é¢">
                <div class="æ–¹ä½ä¼™ä¼´-content">
                    <p><strong>å½“æŸç‰©åœ¨ä½ çš„å‰é¢ï¼š</strong></p>
                    <p class="example-sentence"><span class="speakable-finnish">Minun kirja on minun <span class="finnish-phrase">edessÃ¤</span>.</span> <span class="note">(æˆ–è€…æ›´è‡ªç„¶åœ°è¯´: <span class="speakable-finnish">Kirja on <span class="finnish-phrase">edessÃ¤</span>ni.</span> ä½†æˆ‘ä»¬å…ˆæ„ŸçŸ¥æ ¸å¿ƒè¯)</span></p>
                    <p class="chinese-sense">æ„ŸçŸ¥ï¼šâ€œ<span class="finnish-phrase speakable-finnish">edessÃ¤</span>â€è¿™ä¸ªè¯´æ³•ï¼Œåƒä¸åƒæœ‰ä»€ä¹ˆä¸œè¥¿æ­£å¥½æŒ¡åœ¨ä½ çš„è§†çº¿<span class="highlight">å‰</span>æ–¹ï¼Œæˆ–è€…å°±åœ¨ä½ é¢å‰å±•å¼€ï¼Ÿ</p>
                    <p class="example-sentence"><span class="speakable-finnish">SinÃ¤ istut minun <span class="finnish-phrase">edessÃ¤</span>ni.</span> (ä½ ååœ¨æˆ‘çš„å‰é¢ã€‚)</p>
                </div>
            </div>
            <div class="usage-example">
                <h5>ç®€å•æ—¥å¸¸æ€ä¹ˆç”¨ï¼Ÿ</h5>
                <p><span class="speakable-finnish">A: MissÃ¤ sinun puhelin on?</span></p>
                <p><span class="speakable-finnish">B: Se on <span class="finnish-phrase">edessÃ¤</span>ni, <span class="finnish-phrase">pÃ¶ydÃ¤llÃ¤</span>.</span> (å®ƒåœ¨æˆ‘å‰é¢ï¼Œåœ¨æ¡Œå­ä¸Šã€‚)</p>
            </div>
        </div>

        <!-- æ–¹ä½ä¼™ä¼´å¡ç‰‡ 2: åé¢ (Takana) -->
        <div class="æ–¹ä½ä¼™ä¼´-card">
            <h4><span class="speakable-finnish">Takana</span> - åœ¨åé¢</h4>
            <div class="æ–¹ä½ä¼™ä¼´-item">
                <img src="https://images.pexels.com/photos/159775/library-la-trobe-study-students-159775.jpeg?auto=compress&cs=tinysrgb&w=300" alt="åŒ…åœ¨äººèº«å">
                <div class="æ–¹ä½ä¼™ä¼´-content">
                    <p><strong>å½“æŸç‰©åœ¨ä½ çš„åé¢ï¼š</strong></p>
                    <p class="example-sentence"><span class="speakable-finnish">Sinun laukku on sinun <span class="finnish-phrase">takana</span>.</span> <span class="note">(æˆ–è€…: <span class="speakable-finnish">Laukku on <span class="finnish-phrase">takana</span>si.</span>)</span></p>
                    <p class="chinese-sense">æ„ŸçŸ¥ï¼šâ€œ<span class="finnish-phrase speakable-finnish">takana</span>â€ï¼Œæ˜¯ä¸æ˜¯æœ‰ç§ä¸œè¥¿åœ¨ä½ <span class="highlight">èƒŒå</span>ï¼Œä½ çœ‹ä¸åˆ°ï¼Œä½†èƒ½æ„Ÿè§‰åˆ°å®ƒçš„å­˜åœ¨ï¼Ÿ</p>
                    <p class="example-sentence"><span class="speakable-finnish">MinÃ¤ seison sinun <span class="finnish-phrase">takana</span>si.</span> (æˆ‘ç«™åœ¨ä½ çš„åé¢ã€‚)</p>
                </div>
            </div>
            <div class="usage-example">
                <h5>ç®€å•æ—¥å¸¸æ€ä¹ˆç”¨ï¼Ÿ</h5>
                <p><span class="speakable-finnish">A: Onko joku minun <span class="finnish-phrase">takana</span>ni?</span> (æˆ‘åé¢æœ‰äººå—ï¼Ÿ <span class="note speakable-finnish">joku=æŸäºº</span>)</p>
                <p><span class="speakable-finnish">B: Ei, sinun <span class="finnish-phrase">takana</span> ei ole ketÃ¤Ã¤n.</span> (ä¸ï¼Œä½ åé¢æ²¡äººã€‚ <span class="note speakable-finnish">ketÃ¤Ã¤n=ä»»ä½•äºº(å¦å®š)</span>)</p>
            </div>
        </div>

        <!-- æ–¹ä½ä¼™ä¼´å¡ç‰‡ 3: å·¦è¾¹ (Vasemmalla) -->
        <div class="æ–¹ä½ä¼™ä¼´-card">
            <h4><span class="speakable-finnish">Vasemmalla</span> - åœ¨å·¦è¾¹</h4>
            <div class="æ–¹ä½ä¼™ä¼´-item">
                <img src="https://images.pexels.com/photos/2106037/pexels-photo-2106037.jpeg?auto=compress&cs=tinysrgb&w=300" alt="æ¯å­åœ¨äººå·¦è¾¹">
                <div class="æ–¹ä½ä¼™ä¼´-content">
                    <p><strong>å½“æŸç‰©åœ¨ä½ çš„å·¦è¾¹ï¼š</strong></p>
                    <p class="example-sentence"><span class="speakable-finnish">Minun kuppi on <span class="finnish-phrase">vasemmalla</span> puolella.</span> <span class="note">(æˆ–è€…ç®€å•è¯´: <span class="speakable-finnish">Kuppi on <span class="finnish-phrase">vasemmalla</span>.</span>)</span></p>
                    <p class="chinese-sense">æ„ŸçŸ¥ï¼šâ€œ<span class="finnish-phrase speakable-finnish">vasemmalla</span>â€ï¼Œè·Ÿç€å£°éŸ³ï¼Œä½ çš„å¤´æ˜¯ä¸æ˜¯æƒ³å¾€<span class="highlight">å·¦</span>è¾¹çœ‹çœ‹ï¼Ÿè¿™ä¸ªâ€œ-llaâ€çš„å°¾éŸ³æ˜¯ä¸æ˜¯è®©ä½ æƒ³èµ·äº†â€œåœ¨æ¡Œå­<span class="highlight">ä¸Š</span>â€(<span class="finnish-phrase speakable-finnish">pÃ¶ydÃ¤llÃ¤</span>)çš„æ„Ÿè§‰ï¼Ÿå®ƒä»¬éƒ½è¡¨ç¤ºåœ¨ä¸€ä¸ªâ€œä½ç½®â€ä¸Šï¼</p>
                    <p class="example-sentence"><span class="speakable-finnish">SinÃ¤ istut minun <span class="finnish-phrase">vasemmalla</span> puolellani.</span> (ä½ ååœ¨æˆ‘çš„å·¦è¾¹ã€‚)</p>
                </div>
            </div>
            <div class="usage-example">
                <h5>ç®€å•æ—¥å¸¸æ€ä¹ˆç”¨ï¼Ÿ</h5>
                <p><span class="speakable-finnish">A: Mihin suuntaan posti on?</span> (é‚®å±€åœ¨å“ªä¸ªæ–¹å‘ï¼Ÿ <span class="note speakable-finnish">Mihin suuntaan=å‘å“ªä¸ªæ–¹å‘</span>)</p>
                <p><span class="speakable-finnish">B: Se on <span class="finnish-phrase">vasemmalla</span>.</span> (å®ƒåœ¨å·¦è¾¹ã€‚)</p>
            </div>
        </div>
        
        <!-- æ–¹ä½ä¼™ä¼´å¡ç‰‡ 4: å³è¾¹ (Oikealla) -->
        <div class="æ–¹ä½ä¼™ä¼´-card">
            <h4><span class="speakable-finnish">Oikealla</span> - åœ¨å³è¾¹</h4>
            <div class="æ–¹ä½ä¼™ä¼´-item">
                <img src="https://images.pexels.com/photos/3756785/pexels-photo-3756785.jpeg?auto=compress&cs=tinysrgb&w=300" alt="æ‰‹æœºåœ¨äººå³è¾¹">
                <div class="æ–¹ä½ä¼™ä¼´-content">
                    <p><strong>å½“æŸç‰©åœ¨ä½ çš„å³è¾¹ï¼š</strong></p>
                    <p class="example-sentence"><span class="speakable-finnish">Sinun puhelin on <span class="finnish-phrase">oikealla</span>.</span></p>
                    <p class="chinese-sense">æ„ŸçŸ¥ï¼šâ€œ<span class="finnish-phrase speakable-finnish">oikealla</span>â€ï¼Œæ˜¯ä¸æ˜¯è®©ä½ æƒ³èµ·äº†â€œæ­£ç¡®â€çš„æ–¹å‘â€”â€”<span class="highlight">å³</span>æ‰‹è¾¹ï¼ŸåŒæ ·ï¼Œé‚£ä¸ªâ€œ-llaâ€çš„â€œåœ¨...ä½ç½®ä¸Šâ€çš„æ„Ÿè§‰åˆå‡ºç°äº†ï¼</p>
                    <p class="example-sentence"><span class="speakable-finnish">MinÃ¤ seison sinun <span class="finnish-phrase">oikealla</span> puolellasi.</span> (æˆ‘ç«™åœ¨ä½ çš„å³è¾¹ã€‚)</p>
                </div>
            </div>
             <div class="usage-example">
                <h5>ç®€å•æ—¥å¸¸æ€ä¹ˆç”¨ï¼Ÿ</h5>
                <p><span class="speakable-finnish">A: Onko kauppa <span class="finnish-phrase">oikealla</span> vai <span class="finnish-phrase">vasemmalla</span>?</span> (å•†åº—åœ¨å³è¾¹è¿˜æ˜¯å·¦è¾¹ï¼Ÿ <span class="note speakable-finnish">vai=è¿˜æ˜¯</span>)</p>
                <p><span class="speakable-finnish">B: Se on <span class="finnish-phrase">oikealla</span>.</span> (å®ƒåœ¨å³è¾¹ã€‚)</p>
            </div>
        </div>

        <!-- æ–¹ä½ä¼™ä¼´å¡ç‰‡ 5: ä¸Šé¢ (PÃ¤Ã¤llÃ¤ / YlÃ¤puolella) -->
        <div class="æ–¹ä½ä¼™ä¼´-card">
            <h4><span class="speakable-finnish">PÃ¤Ã¤llÃ¤ / YlÃ¤puolella</span> - åœ¨ä¸Šé¢/ä¸Šæ–¹</h4>
            <div class="æ–¹ä½ä¼™ä¼´-item">
                <img src="https://images.pexels.com/photos/1866149/pexels-photo-1866149.jpeg?auto=compress&cs=tinysrgb&w=300" alt="ç¯åœ¨äººå¤´é¡¶ä¸Šæ–¹">
                <div class="æ–¹ä½ä¼™ä¼´-content">
                    <p><strong>å½“æŸç‰©åœ¨ä½ çš„å¤´é¡¶ä¸Šæ–¹ (ä¸æ¥è§¦)ï¼š</strong></p>
                    <p class="example-sentence"><span class="speakable-finnish">Lamppu on minun <span class="finnish-phrase">ylÃ¤puolella</span>.</span> <span class="note speakable-finnish">(lamppu=ç¯)</span></p>
                    <p class="chinese-sense">æ„ŸçŸ¥ï¼šâ€œ<span class="finnish-phrase speakable-finnish">ylÃ¤puolella</span>â€ï¼Œæ„Ÿè§‰æ˜¯ä¸æ˜¯æœ‰ä»€ä¹ˆä¸œè¥¿æ‚¬åœ¨ä½ å¤´<span class="highlight">ä¸Š</span>æ–¹ï¼Œä½†æ²¡æœ‰ç¢°åˆ°ï¼Ÿé‚£ä¸ªâ€œ-llaâ€åˆå‡ºç°äº†ï¼Œè¡¨ç¤ºåœ¨ä¸€ä¸ªâ€œä½ç½®â€ï¼</p>
                    <p><strong>å½“æŸç‰©åœ¨å¦ä¸€ä¸ªç‰©ä½“ä¹‹ä¸Š (æ¥è§¦)ï¼š</strong></p>
                    <p class="example-sentence"><span class="speakable-finnish">Minun hattu on minun <span class="finnish-phrase">pÃ¤Ã¤llÃ¤</span>ni.</span> (æˆ‘çš„å¸½å­åœ¨æˆ‘å¤´ä¸Šã€‚ <span class="note speakable-finnish">hattu=å¸½å­, pÃ¤Ã¤llÃ¤ni=åœ¨æˆ‘å¤´ä¸Š/èº«ä¸Š</span>)</p>
                    <p class="chinese-sense">æ„ŸçŸ¥ï¼šâ€œ<span class="finnish-phrase speakable-finnish">pÃ¤Ã¤llÃ¤</span>â€ï¼Œå°±åƒä¸œè¥¿ç›´æ¥â€œè¦†ç›–â€æˆ–â€œå‹â€åœ¨ä½ <span class="highlight">ä¸Š</span>é¢ã€‚ä¹Ÿå¸¦æœ‰â€œ-llÃ¤â€çš„â€œè¡¨é¢æ¥è§¦â€æ„Ÿã€‚</p>
                </div>
            </div>
            <div class="usage-example">
                <h5>ç®€å•æ—¥å¸¸æ€ä¹ˆç”¨ï¼Ÿ</h5>
                <p><span class="speakable-finnish">A: MissÃ¤ aurinko on?</span> (å¤ªé˜³åœ¨å“ªé‡Œï¼Ÿ <span class="note speakable-finnish">aurinko=å¤ªé˜³</span>)</p>
                <p><span class="speakable-finnish">B: Se on meidÃ¤n <span class="finnish-phrase">ylÃ¤puolella</span>!</span> (å®ƒåœ¨æˆ‘ä»¬ä¸Šæ–¹ï¼)</p>
                <p><span class="speakable-finnish">A: Onko sinulla lippis <span class="finnish-phrase">pÃ¤Ã¤ssÃ¤</span>?</span> (ä½ å¤´ä¸Šæˆ´ç€æ£’çƒå¸½å—ï¼Ÿ<span class="note speakable-finnish">lippis=æ£’çƒå¸½, pÃ¤Ã¤ssÃ¤=åœ¨å¤´ä¸Š(å†…æ ¼)</span> - æ³¨æ„è¿™é‡Œç”¨äº†å†…æ ¼ï¼Œè¡¨ç¤ºâ€œåœ¨å¤´éƒ¨è¿™ä¸ªå®¹å™¨é‡Œ/è¡¨é¢â€ï¼Œ`pÃ¤Ã¤llÃ¤`æŒ‡æ›´å¹¿æ³›çš„è¡¨é¢)</p>
            </div>
        </div>
        
        <!-- æ–¹ä½ä¼™ä¼´å¡ç‰‡ 6: ä¸‹é¢ (Alla / Alapuolella) -->
        <div class="æ–¹ä½ä¼™ä¼´-card">
            <h4><span class="speakable-finnish">Alla / Alapuolella</span> - åœ¨ä¸‹é¢/ä¸‹æ–¹</h4>
            <div class="æ–¹ä½ä¼™ä¼´-item">
                <img src="https://images.pexels.com/photos/1350789/pexels-photo-1350789.jpeg?auto=compress&cs=tinysrgb&w=300" alt="çŒ«åœ¨æ¡Œå­ä¸‹é¢">
                <div class="æ–¹ä½ä¼™ä¼´-content">
                    <p><strong>å½“æŸç‰©åœ¨ä½ çš„ä¸‹æ–¹ (ä¸ä¸€å®šæ¥è§¦)ï¼š</strong></p>
                    <p class="example-sentence"><span class="speakable-finnish">Sinun kengÃ¤t ovat sÃ¤ngyn <span class="finnish-phrase">alla</span>.</span> <span class="note speakable-finnish">(sÃ¤nky=åºŠ)</span></p>
                    <p class="chinese-sense">æ„ŸçŸ¥ï¼šâ€œ<span class="finnish-phrase speakable-finnish">alla</span>â€ï¼Œæ˜¯ä¸æ˜¯è®©ä½ æƒ³å¾€<span class="highlight">ä¸‹</span>çœ‹ï¼Œæ‰¾æ‰¾è—èµ·æ¥çš„ä¸œè¥¿ï¼Ÿå®ƒä¹Ÿå¸¸å¸¦æœ‰â€œ-llaâ€çš„â€œä½ç½®â€æ„Ÿè§‰ã€‚</p>
                    <p><strong>å½“æŸç‰©åœ¨å¦ä¸€ä¸ªç‰©ä½“çš„æ­£ä¸‹æ–¹ (æ›´å¼ºè°ƒå‚ç›´å…³ç³»)ï¼š</strong></p>
                    <p class="example-sentence"><span class="speakable-finnish">Kellari on talon <span class="finnish-phrase">alapuolella</span>.</span> <span class="note speakable-finnish">(kellari=åœ°ä¸‹å®¤)</span></p>
                     <p class="chinese-sense">æ„ŸçŸ¥ï¼šâ€œ<span class="finnish-phrase speakable-finnish">alapuolella</span>â€ï¼Œå¼ºè°ƒäº†â€œä¸‹æ–¹é‚£ä¸€é¢/é‚£ä¸ªåŒºåŸŸâ€ã€‚</p>
                </div>
            </div>
             <div class="usage-example">
                <h5>ç®€å•æ—¥å¸¸æ€ä¹ˆç”¨ï¼Ÿ</h5>
                <p><span class="speakable-finnish">A: NÃ¤etkÃ¶ sinÃ¤ minun avaimen?</span> (ä½ çœ‹è§æˆ‘çš„é’¥åŒ™å—ï¼Ÿ)</p>
                <p><span class="speakable-finnish">B: Se on ehkÃ¤ tuolin <span class="finnish-phrase">alla</span>.</span> (å®ƒå¯èƒ½åœ¨æ¤…å­ä¸‹é¢ã€‚)</p>
            </div>
        </div>

        <!-- æ–¹ä½ä¼™ä¼´å¡ç‰‡ 7: è¿‘å¤„ (LÃ¤hellÃ¤) -->
        <div class="æ–¹ä½ä¼™ä¼´-card">
            <h4><span class="speakable-finnish">LÃ¤hellÃ¤</span> - åœ¨è¿‘å¤„/é™„è¿‘</h4>
            <div class="æ–¹ä½ä¼™ä¼´-item">
                <img src="https://images.pexels.com/photos/220357/pexels-photo-220357.jpeg?auto=compress&cs=tinysrgb&w=300" alt="å’–å•¡åº—åœ¨é™„è¿‘">
                <div class="æ–¹ä½ä¼™ä¼´-content">
                    <p><strong>å½“æŸç‰©ç¦»ä½ å¾ˆè¿‘ï¼š</strong></p>
                    <p class="example-sentence"><span class="speakable-finnish">Kauppa on <span class="finnish-phrase">lÃ¤hellÃ¤</span>. MinÃ¤ kÃ¤velen sinne.</span> <span class="note speakable-finnish">(sinne=åˆ°é‚£é‡Œå»)</span></p>
                    <p class="chinese-sense">æ„ŸçŸ¥ï¼šâ€œ<span class="finnish-phrase speakable-finnish">lÃ¤hellÃ¤</span>â€ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰é‚£ä¸ªä¸œè¥¿å°±åœ¨ä½ ä¼¸æ‰‹å¯åŠçš„<span class="highlight">é™„è¿‘</span>ï¼Œå¾ˆæ–¹ä¾¿ï¼Ÿè¿™ä¸ªâ€œ-llÃ¤â€çš„â€œä½ç½®æ„Ÿâ€åˆå‡ºç°äº†ï¼</p>
                    <p class="example-sentence"><span class="speakable-finnish">SinÃ¤ asut minua <span class="finnish-phrase">lÃ¤hellÃ¤</span>.</span> (ä½ ä½å¾—ç¦»æˆ‘å¾ˆè¿‘ã€‚ <span class="note speakable-finnish">asut=ä½ ä½, minua=æˆ‘(éƒ¨åˆ†æ ¼)</span>)</p>
                </div>
            </div>
            <div class="usage-example">
                <h5>ç®€å•æ—¥å¸¸æ€ä¹ˆç”¨ï¼Ÿ</h5>
                <p><span class="speakable-finnish">A: Onko tÃ¤Ã¤llÃ¤ <span class="finnish-phrase">lÃ¤hellÃ¤</span> hyvÃ¤ kahvila?</span> (è¿™é™„è¿‘æœ‰å¥½å’–å•¡é¦†å—ï¼Ÿ <span class="note speakable-finnish">tÃ¤Ã¤llÃ¤=åœ¨è¿™é‡Œ</span>)</p>
                <p><span class="speakable-finnish">B: KyllÃ¤, tuolla kulman <span class="finnish-phrase">takana</span> on yksi. Se on tosi <span class="finnish-phrase">lÃ¤hellÃ¤</span>.</span> (æ˜¯çš„ï¼Œåœ¨é‚£è¾¹æ‹è§’åé¢æœ‰ä¸€ä¸ªã€‚å®ƒéå¸¸è¿‘ã€‚ <span class="note speakable-finnish">tuolla=åœ¨é‚£è¾¹, kulma=æ‹è§’, tosi=éå¸¸</span>)</p>
            </div>
        </div>
        
        <!-- æ–¹ä½ä¼™ä¼´å¡ç‰‡ 8: è¿œå¤„ (Kaukana) -->
        <div class="æ–¹ä½ä¼™ä¼´-card">
            <h4><span class="speakable-finnish">Kaukana</span> - åœ¨è¿œå¤„</h4>
            <div class="æ–¹ä½ä¼™ä¼´-item">
                <img src="https://images.pexels.com/photos/158827/field-corn-air-frisch-158827.jpeg?auto=compress&cs=tinysrgb&w=300" alt="è¿œå¤„çš„å±±">
                <div class="æ–¹ä½ä¼™ä¼´-content">
                    <p><strong>å½“æŸç‰©ç¦»ä½ å¾ˆè¿œï¼š</strong></p>
                    <p class="example-sentence"><span class="speakable-finnish">Meri on <span class="finnish-phrase">kaukana</span> tÃ¤Ã¤ltÃ¤. MinÃ¤ tarvitsen auton.</span> <span class="note speakable-finnish">(meri=æµ·, tÃ¤Ã¤ltÃ¤=ä»è¿™é‡Œ)</span></p>
                    <p class="chinese-sense">æ„ŸçŸ¥ï¼šâ€œ<span class="finnish-phrase speakable-finnish">kaukana</span>â€ï¼Œæ˜¯ä¸æ˜¯è®©ä½ æ„Ÿè§‰è¦çœºæœ›<span class="highlight">è¿œ</span>æ–¹æ‰èƒ½çœ‹åˆ°ï¼Ÿ</p>
                    <p class="example-sentence"><span class="speakable-finnish">Sinun koti on <span class="finnish-phrase">kaukana</span> minun kodista.</span> (ä½ å®¶ç¦»æˆ‘å®¶å¾ˆè¿œã€‚ <span class="note speakable-finnish">minun kodista=ä»æˆ‘å®¶(å‡ºæ ¼)</span>)</p>
                </div>
            </div>
             <div class="usage-example">
                <h5>ç®€å•æ—¥å¸¸æ€ä¹ˆç”¨ï¼Ÿ</h5>
                <p><span class="speakable-finnish">A: Onko Helsinki <span class="finnish-phrase">kaukana</span>?</span></p>
                <p><span class="speakable-finnish">B: KyllÃ¤, se on aika <span class="finnish-phrase">kaukana</span> tÃ¤Ã¤ltÃ¤.</span> (æ˜¯çš„ï¼Œå®ƒç¦»è¿™é‡Œç›¸å½“è¿œã€‚ <span class="note speakable-finnish">aika=ç›¸å½“)</span></p>
            </div>
        </div>
        <p class="note"><strong>é‡è¦æç¤ºï¼š</strong> å¾ˆå¤šè¿™ç±»â€œæ–¹ä½ä¼™ä¼´â€ï¼ˆå¦‚ <span class="speakable-finnish">edessÃ¤, takana, vieressÃ¤, lÃ¤hellÃ¤, kaukana</span> ç­‰ï¼‰åœ¨èŠ¬å…°è¯­ä¸­å’Œå‰é¢çš„åè¯ï¼ˆè¡¨ç¤ºå‚ç…§ç‰©ï¼‰æ­é…æ—¶ï¼Œé‚£ä¸ªåè¯å¸¸å¸¸éœ€è¦å˜æˆä¸€ç§ç‰¹æ®Šçš„â€œçš„â€å­—å½¢å¼ï¼ˆæˆ‘ä»¬ä»¥åä¼šäº†è§£çš„<span class="speakable-finnish">genetiivi</span>ï¼Œæ‰€æœ‰æ ¼ï¼‰ã€‚ä¾‹å¦‚ï¼Œâ€œæ¡Œå­çš„å‰é¢â€æ˜¯ <span class="speakable-finnish">pÃ¶ydÃ¤n edessÃ¤</span>ã€‚ç°åœ¨ä½ å…ˆæ•´ä½“æ„ŸçŸ¥è¿™äº›â€œæ–¹ä½ä¼™ä¼´â€çš„æ„ä¹‰å’Œå‘éŸ³ï¼Œä»¥åŠå®ƒä»¬åœ¨ç®€å•å¥å­ä¸­å¦‚ä½•ä½¿ç”¨ï¼Œå°¤å…¶æ˜¯å’Œ<span class="speakable-finnish">minun</span> (æˆ‘çš„) å’Œ <span class="speakable-finnish">sinun</span> (ä½ çš„) æ­é…çš„æ—¶å€™ï¼</p>
    </section>

    <hr>

    <section id="interactive-practice-dim3">
        <h3>ğŸ’¡ åˆæ­¥äº’åŠ¨ï¼šçœ‹å›¾è¾¨â€œç›¸å¯¹ä½ç½®â€</h3>
        <div class="story-card">
            <p>ä¸‹é¢è¿™å¼ å›¾é‡Œæœ‰å¾ˆå¤šä¸œè¥¿ã€‚è¯•ç€å›ç­”é—®é¢˜ï¼Œæˆ–è€…ç”¨æˆ‘ä»¬åˆšè®¤è¯†çš„â€œæ–¹ä½ä¼™ä¼´â€æ¥æè¿°å®ƒä»¬çš„ä½ç½®å…³ç³»å§ï¼</p>
            <div style="text-align:center; margin-bottom:15px;">
                <img src="https://images.pexels.com/photos/1643383/pexels-photo-1643383.jpeg?auto=compress&cs=tinysrgb&w=600" alt="å®¢å…åœºæ™¯å›¾" id="scene-image-dim3" style="max-width:100%; border-radius:5px;">
            </div>
            <div id="q-dim3-container">
                <!-- Questions will be dynamically inserted here by JS -->
            </div>
            <div class="interactive-choice" style="text-align: center; margin-top:15px;">
                <button class="action-button" onclick="nextDim3Question()">ä¸‹ä¸€ä¸ªé—®é¢˜/æ¢ä¸ªæè¿°</button>
            </div>
            <div id="feedback-area-dim3" class="feedback-area"></div>
        </div>
    </section>

    <hr>

    <section id="language-bleeding-plan-dim3">
        <h2>ğŸ§ªã€è¯­è¨€å‡ºè¡€ã€‘â€œæˆ‘çš„å·¥ä½œ/å­¦ä¹ ç©ºé—´â€ç›¸å¯¹å®šä½ä¸‰æ—¥è®¡åˆ’</h2>
        <div class="practice-plan-card">
            <ul class="task-list">
                <li>
                    <h5><span class="speakable-finnish">ğŸ“† ç¬¬1æ—¥ï¼šæ„ŸçŸ¥â€œå‰åâ€</span></h5>
                    <ul>
                        <li><span class="speakable-finnish">ååœ¨ä½ çš„ä¹¦æ¡Œå‰ï¼Œå¯¹è‡ªå·±è¯´ï¼šâ€œMinun tietokone on minun <span class="finnish-phrase">edessÃ¤</span>. SeinÃ¤ on minun <span class="finnish-phrase">takana</span>.â€ (æˆ‘çš„ç”µè„‘åœ¨æˆ‘å‰é¢ã€‚å¢™åœ¨æˆ‘åé¢ã€‚ <span class="note speakable-finnish">seinÃ¤=å¢™</span>)</span></li>
                        <li><span class="speakable-finnish">æƒ³è±¡ä½ çš„æœ‹å‹ååœ¨ä½ å¯¹é¢ï¼Œå¯¹ç©ºæ°”è¯´ï¼šâ€œSinÃ¤ istut minun <span class="finnish-phrase">edessÃ¤</span>ni.â€</span></li>
                    </ul>
                </li>
                <li>
                    <h5><span class="speakable-finnish">ğŸ“† ç¬¬2æ—¥ï¼šæ„ŸçŸ¥â€œå·¦å³â€ä¸â€œä¸Šä¸‹â€</span></h5>
                    <ul>
                        <li><span class="speakable-finnish">çœ‹çœ‹ä½ ä¹¦æ¡Œçš„å·¦è¾¹æœ‰ä»€ä¹ˆï¼Œè¯´ï¼šâ€œMinun <span class="finnish-phrase">vasemmalla</span> puolella on [ç‰©å“].â€ (æˆ‘å·¦è¾¹æ˜¯[ç‰©å“]ã€‚)</span></li>
                        <li><span class="speakable-finnish">çœ‹çœ‹ä½ ä¹¦æ¡Œçš„å³è¾¹æœ‰ä»€ä¹ˆï¼Œè¯´ï¼šâ€œMinun <span class="finnish-phrase">oikealla</span> puolella on [ç‰©å“].â€</span></li>
                        <li><span class="speakable-finnish">æŠ¬å¤´çœ‹çœ‹ç¯ï¼Œè¯´ï¼šâ€œLamppu on minun <span class="finnish-phrase">ylÃ¤puolella</span>.â€</span></li>
                        <li><span class="speakable-finnish">ä½å¤´çœ‹çœ‹è„šä¸‹çš„åœ°æ¿ï¼Œè¯´ï¼šâ€œLattia on minun <span class="finnish-phrase">alla</span>ni.â€ (åœ°æ¿åœ¨æˆ‘çš„ä¸‹é¢ã€‚)</span></li>
                    </ul>
                </li>
                <li>
                    <h5><span class="speakable-finnish">ğŸ“† ç¬¬3æ—¥ï¼šæ„ŸçŸ¥â€œè¿œè¿‘â€ä¸ç»¼åˆæè¿°</span></h5>
                    <ul>
                        <li><span class="speakable-finnish">çœ‹çœ‹çª—å¤–ï¼Œå¦‚æœèƒ½çœ‹åˆ°è¿œå¤„çš„å»ºç­‘ï¼Œè¯´ï¼šâ€œTalo on <span class="finnish-phrase">kaukana</span>.â€ (æˆ¿å­åœ¨è¿œå¤„ã€‚)</span></li>
                        <li><span class="speakable-finnish">çœ‹çœ‹æ‰‹è¾¹çš„æ¯å­ï¼Œè¯´ï¼šâ€œMinun kuppi on <span class="finnish-phrase">lÃ¤hellÃ¤</span>.â€ (æˆ‘çš„æ¯å­åœ¨è¿‘å¤„ã€‚)</span></li>
                        <li><span class="speakable-finnish">å°è¯•æè¿°ä¸€ä¸ªåœºæ™¯ç»™æœ‹å‹ï¼ˆæˆ–è‡ªå·±ï¼‰ï¼šâ€œMinÃ¤ istun <span class="finnish-phrase">tuolilla</span>. Minun pÃ¶ytÃ¤ on minun <span class="finnish-phrase">edessÃ¤</span>. SinÃ¤ seisot oven <span class="finnish-phrase">vieressÃ¤</span>.â€ (æˆ‘ååœ¨æ¤…å­ä¸Šã€‚æˆ‘çš„æ¡Œå­åœ¨æˆ‘å‰é¢ã€‚ä½ ç«™åœ¨é—¨æ—è¾¹ã€‚ <span class="note speakable-finnish">ovi=é—¨</span>)</span></li>
                    </ul>
                </li>
            </ul>
        </div>
    </section>

    <hr>

    <section id="dim3-summary-and-next">
        <h2>ğŸŒŸ ç»´åº¦ä¸‰æ„ŸçŸ¥å°ç»“ï¼šä½ æ‹¥æœ‰äº†â€œèº«ä½“åæ ‡ç³»â€çš„è¯­è¨€ï¼ (å«æœ¯è¯­é”šå®š)</h2>
        <div class="summary-card">
            <p><span class="speakable-finnish">Hienosti tehty!</span> (åšå¾—å¤ªæ£’äº†ï¼)</p>
            <p>ç°åœ¨ï¼Œä½ ä¸ä»…çŸ¥é“ä¸œè¥¿åœ¨â€œå®¹å™¨<span class="highlight">é‡Œ</span>â€æˆ–â€œç‰©ä½“è¡¨é¢<span class="highlight">ä¸Š</span>â€ï¼Œè¿˜èƒ½ä»â€œä½ â€æˆ–â€œæˆ‘â€çš„è§’åº¦å‡ºå‘ï¼Œè¯´å‡ºå®ƒåœ¨â€œ<span class="speakable-finnish">edessÃ¤</span>â€(å‰é¢)ã€â€œ<span class="speakable-finnish">takana</span>â€(åé¢)ã€â€œ<span class="speakable-finnish">vasemmalla</span>â€(å·¦è¾¹)ã€â€œ<span class="speakable-finnish">oikealla</span>â€(å³è¾¹)ã€â€œ<span class="speakable-finnish">pÃ¤Ã¤llÃ¤</span>â€(ä¸Šé¢-æ¥è§¦)ã€â€œ<span class="speakable-finnish">alla</span>â€(ä¸‹é¢)ï¼Œâ€œ<span class="speakable-finnish">lÃ¤hellÃ¤</span>â€(é™„è¿‘) å’Œ â€œ<span class="speakable-finnish">kaukana</span>â€(è¿œå¤„) äº†ï¼</p>
            <p>ä½ æœ‰æ²¡æœ‰å‘ç°ï¼ŒèŠ¬å…°è¯­ç”¨ä¸€äº›å¬èµ·æ¥å¾ˆç‰¹åˆ«çš„è¯æ¥è¡¨è¾¾è¿™äº›ä»¥èº«ä½“ä¸ºå‚ç…§çš„æ–¹ä½ï¼Ÿå®ƒä»¬å°±åƒæ˜¯ä½ å®šä½ä¸–ç•Œçš„â€œç§äººå¯¼èˆªå‘˜â€ã€‚</p>
            <p class="note">åœ¨èŠ¬å…°è¯­è¯­æ³•ä¸­ï¼Œåƒ <span class="speakable-finnish">edessÃ¤</span>, <span class="speakable-finnish">takana</span>, <span class="speakable-finnish">vieressÃ¤</span>, <span class="speakable-finnish">lÃ¤hellÃ¤</span>, <span class="speakable-finnish">pÃ¤Ã¤llÃ¤</span>, <span class="speakable-finnish">alla</span>, <span class="speakable-finnish">ylÃ¤puolella</span>, <span class="speakable-finnish">alapuolella</span> è¿™äº›è¯ï¼Œå¾ˆå¤šæ—¶å€™è¢«ç§°ä¸º **<span class="speakable-finnish">postpositiot</span> (Postpositionsï¼Œåç½®è¯)**ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸è·Ÿåœ¨æŸä¸ªåè¯ï¼ˆè¡¨ç¤ºå‚ç…§ç‰©ï¼Œè¿™ä¸ªåè¯å¸¸éœ€è¦å˜æˆâ€œçš„â€å­—å½¢å¼â€”â€”<span class="speakable-finnish">genetiivi</span>ï¼‰çš„åé¢ã€‚è€Œåƒ <span class="speakable-finnish">vasemmalla</span>, <span class="speakable-finnish">oikealle</span> è¿™äº›ï¼Œä½ å¯ä»¥æ„Ÿè§‰åˆ°å®ƒä»¬ä¸æˆ‘ä»¬ç»´åº¦äºŒå­¦çš„â€œè¡¨é¢æ ¼â€(<span class="finnish-phrase speakable-finnish">adessiivi, allatiivi</span>) åœ¨â€œå£°éŸ³æ„Ÿè§‰â€ä¸Šæ˜¯ä¸€è‡´çš„ã€‚è¿˜æœ‰ä¸€äº›ï¼Œæ¯”å¦‚ <span class="speakable-finnish">ylÃ¶s</span> (å‘ä¸Šåœ°), <span class="speakable-finnish">alas</span> (å‘ä¸‹åœ°), <span class="speakable-finnish">kaukana</span> (åœ¨è¿œå¤„)ï¼Œå®ƒä»¬æœ¬èº«å°±æ˜¯æè¿°æ–¹å‘æˆ–ä½ç½®çš„ **<span class="speakable-finnish">adverbit</span> (Adverbsï¼Œå‰¯è¯)**ã€‚</p>
            <p class="note speakable-finnish">Ã„lÃ¤ huoli termeistÃ¤! TÃ¤rkeintÃ¤ on, ettÃ¤ alat tunnistaa nÃ¤mÃ¤ sanat ja yhdistÃ¤Ã¤ ne oikeisiin paikkoihin ja suuntiin. (åˆ«æ‹…å¿ƒæœ¯è¯­ï¼æœ€é‡è¦çš„æ˜¯ä½ å¼€å§‹è®¤å‡ºè¿™äº›è¯ï¼Œå¹¶å°†å®ƒä»¬ä¸æ­£ç¡®çš„ä½ç½®å’Œæ–¹å‘è”ç³»èµ·æ¥ã€‚)</p>
            <p>è¿™äº›â€œæ–¹ä½ä¼™ä¼´â€çš„å‘éŸ³å’Œå®ƒä»¬æ‰€ä»£è¡¨çš„ç©ºé—´æ„Ÿè§‰ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå¼€å§‹åœ¨ä½ è„‘æµ·é‡Œå»ºç«‹è¿æ¥äº†ï¼Ÿç»§ç»­ç”¨å®ƒä»¬æ¥æè¿°ä½ çœ‹åˆ°å’Œæ„Ÿå—åˆ°çš„ä¸–ç•Œå§ï¼</p>
            <p><strong>ä¸‹ä¸€ç»´åº¦ï¼š</strong> é™¤äº†ä»¥â€œæˆ‘â€ä¸ºä¸­å¿ƒï¼Œä¸–ç•Œæœ¬èº«ä¹Ÿæœ‰å›ºå®šçš„æ–¹å‘ï¼Œæ¯”å¦‚ä¸œã€å—ã€è¥¿ã€åŒ—ã€‚ä¸‹ä¸€ç»´åº¦ï¼Œæˆ‘ä»¬å°†ä¸€èµ·æ¢ç´¢èŠ¬å…°è¯­å¦‚ä½•æç»˜è¿™äº›â€œå®‡å®™çº§â€çš„åæ ‡ï¼Œè¿›å…¥ã€æ–¹å‘ç©ºé—´ã€‘çš„æ¢ç´¢ï¼</p>
        </div>
    </section>

    <hr>
    <section id="new-vocabulary-list-m3p3" class="new-vocab-section">
        <h3>ğŸ“š æœ¬ç»´åº¦æ–°æœ‹å‹ï¼šè¯æ±‡ç§¯ç´¯ (èšç„¦æ ¸å¿ƒç›¸å¯¹æ–¹ä½è¯)</h3>
        <p>ä»¥ä¸‹æ˜¯æœ¬ç»´åº¦ï¼ˆæ¨¡å—ä¸‰Â·ç»´åº¦ä¸‰ï¼‰æˆ‘ä»¬é‡ç‚¹æ¥è§¦å’Œæ„ŸçŸ¥çš„æ ¸å¿ƒâ€œæ–¹ä½ä¼™ä¼´â€ã€‚ç†Ÿæ‚‰å®ƒä»¬çš„å‘éŸ³å’Œå®ƒä»¬æ‰€ä»£è¡¨çš„â€œç›¸å¯¹äºä½ â€çš„ç©ºé—´æ„Ÿè§‰ï¼Œå°†æå¤§å¢å¼ºä½ çš„å®šä½èƒ½åŠ›ï¼æˆ‘ä»¬ä¾ç„¶ä¸»è¦åœ¨ç¬¬ä¸€å’Œç¬¬äºŒäººç§°çš„ç®€å•å¥å­ä¸­ä½¿ç”¨å®ƒä»¬ã€‚</p>
        <table class="vocab-list-table">
            <thead>
                <tr>
                    <th>èŠ¬å…°è¯­â€œæ–¹ä½ä¼™ä¼´â€ (å¸¸ç”¨å½¢å¼)</th>
                    <th>å¤§è‡´çš„ä¸­æ–‡â€œæ„Ÿè§‰â€</th>
                    <th>ä¸€ä¸ªç®€å•çš„<span class="speakable-finnish">MinÃ¤/SinÃ¤</span>ä¾‹å¥</th>
                </tr>
            </thead>
            <tbody>
                <tr><td><span class="speakable-finnish">edessÃ¤</span></td><td>åœ¨...å‰é¢</td><td><span class="speakable-finnish">Kirja on minun <span class="finnish-phrase">edessÃ¤</span>.</span></td></tr>
                <tr><td><span class="speakable-finnish">takana</span></td><td>åœ¨...åé¢</td><td><span class="speakable-finnish">SinÃ¤ olet minun <span class="finnish-phrase">takana</span>.</span></td></tr>
                <tr><td><span class="speakable-finnish">vasemmalla (puolella)</span></td><td>åœ¨å·¦è¾¹</td><td><span class="speakable-finnish">Minun kuppi on <span class="finnish-phrase">vasemmalla</span>.</span></td></tr>
                <tr><td><span class="speakable-finnish">oikealla (puolella)</span></td><td>åœ¨å³è¾¹</td><td><span class="speakable-finnish">Sinun puhelin on <span class="finnish-phrase">oikealla</span>.</span></td></tr>
                <tr><td><span class="speakable-finnish">pÃ¤Ã¤llÃ¤</span></td><td>åœ¨...ä¹‹ä¸Š (æ¥è§¦)</td><td><span class="speakable-finnish">Minun hattu on minun <span class="finnish-phrase">pÃ¤Ã¤llÃ¤</span>. <span class="note">(tai pÃ¤Ã¤ssÃ¤)</span></span></td></tr>
                <tr><td><span class="speakable-finnish">ylÃ¤puolella</span></td><td>åœ¨...ä¸Šæ–¹ (ä¸æ¥è§¦)</td><td><span class="speakable-finnish">Lamppu on sinun <span class="finnish-phrase">ylÃ¤puolella</span>.</span></td></tr>
                <tr><td><span class="speakable-finnish">alla</span></td><td>åœ¨...ä¸‹é¢ (é€šå¸¸æ¥è§¦æˆ–è¿‘è·ç¦»)</td><td><span class="speakable-finnish">Minun kengÃ¤t ovat sÃ¤ngyn <span class="finnish-phrase">alla</span>.</span></td></tr>
                <tr><td><span class="speakable-finnish">alapuolella</span></td><td>åœ¨...ä¸‹æ–¹ (æ›´å¼ºè°ƒå‚ç›´ä¸‹æ–¹ï¼Œä¸ä¸€å®šæ¥è§¦)</td><td><span class="speakable-finnish">Kellari on talon <span class="finnish-phrase">alapuolella</span>.</span></td></tr>
                <tr><td><span class="speakable-finnish">lÃ¤hellÃ¤</span></td><td>åœ¨è¿‘å¤„ï¼Œåœ¨...é™„è¿‘</td><td><span class="speakable-finnish">MinÃ¤ olen <span class="finnish-phrase">lÃ¤hellÃ¤</span> sinua.</span></td></tr>
                <tr><td><span class="speakable-finnish">kaukana</span></td><td>åœ¨è¿œå¤„ï¼Œç¦»...è¿œ</td><td><span class="speakable-finnish">SinÃ¤ olet <span class="finnish-phrase">kaukana</span> minusta. <span class="note">(minusta=ä»æˆ‘è¿™é‡Œ)</span></span></td></tr>
                 <tr><td><span class="speakable-finnish">edelle</span></td><td>åˆ°...å‰é¢å»</td><td><span class="speakable-finnish">MinÃ¤ menen <span class="finnish-phrase">edelle</span>.</span></td></tr>
                <tr><td><span class="speakable-finnish">taakse</span></td><td>åˆ°...åé¢å»</td><td><span class="speakable-finnish">SinÃ¤ menet <span class="finnish-phrase">taakse</span>.</span></td></tr>
                 <tr><td><span class="speakable-finnish">vasemmalle</span></td><td>åˆ°å·¦è¾¹å»</td><td><span class="speakable-finnish">MinÃ¤ kÃ¤Ã¤nnyn <span class="finnish-phrase">vasemmalle</span>.</span></td></tr>
                <tr><td><span class="speakable-finnish">oikealle</span></td><td>åˆ°å³è¾¹å»</td><td><span class="speakable-finnish">SinÃ¤ kÃ¤Ã¤nnyt <span class="finnish-phrase">oikealle</span>.</span></td></tr>
                <tr><td><span class="speakable-finnish">ylÃ¶s</span></td><td>å‘ä¸Šåœ° (å‰¯è¯)</td><td><span class="speakable-finnish">Katson <span class="finnish-phrase">ylÃ¶s</span>.</span></td></tr>
                <tr><td><span class="speakable-finnish">alas</span></td><td>å‘ä¸‹åœ° (å‰¯è¯)</td><td><span class="speakable-finnish">Pallo putoaa <span class="finnish-phrase">alas</span>.</span></td></tr>
                <!-- New nouns/verbs from examples for this Dim3, if not already covered or super common -->
                <tr><td><span class="speakable-finnish">seinÃ¤</span></td><td>å¢™</td><td>-</td></tr>
                <tr><td><span class="speakable-finnish">lamppu</span></td><td>ç¯</td><td>-</td></tr>
                <tr><td><span class="speakable-finnish">sÃ¤nky</span></td><td>åºŠ</td><td>-</td></tr>
                <tr><td><span class="speakable-finnish">kellari</span></td><td>åœ°ä¸‹å®¤</td><td>-</td></tr>
                <tr><td><span class="speakable-finnish">meri</span></td><td>æµ·</td><td>-</td></tr>
                <tr><td><span class="speakable-finnish">ovi</span></td><td>é—¨</td><td>-</td></tr>
                <tr><td><span class="speakable-finnish">hattu</span></td><td>å¸½å­</td><td>-</td></tr>
                <tr><td><span class="speakable-finnish">kÃ¤Ã¤ntyÃ¤</span></td><td>è½¬å¼¯</td><td><span class="speakable-finnish">minÃ¤ kÃ¤Ã¤nnyn, sinÃ¤ kÃ¤Ã¤nnyt</span></td></tr>
            </tbody>
        </table>
    </section>


<script>
    const finnishLang = 'fi-FI';

    function debugLog(message) {
        const output = document.getElementById('debug-output');
        if (output && output.innerHTML !== undefined) {
            const time = new Date().toLocaleTimeString();
            output.innerHTML += `[${time}] ${message}<br>`;
            output.scrollTop = output.scrollHeight;
        }
    }

    function testBasicTTS() {
        debugLog('å¼€å§‹æµ‹è¯•åŸºæœ¬TTSåŠŸèƒ½...');
        // ... (rest of function as before)
        if (!('speechSynthesis' in window)) {
            debugLog('âŒ é”™è¯¯ï¼šæµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆAPI');
            alert('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆåŠŸèƒ½ã€‚');
            return;
        }
        debugLog('âœ… æµè§ˆå™¨æ”¯æŒè¯­éŸ³åˆæˆAPI');
        const utterance = new SpeechSynthesisUtterance('Hello World');
        utterance.onstart = () => debugLog('âœ… è‹±è¯­æµ‹è¯•å¼€å§‹æ’­æ”¾');
        utterance.onend = () => debugLog('âœ… è‹±è¯­æµ‹è¯•æ’­æ”¾å®Œæˆ');
        utterance.onerror = (event) => debugLog('âŒ è‹±è¯­æµ‹è¯•é”™è¯¯: ' + event.error);
        window.speechSynthesis.speak(utterance);
    }

    function testFinnishTTSModule3_Dim3_Evolved() { 
        debugLog('å¼€å§‹æµ‹è¯•èŠ¬å…°è¯­TTSåŠŸèƒ½ (æ¨¡å—3.3æ¼”åŒ–)...');
        const utterance = new SpeechSynthesisUtterance('Kirja on minun edessÃ¤.');
        utterance.lang = finnishLang;
        // ... (onstart, onend, onerror as before)
        utterance.onstart = () => debugLog('âœ… èŠ¬å…°è¯­(M3.3 Evolved)æµ‹è¯•å¼€å§‹æ’­æ”¾');
        utterance.onend = () => debugLog('âœ… èŠ¬å…°è¯­(M3.3 Evolved)æµ‹è¯•æ’­æ”¾å®Œæˆ');
        utterance.onerror = (event) => debugLog('âŒ èŠ¬å…°è¯­(M3.3 Evolved)æµ‹è¯•é”™è¯¯: ' + event.error);
        window.speechSynthesis.speak(utterance);
    }
     function listVoices() {
        debugLog('æ­£åœ¨è·å–å¯ç”¨è¯­éŸ³åˆ—è¡¨...');
        // ... (rest of function as before)
        const voices = window.speechSynthesis.getVoices();
        if (voices.length === 0) {
            debugLog('âš ï¸ æœªæ‰¾åˆ°ä»»ä½•è¯­éŸ³ï¼Œè¯­éŸ³å¯èƒ½è¿˜åœ¨åŠ è½½ä¸­ã€‚');
            window.speechSynthesis.onvoiceschanged = () => {
                debugLog('è¯­éŸ³åˆ—è¡¨å·²æ›´æ–°ï¼Œé‡æ–°è·å–...');
                const updatedVoices = window.speechSynthesis.getVoices();
                if (updatedVoices.length === 0 && voices.length === 0) { 
                    debugLog('âš ï¸ æ›´æ–°åä»æœªæ‰¾åˆ°ä»»ä½•è¯­éŸ³ã€‚'); return;
                }
                if (updatedVoices.length > 0) logVoiceList(updatedVoices);
            };
            if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1 || (navigator.userAgent.toLowerCase().indexOf('safari') > -1 && navigator.userAgent.toLowerCase().indexOf('chrome') === -1) ) {
                setTimeout(() => { if(window.speechSynthesis.getVoices().length > 0) listVoices(); }, 500);
            }
            return;
        }
        logVoiceList(voices);
    }
     function logVoiceList(voices) {
        debugLog(`æ‰¾åˆ° ${voices.length} ä¸ªå¯ç”¨è¯­éŸ³:`);
        // ... (rest of function as before)
        voices.forEach((voice, index) => {
            const isDefault = voice.default ? ' (é»˜è®¤)' : '';
            debugLog(`${index + 1}. ${voice.name} (${voice.lang})${isDefault}`);
        });
        const finnishVoices = voices.filter(voice =>
            voice.lang.toLowerCase().startsWith('fi') ||
            voice.name.toLowerCase().includes('finnish') ||
            voice.name.toLowerCase().includes('suomi')
        );
        if (finnishVoices.length > 0) {
            debugLog(`âœ… æ‰¾åˆ° ${finnishVoices.length} ä¸ªèŠ¬å…°è¯­è¯­éŸ³:`);
            finnishVoices.forEach(voice => {
                debugLog(`  - ${voice.name} (${voice.lang})`);
            });
        } else {
            debugLog('âŒ æœªæ‰¾åˆ°èŠ¬å…°è¯­è¯­éŸ³ã€‚');
        }
    }

    function removeDebugSection() {
        const debugSection = document.querySelector('.debug-section');
        // ... (rest of function as before)
        if (debugSection) {
            debugSection.style.display = 'none';
            debugLog('è°ƒè¯•åŒºåŸŸå·²éšè—');
        }
    }

    let isSpeaking = false;
    function speakText(text, lang = finnishLang) {
        // ... (rest of function as before)
        if (!('speechSynthesis' in window)) return;
        if (isSpeaking) {
            window.speechSynthesis.cancel();
            setTimeout(() => startSpeaking(text, lang), 50);
        } else {
            startSpeaking(text, lang);
        }
    }

    function startSpeaking(text, lang) {
        // ... (rest of function as before)
        isSpeaking = true;
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = lang;
        utterance.rate = 0.9;
        utterance.pitch = 1.0;
        utterance.volume = 1.0;
        const voices = window.speechSynthesis.getVoices();
        let selectedVoice = null;
        if (lang.toLowerCase().startsWith('fi')) {
            selectedVoice = voices.find(voice => voice.lang.toLowerCase() === 'fi-fi') ||
                            voices.find(voice => voice.lang.toLowerCase().startsWith('fi')) ||
                            voices.find(voice => voice.name.toLowerCase().includes('finnish') || voice.name.toLowerCase().includes('suomi'));
        }
        if (selectedVoice) utterance.voice = selectedVoice;
        utterance.onend = () => { isSpeaking = false; };
        utterance.onerror = (event) => {
            debugLog(`âŒ æ’­æ”¾é”™è¯¯: ${event.error} (æ–‡æœ¬: "${text}")`);
            isSpeaking = false;
        };
        window.speechSynthesis.speak(utterance);
    }

    function addTTSButton(element, textToSpeak) {
        // ... (rest of function as before, with cleaning)
        let cleanedText = textToSpeak.replace(/\s*\(.*?\)\s*/g, '').trim(); 
        cleanedText = cleanedText.replace(/ï¼ˆ.*?ï¼‰/g, '').trim();
        cleanedText = cleanedText.replace(/\[.*?\]/g, '').trim();

        if (!cleanedText || cleanedText === '') return;
        
        const existingButton = Array.from(element.childNodes).find(node => node.nodeType === Node.ELEMENT_NODE && node.classList.contains('tts-button') && node.title === 'æ’­æ”¾: ' + cleanedText);
        if (existingButton) return;

        const button = document.createElement('button');
        button.className = 'tts-button';
        button.innerHTML = 'ğŸ”Š';
        button.title = 'æ’­æ”¾: ' + cleanedText;
        button.setAttribute('aria-label', 'æ’­æ”¾éŸ³é¢‘: ' + cleanedText);
        button.onclick = (event) => {
            event.preventDefault();
            event.stopPropagation();
            speakText(cleanedText);
        };
        
        if (element.tagName === 'SPAN' && (element.classList.contains('speakable-finnish') || element.classList.contains('finnish-phrase'))) {
            if (!element.querySelector('.tts-button')) {
                element.appendChild(button);
            }
        } else {
            let insertBeforeNode = null;
            for (let i = 0; i < element.childNodes.length; i++) {
                const child = element.childNodes[i];
                if (child.nodeType === Node.ELEMENT_NODE && (child.classList.contains('note') || child.classList.contains('chinese-sense'))) {
                    insertBeforeNode = child;
                    break;
                }
            }
            if (insertBeforeNode) {
                element.insertBefore(button, insertBeforeNode);
            } else {
                element.appendChild(button);
            }
        }
    }
    
    function initializeTTSForPage() {
        debugLog('ğŸš€ åˆå§‹åŒ–é¡µé¢TTSæŒ‰é’® (æ¨¡å—ä¸‰Â·ç»´åº¦ä¸‰ ç›¸å¯¹ç©ºé—´ æ¼”åŒ–ç‰ˆ)...');
        
        document.querySelectorAll('.speakable-finnish, .finnish-phrase').forEach(span => {
            const text = span.textContent.trim();
            if (text && !span.querySelector('.tts-button')) {
                 addTTSButton(span, text);
            }
        });

        const sentenceLevelContainers = [
            ...document.querySelectorAll('.æ–¹ä½ä¼™ä¼´-content p.example-sentence'),
            ...document.querySelectorAll('.usage-example p'), 
            ...document.querySelectorAll('.interactive-choice button'), // For buttons in interactive parts
            ...document.querySelectorAll('.practice-plan-card .task-list ul li'), 
            ...document.querySelectorAll('#intro-dimension3 .example p'),
            ...document.querySelectorAll('#intro-dimension3 .concept-map p'),
            ...document.querySelectorAll('.new-vocab-section .vocab-list-table td:first-child'),
            ...document.querySelectorAll('.new-vocab-section .vocab-list-table td:nth-child(3)'),
            ...document.querySelectorAll('#dim3-summary-and-next .summary-card p'),
            ...document.querySelectorAll('#dim3-summary-and-next .summary-card ul li')
        ];

        sentenceLevelContainers.forEach(el => {
            if (el.classList.contains('speakable-finnish') || el.classList.contains('finnish-phrase')) return;
            if (el.querySelector('.tts-button')) { 
                let hasOwnButton = false;
                for(let child of el.childNodes){
                    if(child.nodeType === Node.ELEMENT_NODE && child.classList.contains('tts-button')){
                        hasOwnButton = true;
                        break;
                    }
                }
                if(hasOwnButton || el.querySelector('.speakable-finnish .tts-button')) return;
            }
            if (el.closest('thead')) return;

            let textToSpeak = "";
            Array.from(el.childNodes).forEach(node => {
                if (node.nodeType === Node.TEXT_NODE) {
                    textToSpeak += node.textContent;
                } else if (node.nodeType === Node.ELEMENT_NODE &&
                           !node.classList.contains('note') &&
                           !node.classList.contains('chinese-sense') &&
                           !node.classList.contains('tts-button') &&
                           !node.classList.contains('speakable-finnish') && 
                           !node.classList.contains('finnish-phrase') &&
                           !node.classList.contains('highlight') 
                           ) {
                    textToSpeak += node.textContent; 
                }
            });
            textToSpeak = textToSpeak.trim();
            
            if (textToSpeak.length > 1 && textToSpeak.match(/[Ã¤Ã¶Ã¥Ã„Ã–Ã…]/i)) { 
                addTTSButton(el, textToSpeak);
            }
        });
        
        document.querySelectorAll('.æ–¹ä½ä¼™ä¼´-card h4 .speakable-finnish, .practice-plan-card .task-list h5 .speakable-finnish').forEach(el => {
             if(!el.querySelector('.tts-button')) addTTSButton(el, el.textContent);
        });
        document.querySelectorAll('#intro-dimension3 h2, #relative-spatial-partners h3, #interactive-practice-dim3 h3, #language-bleeding-plan-dim3 h2, #dim3-summary-and-next h2, #new-vocabulary-list-m3p3 h3').forEach(h => {
            if (!h.querySelector('.tts-button')) {
                const text = h.textContent.split('(')[0].trim(); 
                if (text.length > 1 && text.match(/[Ã¤Ã¶Ã¥Ã„Ã–Ã…]/i)) {
                    addTTSButton(h, text);
                }
            }
        });

        debugLog('âœ… é¡µé¢TTSæŒ‰é’®åˆå§‹åŒ–å®Œæ¯• (æ¨¡å—ä¸‰Â·ç»´åº¦ä¸‰ ç›¸å¯¹ç©ºé—´ æ¼”åŒ–ç‰ˆ)');
    }

    // --- Interactive Quiz for Dimension 3 ---
    const dim3Questions = [
        {
            image: "https://images.pexels.com/photos/1643383/pexels-photo-1643383.jpeg?auto=compress&cs=tinysrgb&w=600", // Living room
            question_fi: "MissÃ¤ televisio on sohvaan nÃ¤hden?", // TV relative to sofa
            question_zh: "ç”µè§†ç›¸å¯¹äºæ²™å‘åœ¨å“ªé‡Œï¼Ÿ",
            options: [
                { text_fi: "EdessÃ¤", correct: true},
                { text_fi: "Takana", correct: false},
                { text_fi: "PÃ¤Ã¤llÃ¤", correct: false}
            ],
            answer_fi_prefix: "Televisio on sohvan "
        },
        {
            image: "https://images.pexels.com/photos/1643383/pexels-photo-1643383.jpeg?auto=compress&cs=tinysrgb&w=600",
            question_fi: "MissÃ¤ lamppu on pÃ¶ytÃ¤Ã¤n nÃ¤hden?", // Lamp relative to table
            question_zh: "ç¯ç›¸å¯¹äºæ¡Œå­åœ¨å“ªé‡Œï¼Ÿ",
            options: [
                { text_fi: "Alla", correct: false},
                { text_fi: "VieressÃ¤", correct: false},
                { text_fi: "YlÃ¤puolella", correct: true}
            ],
            answer_fi_prefix: "Lamppu on pÃ¶ydÃ¤n "
        },
        {
            image: "https://images.pexels.com/photos/1643383/pexels-photo-1643383.jpeg?auto=compress&cs=tinysrgb&w=600",
            question_fi: "MissÃ¤ sohva on ikkunaan nÃ¤hden?", // Sofa relative to window
            question_zh: "æ²™å‘ç›¸å¯¹äºçª—æˆ·åœ¨å“ªé‡Œï¼Ÿ",
            options: [
                { text_fi: "EdessÃ¤", correct: true},
                { text_fi: "Takana", correct: false},
                { text_fi: "Oikealla", correct: false}
            ],
            answer_fi_prefix: "Sohva on ikkunan "
        }
    ];
    let currentDim3QuestionIndex = 0;
    const qDim3Container = document.getElementById('q-dim3-container');
    const feedbackDim3El = document.getElementById('feedback-area-dim3');
    const sceneImageDim3 = document.getElementById('scene-image-dim3');

    function displayDim3Question() {
        if (!qDim3Container || !feedbackDim3El || !sceneImageDim3) return;
        const q = dim3Questions[currentDim3QuestionIndex];
        sceneImageDim3.src = q.image; // Could change image per question if needed

        let html = `<p><span class="speakable-finnish">${q.question_fi}</span> <span class="note">(${q.question_zh})</span></p>`;
        html += `<div class="interactive-choice" style="text-align: center;">`;
        q.options.forEach(opt => {
            html += `<button onclick="checkDim3Answer(${opt.correct}, '${q.answer_fi_prefix}${opt.text_fi}.')"><span class="speakable-finnish">${opt.text_fi}</span></button>`;
        });
        html += `</div>`;
        qDim3Container.innerHTML = html;
        feedbackDim3El.innerHTML = "";
        feedbackDim3El.className = 'feedback-area';
        // Add TTS to new question and options
        qDim3Container.querySelectorAll('.speakable-finnish').forEach(span => {
            if(!span.querySelector('.tts-button')) addTTSButton(span, span.textContent);
        });
         qDim3Container.querySelectorAll('.interactive-choice button').forEach(button => {
            const span = button.querySelector('.speakable-finnish');
            if (span && !button.querySelector('.tts-button')) {
                 addTTSButton(button, span.textContent);
            }
        });
    }

    function checkDim3Answer(isCorrect, correctAnswerSentence) {
        if (!feedbackDim3El) return;
        let feedbackText = "";
        if (isCorrect) {
            feedbackText = `<span class="speakable-finnish">Oikein! ${correctAnswerSentence}</span>`;
            feedbackDim3El.className = 'feedback-area correct';
        } else {
            feedbackText = `<span class="speakable-finnish">Ei ihan. Oikea vastaus voisi olla esimerkiksi: ${correctAnswerSentence}</span> <span class="note">(YritÃ¤ uudelleen tai katso seuraava kysymys!)</span>`;
            feedbackDim3El.className = 'feedback-area incorrect';
        }
        feedbackDim3El.innerHTML = feedbackText;
        feedbackDim3El.querySelectorAll('.speakable-finnish').forEach(el => {
            if (!el.querySelector('.tts-button')) addTTSButton(el, el.textContent);
        });
        const mainFeedbackSpan = feedbackDim3El.querySelector('.speakable-finnish');
        if(mainFeedbackSpan) speakText(mainFeedbackSpan.textContent.split('.')[0] + '.');
    }

    function nextDim3Question() {
        currentDim3QuestionIndex = (currentDim3QuestionIndex + 1) % dim3Questions.length;
        displayDim3Question();
    }

    document.addEventListener('DOMContentLoaded', () => {
        if (window.speechSynthesis.getVoices().length === 0) {
            window.speechSynthesis.onvoiceschanged = initializeTTSForPage;
        } else {
            initializeTTSForPage();
        }
        setTimeout(initializeTTSForPage, 200); 
        displayDim3Question(); // Display the first question
    });
</script>
</body>
</html>