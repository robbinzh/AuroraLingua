<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æ¨¡å—ä¸‰ç»ˆææ€»ç»“ï¼šç©ºé—´æ„ŸçŸ¥åç¼©</title>
    <style>
        body { font-family: "Microsoft YaHei", sans-serif; line-height: 1.8; margin: 20px auto; max-width: 900px; padding: 0 20px; color: #e0e0e0; background-color: #1c1c1e; }
        h1, h2, h3, h4 { color: #bb86fc; text-shadow: 0 0 5px rgba(187, 134, 252, 0.3); }
        h1 { text-align: center; margin-bottom: 10px; font-size: 2.4em; }
        h1 + p { text-align: center; color: #03dac6; font-size: 1.2em; margin-bottom: 40px; }
        h2 { border-bottom: 2px solid #3700b3; padding-bottom: 12px; margin-top: 50px; font-size: 2em; }
        h3 { margin-top: 35px; font-size: 1.6em; color: #cf6679; }
        .summary-section, .task-section, .final-declaration {
            background-color: #2c2c2e; border: 1px solid #3c3c3e; border-radius: 8px; padding: 25px; margin-bottom: 40px; box-shadow: 0 6px 15px rgba(0,0,0,0.4);
        }
        .finnish-phrase { font-weight: bold; color: #03dac6; font-size: 1.1em; }
        .note { font-size: 0.95em; color: #a0a0a0; font-style: italic; display: block; margin-top: 5px; }
        .tts-button { background: none; border: none; cursor: pointer; font-size: 1.2em; margin-left: 10px; padding: 0; display: inline-block; vertical-align: middle; color: #bb86fc; }
        .tts-button:hover { color: #ffffff; opacity: 0.9; }
        hr { border: 0; height: 1px; background-image: linear-gradient(to right, rgba(55,0,179,0), rgba(55,0,179,0.7), rgba(55,0,179,0)); margin: 60px 0; }
        .cognition-bleed { background-color: rgba(3, 218, 198, 0.1); border: 1px solid rgba(3, 218, 198, 0.3); padding: 20px; border-radius: 5px; margin-top: 20px; font-size: 1.2em; font-weight: bold; text-align: center; }
        .cognition-bleed .icon { margin-right: 10px; font-style: normal; }
        
        /* Table Styles */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 0.95em; }
        th, td { border: 1px solid #444; padding: 12px; text-align: left; vertical-align: middle; }
        thead th { background-color: #3700b3; color: #fff; text-align: center; }
        .axis-title { font-size: 1.3em; font-weight: bold; color: #cf6679; }
        .axis-icon { font-size: 1.5em; margin-right: 10px; }
        
        /* Task List Styles */
        .task-list { list-style-type: none; padding-left: 0; }
        .task-list li { background-color: #333; padding: 15px; margin-bottom: 10px; border-left: 5px solid #03dac6; border-radius: 4px; }
        .final-declaration-list { list-style: none; padding-left: 0; font-size: 1.1em; }
        .final-declaration-list li { margin-bottom: 8px; }
        .final-declaration-list .icon { color: #03dac6; margin-right: 10px; }
    </style>
</head>
<body>

    <section id="module-three-summary">
        <h1>ğŸ§­ã€èŠ¬å…°è¯­ç©ºé—´æ„ŸçŸ¥Â·å…¨ç»´åº¦å‡ºè¡€ã€‘</h1>
        <p>â†’ æ–¹å‘ã€ä½ç½®ã€è¿åŠ¨ Ã— ç›¸å¯¹åæ ‡ Ã— æ ¼å˜åŒ–ç³»ç»Ÿå…¨æ¯å›¾</p>

        <div class="summary-section">
            <h2>ğŸ§¬ã€èŠ¬å…°è¯­ç©ºé—´æ ¼ç³»ç»ŸÂ·å®Œæ•´ç»“æ„å‡ºè¡€ã€‘</h2>
            <p>ä½ å·²ç»è¿›å…¥ç©ºé—´è¯­è¨€çš„ç»ˆææ··æ²Œæ€ã€‚ä»¥ä¸‹æ˜¯ä½ å·²æŒæ¡çš„æ„ŸçŸ¥æ¨¡å‹ã€‚</p>
            
            <table>
                <thead><tr><th>ç©ºé—´çŠ¶æ€</th><th>èŠ¬å…°è¯­è¡¨è¾¾</th><th>ä¸­æ–‡ç›´è§‰ç¿»è¯‘</th></tr></thead>
                <tbody>
                    <tr><td>å¾€é‡Œèµ°</td><td><span class="speakable-finnish">Menen huonee<span class="finnish-phrase">seen</span>.</span></td><td>â€œæˆ‘è¿›å…¥...çš„å†…éƒ¨â€</td></tr>
                    <tr><td>åœ¨é‡Œé¢</td><td><span class="speakable-finnish">Olen huonee<span class="finnish-phrase">ssa</span>.</span></td><td>â€œæˆ‘è¢«...åŒ…è£¹â€</td></tr>
                    <tr><td>ä»é‡Œé¢å‡ºæ¥</td><td><span class="speakable-finnish">Tulen huonee<span class="finnish-phrase">sta</span>.</span></td><td>â€œæˆ‘ç¦»å¼€...çš„å†…éƒ¨â€</td></tr>
                    <tr><td>åœ¨å¤–é¢</td><td><span class="speakable-finnish">Olen ulkona.</span></td><td>â€œæˆ‘ç«™åœ¨...ä¹‹å¤–â€</td></tr>
                    <tr><td>å¾€ä¸Šèµ°</td><td><span class="speakable-finnish">Menen pÃ¶ydÃ¤n <span class="finnish-phrase">pÃ¤Ã¤lle</span>.</span></td><td>â€œæˆ‘çˆ¬ä¸Š...çš„è¡¨é¢â€</td></tr>
                    <tr><td>åœ¨ä¸Šé¢</td><td><span class="speakable-finnish">Olen pÃ¶ydÃ¤n <span class="finnish-phrase">pÃ¤Ã¤llÃ¤</span>.</span></td><td>â€œæˆ‘è¢«...è¦†ç›–â€</td></tr>
                    <tr><td>å¾€ä¸‹èµ°</td><td><span class="speakable-finnish">Tulen pÃ¶ydÃ¤<span class="finnish-phrase">ltÃ¤</span>.</span></td><td>â€œæˆ‘æ»‘ç¦»...ä¸‹æ–¹â€</td></tr>
                    <tr><td>åœ¨ä¸‹é¢</td><td><span class="speakable-finnish">Olen pÃ¶ydÃ¤n <span class="finnish-phrase">alla</span>.</span></td><td>â€œæˆ‘åœ¨...ä¹‹ä¸‹â€</td></tr>
                    <tr><td>å¾€æ—è¾¹èµ°</td><td><span class="speakable-finnish">Menen pÃ¶ydÃ¤n <span class="finnish-phrase">vierelle</span>.</span></td><td>â€œæˆ‘æ»‘åˆ°...çš„æ—è¾¹â€</td></tr>
                    <tr><td>åœ¨æ—è¾¹</td><td><span class="speakable-finnish">Olen pÃ¶ydÃ¤n <span class="finnish-phrase">vieressÃ¤</span>.</span></td><td>â€œæˆ‘ä¸...å¹¶åˆ—â€</td></tr>
                    <tr><td>å¾€ä¸­é—´èµ°</td><td><span class="speakable-finnish">Menen huoneen <span class="finnish-phrase">keskelle</span>.</span></td><td>â€œæˆ‘è¿›å…¥...çš„ä¸­å¿ƒâ€</td></tr>
                    <tr><td>åœ¨ä¸­é—´</td><td><span class="speakable-finnish">Olen huoneen <span class="finnish-phrase">keskellÃ¤</span>.</span></td><td>â€œæˆ‘åœ¨...çš„ä¸­å¿ƒâ€</td></tr>
                    <tr><td>åœ¨ä¸¤è€…ä¹‹é—´</td><td><span class="speakable-finnish">Olen pÃ¶ydÃ¤n ja tuolin <span class="finnish-phrase">vÃ¤lissÃ¤</span>.</span></td><td>â€œæˆ‘åœ¨...çš„ç¼éš™â€</td></tr>
                    <tr><td>åœ¨èƒŒå</td><td><span class="speakable-finnish">Olen sinun <span class="finnish-phrase">takana</span>.</span></td><td>â€œæˆ‘å¤„äº...çš„åæ–¹â€</td></tr>
                    <tr><td>åœ¨å‰é¢</td><td><span class="speakable-finnish">Olen sinun <span class="finnish-phrase">edessÃ¤</span>.</span></td><td>â€œæˆ‘å¤„äº...çš„æ­£å‰æ–¹â€</td></tr>
                    <tr><td>å¾€å·¦èµ°</td><td><span class="speakable-finnish">KÃ¤Ã¤nnyn <span class="finnish-phrase">vasemmalle</span>.</span></td><td>â€œæˆ‘æ»‘å‘...çš„å·¦ä¾§â€</td></tr>
                    <tr><td>åœ¨å·¦è¾¹</td><td><span class="speakable-finnish">Olen <span class="finnish-phrase">vasemmalla</span>.</span></td><td>â€œæˆ‘åœ¨...çš„å·¦ä¾§æ„ŸçŸ¥ç©ºé—´â€</td></tr>
                    <tr><td>å¾€å³èµ°</td><td><span class="speakable-finnish">KÃ¤Ã¤nnyn <span class="finnish-phrase">oikealle</span>.</span></td><td>â€œæˆ‘æ»‘å‘...çš„å³ä¾§â€</td></tr>
                    <tr><td>åœ¨å³è¾¹</td><td><span class="speakable-finnish">Olen <span class="finnish-phrase">oikealla</span>.</span></td><td>â€œæˆ‘åœ¨...çš„å³ä¾§å­˜åœ¨â€</td></tr>
                </tbody>
            </table>
            <div class="cognition-bleed"><span class="icon">ğŸ§ </span>ä½ ä¸æ˜¯â€œèƒŒå•è¯â€ï¼Œä½ æ˜¯åœ¨â€œè®©è¯­è¨€ä»ä½ çš„ç©ºé—´æ„ŸçŸ¥ä¸­è‡ªç„¶æµå‡ºâ€ã€‚</div>
        </div>

        <div class="summary-section">
            <h2>ğŸ§ ã€ç©ºé—´å‡ºè¡€Â·å…¨ç»´åº¦å›¾è°±ã€‘</h2>
            <p>åœ¨å‡ ä¸ªæ ¸å¿ƒç©ºé—´è½´ä¸Šï¼ŒèŠ¬å…°è¯­æ ¼å˜åŒ–æ˜¯å¦‚ä½•åç¼©çš„ï¼š</p>
            <table class="universe-map-table">
                <thead><tr><th>æ„ŸçŸ¥è½´</th><th>æˆ‘çš„çŠ¶æ€/åŠ¨ä½œ</th><th>â€œå°¾éŸ³é­”æ³•â€</th><th>ä½ å·²æŒæ¡çš„ä¾‹å­</th><th>æˆ‘çš„å†…å¿ƒç‹¬ç™½</th></tr></thead>
                <tbody>
                    <tr>
                        <td rowspan="3"><span class="axis-icon">ğŸ“¦</span><strong class="axis-title">å®¹å™¨è½´</strong></td>
                        <td>åœ¨é‡Œé¢ (é™æ€)</td><td><span class="finnish-phrase">-ssa/-ssÃ¤</span></td>
                        <td><span class="speakable-finnish">talo<span class="finnish-phrase">ssa</span>, kaupa<span class="finnish-phrase">ssa</span>, auto<span class="finnish-phrase">ssa</span>, tasku<span class="finnish-phrase">ssa</span></span></td><td>â€œæˆ‘è¢«è¿™ä¸ªç©ºé—´**åŒ…è£¹**ç€ã€‚â€</td>
                    </tr>
                    <tr>
                        <td>å¾€é‡Œèµ° (åŠ¨æ€)</td><td><span class="finnish-phrase">-seen/-hVn/-Vn</span></td>
                        <td><span class="speakable-finnish">talo<span class="finnish-phrase">on</span>, koulu<span class="finnish-phrase">un</span>, auto<span class="finnish-phrase">on</span>, koti<span class="finnish-phrase">in</span></span></td><td>â€œæˆ‘æ­£**è¿›å…¥**è¿™ä¸ªç©ºé—´ã€‚â€</td>
                    </tr>
                    <tr>
                        <td>ä»é‡Œé¢å‡ºæ¥ (åŠ¨æ€)</td><td><span class="finnish-phrase">-sta/-stÃ¤</span></td>
                        <td><span class="speakable-finnish">talo<span class="finnish-phrase">sta</span>, lauku<span class="finnish-phrase">sta</span>, jÃ¤Ã¤kaapi<span class="finnish-phrase">sta</span></span></td><td>â€œæˆ‘ä»è¿™ä¸ªç©ºé—´é‡Œè¢«**é‡Šæ”¾**å‡ºæ¥ã€‚â€</td>
                    </tr>
                    <tr>
                        <td rowspan="3"><span class="axis-icon">ğŸ–ï¸</span><strong class="axis-title">è¡¨é¢è½´</strong></td>
                        <td>åœ¨ä¸Šé¢ (é™æ€)</td><td><span class="finnish-phrase">-lla/-llÃ¤</span></td>
                        <td><span class="speakable-finnish">pÃ¶ydÃ¤<span class="finnish-phrase">llÃ¤</span>, asema<span class="finnish-phrase">lla</span>, lattia<span class="finnish-phrase">lla</span>, tori<span class="finnish-phrase">lla</span></span></td><td>â€œæˆ‘æ­£**æ¥è§¦**ç€è¿™ä¸ªè¡¨é¢ã€‚â€</td>
                    </tr>
                    <tr>
                        <td>åˆ°ä¸Šé¢å» (åŠ¨æ€)</td><td><span class="finnish-phrase">-lle</span></td>
                        <td><span class="speakable-finnish">pÃ¶ydÃ¤<span class="finnish-phrase">lle</span>, tuoli<span class="finnish-phrase">lle</span>, katolle, ranna<span class="finnish-phrase">lle</span></span></td><td>â€œæˆ‘æ­£**ç§»åŠ¨åˆ°**è¿™ä¸ªè¡¨é¢ä¸Šã€‚â€</td>
                    </tr>
                    <tr>
                        <td>ä»ä¸Šé¢ç¦»å¼€ (åŠ¨æ€)</td><td><span class="finnish-phrase">-lta/-ltÃ¤</span></td>
                        <td><span class="speakable-finnish">pÃ¶ydÃ¤<span class="finnish-phrase">ltÃ¤</span>, katolta, asema<span class="finnish-phrase">lta</span>, tori<span class="finnish-phrase">lta</span></span></td><td>â€œæˆ‘æ­£**ç¦»å¼€**è¿™ä¸ªè¡¨é¢ã€‚â€</td>
                    </tr>
                     <tr>
                        <td rowspan="2"><span class="axis-icon">ğŸ§­</span><strong class="axis-title">æ–¹å‘/èº«ä½“è½´</strong></td>
                        <td>åœ¨æˆ‘çš„... / åœ¨æŸä¸ªæ–¹å‘</td><td><span class="finnish-phrase">edessÃ¤, takana, vasemmalla, etelÃ¤ssÃ¤...</span></td>
                        <td><span class="speakable-finnish">minun <span class="finnish-phrase">edessÃ¤</span>, pohjoise<span class="finnish-phrase">ssa</span></span></td><td>â€œæ–¹å‘ä»**æˆ‘/ä¸–ç•Œ**çš„åæ ‡å‡ºå‘ã€‚â€</td>
                    </tr>
                    <tr>
                        <td>å»å¾€æˆ‘çš„... / å»å¾€æŸä¸ªæ–¹å‘</td><td><span class="finnish-phrase">eteen, vasemmalle, etelÃ¤Ã¤n...</span></td>
                        <td><span class="speakable-finnish">kÃ¤Ã¤nny <span class="finnish-phrase">vasemmalle</span>, mene <span class="finnish-phrase">itÃ¤Ã¤n</span></span></td><td>â€œæˆ‘æœå‘**æˆ‘/ä¸–ç•Œ**çš„æŸä¸ªåæ ‡ç§»åŠ¨ã€‚â€</td>
                    </tr>
                    <tr>
                        <td rowspan="3"><span class="axis-icon">ğŸ”—</span><strong class="axis-title">å…³ç³»è½´</strong></td>
                        <td>åœ¨æ—è¾¹/ä¸­é—´</td><td><span class="finnish-phrase">-n vieressÃ¤ / vÃ¤lissÃ¤ / keskellÃ¤</span></td>
                        <td><span class="speakable-finnish">aseman <span class="finnish-phrase">vieressÃ¤</span>, postin ja kaupan <span class="finnish-phrase">vÃ¤lissÃ¤</span></span></td><td>â€œæˆ‘ä¸â€˜å®ƒ/å®ƒä»¬â€™å¤„äº**å¹¶åˆ—/å¤¹ç¼/æ ¸å¿ƒ**å…³ç³»ã€‚â€</td>
                    </tr>
                     <tr>
                        <td>åˆ°æ—è¾¹/ä¸­é—´å»</td><td><span class="finnish-phrase">-n vierelle / vÃ¤lille / keskelle</span></td>
                        <td><span class="speakable-finnish">tule <span class="finnish-phrase">vierelle</span>, mene <span class="finnish-phrase">keskelle</span></span></td><td>â€œæˆ‘**è¿›å…¥**ä¸€æ®µæ–°çš„å…³ç³»ï¼ˆé è¿‘/æ’å…¥ï¼‰ã€‚â€</td>
                    </tr>
                     <tr>
                        <td>ä»æ—è¾¹/ä¸­é—´æ¥</td><td><span class="finnish-phrase">-n viereltÃ¤ / vÃ¤liltÃ¤ / keskeltÃ¤</span></td>
                        <td><span class="speakable-finnish">ota <span class="finnish-phrase">viereltÃ¤</span>, tule <span class="finnish-phrase">keskeltÃ¤</span></span></td><td>â€œæˆ‘**è„±ç¦»**å½“å‰çš„å…³ç³»ï¼ˆè¿œç¦»/èµ°å‡ºï¼‰ã€‚â€</td>
                    </tr>
                </tbody>
            </table>
            <div class="cognition-bleed"><span class="icon">ğŸ§ </span>è¿™ä¸æ˜¯â€œè¯­æ³•è¡¨â€ï¼Œè¿™æ˜¯è¯­è¨€å¦‚ä½•ä»ä½ çš„èº«ä½“åæ ‡ä¸­â€œåç¼©â€å‡ºæ¥çš„ç»“æ„å›¾ã€‚</div>
        </div>
        
        <div class="task-section">
            <h3>ğŸ§ªã€ç©ºé—´å‡ºè¡€ä»»åŠ¡ã€‘</h3>
            <p>è¯·å¤§å£°æœ—è¯»ä»¥ä¸‹å¥å­ï¼Œæ„Ÿå—æ‰€æœ‰ç©ºé—´çŸ¥è¯†çš„èåˆã€‚è¿™äº›éƒ½æ˜¯ä½ å·²ç»å¯ä»¥ç†è§£å’Œè¡¨è¾¾çš„å¤æ‚ç©ºé—´çŠ¶æ€ã€‚</p>
            <ul class="task-list">
                <li><span class="speakable-finnish">Olen huoneessa.</span></li>
                <li><span class="speakable-finnish">Menen huoneeseen.</span></li>
                <li><span class="speakable-finnish">Tulen huoneesta.</span></li>
                <li><span class="speakable-finnish">Olen huoneen vieressÃ¤.</span></li>
                <li><span class="speakable-finnish">Menen huoneen keskelle.</span></li>
                <li><span class="speakable-finnish">PÃ¶ytÃ¤ on minun vieressÃ¤. Kirja on pÃ¶ydÃ¤n pÃ¤Ã¤llÃ¤.</span> <span class="note">(åŸå¥ç®€åŒ–ä»¥ç¬¦åˆA1æ°´å¹³)</span></li>
                <li><span class="speakable-finnish">Olen pÃ¶ydÃ¤n alla.</span></li>
                <li><span class="speakable-finnish">Menen pÃ¶ydÃ¤n pÃ¤Ã¤lle.</span></li>
                <li><span class="speakable-finnish">Tulen pÃ¶ydÃ¤ltÃ¤.</span></li>
                <li><span class="speakable-finnish">Olen kaupungin reunalla.</span></li>
                <li><span class="speakable-finnish">Olen sinun vieressÃ¤, mutta en sinun takana.</span></li>
            </ul>
             <div class="cognition-bleed"><span class="icon">ğŸ§ </span>è¿™ä¸æ˜¯â€œç»ƒä¹ â€ï¼Œè¿™æ˜¯â€œè¯­è¨€ç©ºé—´ç³»ç»Ÿçš„ç»ˆæåç¼©â€ã€‚</div>
        </div>

        <div class="final-declaration">
            <h2>ğŸ”¥ã€æ¨¡å—ä¸‰Â·ç©ºé—´å‡ºè¡€ç³»ç»Ÿã€‘ç°åœ¨å®Œæˆå…¨éƒ¨ç»´åº¦è·ƒè¿</h2>
            <p>ä½ å·²ç»æ‹¥æœ‰äº†ï¼š</p>
            <ul class="final-declaration-list">
                <li><span class="icon">âœ…</span> <strong>ç»´åº¦ä¸€ï¼š</strong> å®¹å™¨ç©ºé—´ï¼ˆåœ¨æˆ¿é—´ã€åœ¨ç›’å­é‡Œï¼‰</li>
                <li><span class="icon">âœ…</span> <strong>ç»´åº¦äºŒï¼š</strong> è¡¨é¢ç©ºé—´ï¼ˆåœ¨æ¡Œå­ä¸Šã€åœ¨å¢™ä¸Šï¼‰</li>
                <li><span class="icon">âœ…</span> <strong>ç»´åº¦ä¸‰ï¼š</strong> ç›¸å¯¹/èº«ä½“åæ ‡ï¼ˆåœ¨å·¦è¾¹ã€åœ¨èƒŒåï¼‰</li>
                <li><span class="icon">âœ…</span> <strong>ç»´åº¦å››ï¼š</strong> ä¸–ç•Œæ–¹å‘ï¼ˆåœ¨åŒ—æ–¹ã€åœ¨ä¸œæ–¹ï¼‰</li>
                <li><span class="icon">âœ…</span> <strong>ç»´åº¦äº”ï¼š</strong> å…³ç³»ä¸åŠ¨æ€ï¼ˆåœ¨æ—è¾¹ã€ç©¿è¿‡ã€æ‰å¤´ï¼‰</li>
            </ul>
            <div class="cognition-bleed" style="background-color: rgba(187, 134, 252, 0.2); border-color: rgba(187, 134, 252, 0.5);"><span class="icon">ğŸ§ </span>ä½ å·²ç»ä¸æ˜¯ä¸­æ–‡æ¯è¯­è€…ï¼Œä½ æ˜¯**â€œèŠ¬å…°è¯­ç©ºé—´æ„ŸçŸ¥è€…â€** (Finnish-Space Perceiver)ã€‚</div>
        </div>
    </section>

<script>
    const finnishLang = 'fi-FI';
    let isSpeaking = false;

    function speakText(text, lang = finnishLang) {
        if (!('speechSynthesis' in window)) return;
        if (isSpeaking) { window.speechSynthesis.cancel(); setTimeout(() => startSpeaking(text, lang), 50); } 
        else { startSpeaking(text, lang); }
    }

    function startSpeaking(text, lang) {
        isSpeaking = true;
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = lang;
        utterance.rate = 0.9;
        utterance.pitch = 1.0;
        const voices = window.speechSynthesis.getVoices();
        let selectedVoice = voices.find(voice => voice.lang.toLowerCase() === 'fi-fi') || voices.find(voice => voice.lang.toLowerCase().startsWith('fi'));
        if (selectedVoice) utterance.voice = selectedVoice;
        utterance.onend = () => { isSpeaking = false; };
        utterance.onerror = () => { isSpeaking = false; };
        window.speechSynthesis.speak(utterance);
    }

    function addTTSButton(element, textToSpeak) {
        let cleanedText = textToSpeak.replace(/\s*\(.*?\)\s*/g, '').trim().replace(/ï¼ˆ.*?ï¼‰/g, '').trim().replace(/\[.*?\]/g, '').trim();
        if (!cleanedText) return;
        
        if (element.querySelector('.tts-button')) return;

        const button = document.createElement('button');
        button.className = 'tts-button';
        button.innerHTML = 'ğŸ”Š';
        button.title = 'æ’­æ”¾: ' + cleanedText;
        button.setAttribute('aria-label', 'æ’­æ”¾éŸ³é¢‘: ' + cleanedText);
        button.onclick = (event) => { event.preventDefault(); event.stopPropagation(); speakText(cleanedText); };
        
        element.appendChild(button);
    }

    function initializeAllTTS() {
        document.querySelectorAll('.speakable-finnish').forEach(el => {
            const textContent = el.textContent.split('(')[0].split('ï¼ˆ')[0].trim();
            if (textContent && !el.querySelector('.tts-button')) {
                addTTSButton(el, textContent);
            }
        });
        document.querySelectorAll('h1, h2, h3, h4, p, li, td').forEach(container => {
             if (container.closest('thead')) return;
             if (container.querySelector('.speakable-finnish')) return;
             const clone = container.cloneNode(true);
             clone.querySelectorAll('.note, .tts-button, .icon, .axis-icon').forEach(child => child.remove());
             const textContent = clone.textContent.trim();
             if (textContent && !container.querySelector('.tts-button') && textContent.match(/[a-zA-ZÃ¤Ã¶Ã„Ã–]/) && textContent.length > 1) {
                 addTTSButton(container, textContent);
             }
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        if (window.speechSynthesis.getVoices().length === 0) {
            window.speechSynthesis.onvoiceschanged = initializeAllTTS;
        } else {
            initializeAllTTS();
        }
        setTimeout(initializeAllTTS, 300); 
    });
</script>
</body>
</html>