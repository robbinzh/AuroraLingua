<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>èŠ¬å…°è¯­æ¨¡å—ä¸‰Â·æœ€ç»ˆç« ï¼šç»¼åˆæŒ‘æˆ˜ä¸ç©ºé—´å®‡å®™è§‚</title>
    <style>
        /* å¤ç”¨å¹¶æ¼”åŒ–ä¹‹å‰çš„CSSï¼Œç¡®ä¿é£æ ¼ç»Ÿä¸€ */
        body { font-family: "Microsoft YaHei", sans-serif; line-height: 1.7; margin: 20px auto; max-width: 900px; padding: 0 20px; color: #333; background-color: #f9f9f9; }
        h1, h2, h3, h4 { color: #2c3e50; }
        h1 { text-align: center; margin-bottom: 35px; font-size: 2.2em; }
        h2 { border-bottom: 2px solid #27ae60; padding-bottom: 12px; margin-top: 45px; font-size: 1.8em; color: #27ae60; } /* Graduation color: Green for Go! */
        h3 { margin-top: 30px; font-size: 1.5em; color: #2ecc71; }
        .final-summary h2 { border-bottom-color: #4a235a; color: #4a235a; } /* Deep purple for final chapter */
        .final-summary h3 { color: #6c3483; }

        .challenge-card, .recap-map-container, .narrative-template, .dialogue-challenge, .final-summary {
            background-color: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; margin-bottom: 30px; box-shadow: 0 4px 10px rgba(0,0,0,0.08);
        }
        .example { border-left: 6px solid #27ae60 !important; }
        .final-summary .example { border-left-color: #4a235a; }
        .finnish-phrase { font-weight: bold; color: #27ae60; font-size: 1.1em; } /* Adjusted size for tables */
        .note { font-size: 0.95em; color: #555; font-style: italic; display: block; margin-top: 4px; }
        .tts-button { background: none; border: none; cursor: pointer; font-size: 1.2em; margin-left: 8px; padding: 0; display: inline-block; vertical-align: middle; color: #27ae60; }
        .tts-button:hover { color: #229954; opacity: 0.8; }
        .final-summary .tts-button { color: #6c3483; }
        .final-summary .finnish-phrase { color: #6c3483; }


        hr { border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0,0,0,0), rgba(39,174,96,0.3), rgba(0,0,0,0)); margin: 40px 0; }
        .action-button { background-color: #2ecc71; color: white; padding: 12px 18px; border: none; border-radius: 5px; cursor: pointer; margin-top:12px; font-size: 1em; transition: background-color 0.2s; }
        .action-button:hover { background-color: #27ae60; }
        
        /* Recap Map Styles */
        .recap-map { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; text-align: center; }
        .dimension-node { padding: 15px; border: 1px dashed #ccc; border-radius: 8px; }
        .dimension-node h4 { margin-top: 0; color: #34495e; border-bottom: 1px solid; padding-bottom: 5px;}
        .dim1 h4 { border-color: #3498db; } .dim1 { background-color: #ecf5fb; }
        .dim2 h4 { border-color: #16a085; } .dim2 { background-color: #e8f6f3; }
        .dim3 h4 { border-color: #d35400; } .dim3 { background-color: #fef5e7; }
        .dim4 h4 { border-color: #8e44ad; } .dim4 { background-color: #f5eef8; }
        .dim5 h4 { border-color: #e67e22; } .dim5 { background-color: #fff3e0; }

        /* Narrative Template Styles */
        .narrative-template ol { list-style-type: none; padding-left: 0; counter-reset: step-counter; }
        .narrative-template li { counter-increment: step-counter; margin-bottom: 20px; padding: 15px; border-left: 5px solid #bdc3c7; background-color:#f8f9f9;}
        .narrative-template li::before { content: counter(step-counter); font-weight: bold; font-size: 1.5em; color: #fff; background-color: #27ae60; border-radius: 50%; width: 30px; height: 30px; display: inline-block; text-align: center; line-height: 30px; margin-right: 15px; }
        
        /* Helsinki Map Styles */
        .helsinki-map-container { display: flex; gap: 20px; flex-wrap: wrap; }
        .helsinki-map { flex: 2; min-width: 300px; }
        .task-list { flex: 1; min-width: 250px; background-color:#f8f9f9; padding:15px; border-radius:5px; }
        .task-list h4 { margin-top:0; }
        .task-list ul { list-style-type: lower-alpha; padding-left: 20px; }

        /* Dialogue Challenge Styles */
        .dialogue-option { display: block; margin: 10px 0; padding: 10px; border: 1px solid #ddd; border-radius: 5px; cursor: pointer; transition: background-color 0.2s; }
        .dialogue-option:hover { background-color: #f0f0f0; }
        .feedback-area { margin-top: 15px; padding: 12px; border-radius: 5px; text-align:center; font-size: 1.1em; min-height: 1.5em; }
        .correct { background-color: #d1f2eb; color: #0c6255; border: 1px solid #a3e4d7; }
        .incorrect { background-color: #fdedec; color: #c0392b; border: 1px solid #f5b7b1; }
        
        /* Universe Map Table Styles */
        .universe-map-table { width: 100%; border-collapse: collapse; margin-top: 20px; background-color: #fdfefe; }
        .universe-map-table th, .universe-map-table td { border: 1px solid #e5e7e9; padding: 12px; text-align: left; vertical-align: middle; }
        .universe-map-table thead th { background-color: #faf3fc; color: #4a235a; }
        .axis-title { font-size: 1.3em; font-weight: bold; color: #6c3483; }
        .axis-icon { font-size: 1.5em; margin-right: 10px; }
    </style>
</head>
<body>

    <section id="final-challenge">
        <h1>ğŸ“ã€æ¨¡å—ä¸‰æ¯•ä¸šæŒ‘æˆ˜ã€‘èµ«å°”è¾›åŸºä¸€æ—¥æ¸¸ï¼šä½ çš„å¯¼èˆªä¸å™äº‹</h1>
        <div class="example">
            <p><span class="speakable-finnish">Onneksi olkoon!</span> (æ­å–œä½ ï¼) ä½ å·²ç»å®Œæˆäº†ç©ºé—´å®šä½å™¨çš„æ‰€æœ‰æ ¸å¿ƒç»´åº¦è®­ç»ƒã€‚ä½ ä¸å†æ˜¯ä¸€ä¸ªè¿·å¤±çš„æ—…è¡Œè€…ï¼Œè€Œæ˜¯ä¸€ä¸ªæ‹¥æœ‰â€œèŠ¬å…°è¯­å†…ç½®GPSâ€çš„æ¢é™©å®¶ï¼</p>
            <p>ç°åœ¨ï¼Œæ˜¯æ—¶å€™å°†æ‰€æœ‰çŸ¥è¯†èä¼šè´¯é€šï¼Œæ¥å—æœ€ç»ˆçš„â€œèŠ¬å…°åŸå¸‚ç”Ÿå­˜æŒ‘æˆ˜â€äº†ã€‚ä½ çš„ä»»åŠ¡æ˜¯ï¼šè§„åˆ’ä¸€æ¬¡èµ«å°”è¾›åŸºä¸€æ—¥æ¸¸ï¼Œå¹¶ç”¨ä½ å­¦åˆ°çš„èŠ¬å…°è¯­ï¼Œæ¸…æ™°åœ°æè¿°å‡ºä½ çš„è¡Œç¨‹ã€‚</p>
        </div>

        <h2>æ­¥éª¤ä¸€ï¼šè£…å¤‡ä½ çš„å¯¼èˆªä»ª - äº”å¤§ç©ºé—´ç»´åº¦å®‡å®™å›é¡¾</h2>
        <p>åœ¨å‡ºå‘å‰ï¼Œè®©æˆ‘ä»¬å¿«é€Ÿå›é¡¾å¹¶æ¿€æ´»ä½ å·²ç»æŒæ¡çš„äº”å¤§ç©ºé—´å®šä½èƒ½åŠ›ã€‚è¿™å¼ â€œè®¤çŸ¥å‡ºè¡€æ€»è·¯å¾„å›¾â€æ˜¯ä½ å®ŒæˆæŒ‘æˆ˜çš„é€ŸæŸ¥è¡¨å’Œä¿¡å¿ƒæ¥æºï¼</p>
        <div class="recap-map-container">
            <div class="recap-map">
                <div class="dimension-node dim1"><h4>ç»´åº¦ä¸€: å®¹å™¨ç©ºé—´</h4><p class="speakable-finnish">MinÃ¤ olen <span class="finnish-phrase">talossa</span>.</p><p class="speakable-finnish">MinÃ¤ menen <span class="finnish-phrase">taloon</span>.</p></div>
                <div class="dimension-node dim2"><h4>ç»´åº¦äºŒ: è¡¨é¢ç©ºé—´</h4><p class="speakable-finnish">Kirja on <span class="finnish-phrase">pÃ¶ydÃ¤llÃ¤</span>.</p><p class="speakable-finnish">Laita kirja <span class="finnish-phrase">pÃ¶ydÃ¤lle</span>.</p></div>
                <div class="dimension-node dim3"><h4>ç»´åº¦ä¸‰: ç›¸å¯¹ç©ºé—´</h4><p class="speakable-finnish">SinÃ¤ olet minun <span class="finnish-phrase">edessÃ¤</span>.</p><p class="speakable-finnish">Kauppa on <span class="finnish-phrase">vasemmalla</span>.</p></div>
                <div class="dimension-node dim4"><h4>ç»´åº¦å››: æ–¹å‘ç©ºé—´</h4><p class="speakable-finnish">Helsinki on <span class="finnish-phrase">etelÃ¤ssÃ¤</span>.</p><p class="speakable-finnish">MinÃ¤ matkustan <span class="finnish-phrase">pohjoiseen</span>.</p></div>
                <div class="dimension-node dim5"><h4>ç»´åº¦äº”: ä½ç½®å…³ç³»</h4><p class="speakable-finnish">Apteekki on aseman <span class="finnish-phrase">vieressÃ¤</span>.</p><p class="speakable-finnish">Puisto on postin <span class="finnish-phrase">vastapÃ¤Ã¤tÃ¤</span>.</p></div>
            </div>
        </div>

        <h2>æ­¥éª¤äºŒï¼šæ ¸å¿ƒä»»åŠ¡ - â€œæˆ‘çš„å¯»å®è·¯çº¿â€è¯­è¨€è¾“å‡º</h2>
        <p>è¿™æ˜¯ä½ çš„æŒ‘æˆ˜æ ¸å¿ƒï¼ä¸‹é¢æ˜¯ä¸€å¼ ç®€åŒ–çš„èµ«å°”è¾›åŸºå¸‚ä¸­å¿ƒåœ°å›¾å’Œä½ çš„ä»»åŠ¡æ¸…å•ã€‚è¯·æ ¹æ®ä»»åŠ¡ï¼Œé˜…è¯»ä¸‹é¢çš„â€œè¡Œç¨‹å™äº‹â€ã€‚</p>
        <div class="challenge-card">
            <div class="helsinki-map-container">
                <div class="helsinki-map">
                    <svg id="helsinki-city-map" width="100%" viewBox="0 0 400 350" style="border:1px solid #ddd; border-radius: 5px; background-color: #ecf5fb;">
                        <rect x="0" y="280" width="400" height="70" fill="#aed6f1"></rect><text x="200" y="315" text-anchor="middle" fill="#2980b9" font-size="14" class="speakable-finnish">Meri (æµ·)</text>
                        <rect x="50" y="160" width="300" height="40" fill="#abebc6"></rect><text x="200" y="185" text-anchor="middle" fill="#229954" font-size="10" class="speakable-finnish">Esplanadin puisto (å…¬å›­)</text>
                        <rect x="50" y="100" width="80" height="40" fill="#f5b041"></rect><text x="90" y="125" text-anchor="middle" fill="white" font-size="8" class="speakable-finnish">Stockmann</text>
                        <rect x="270" y="50" width="80" height="40" fill="#ec7063"></rect><text x="310" y="75" text-anchor="middle" fill="white" font-size="8" class="speakable-finnish">Tuomiokirkko (å¤§æ•™å ‚)</text>
                        <rect x="50" y="220" width="80" height="40" fill="#a569bd"></rect><text x="90" y="245" text-anchor="middle" fill="white" font-size="8" class="speakable-finnish">Kauppatori (ç å¤´å¸‚åœº)</text>
                        <g><circle cx="200" cy="50" r="15" fill="#34495e"></circle><text x="200" y="55" text-anchor="middle" fill="white" font-size="10">ğŸš‚</text><text x="200" y="30" text-anchor="middle" font-size="8" class="speakable-finnish">Rautatieasema (ç«è½¦ç«™)</text></g>
                    </svg>
                </div>
                <div class="task-list">
                    <h4>ğŸ“ <span class="speakable-finnish">Minun TehtÃ¤vÃ¤</span> (æˆ‘çš„ä»»åŠ¡)</h4>
                    <ul>
                        <li><span class="speakable-finnish">SinÃ¤ olet rautatieasemalla.</span> <span class="note">(ä½ ç°åœ¨åœ¨ä¸­å¤®ç«è½¦ç«™ã€‚)</span></li>
                        <li><span class="speakable-finnish">Mene ensin Stockmannille.</span> <span class="note">(å…ˆå»Stockmannå•†åœºã€‚)</span></li>
                        <li><span class="speakable-finnish">Sitten, kÃ¤vele Tuomiokirkon eteen.</span> <span class="note">(ç„¶åï¼Œèµ°åˆ°å¤§æ•™å ‚å‰é¢ã€‚)</span></li>
                        <li><span class="speakable-finnish">Lopuksi, mene Kauppatorille.</span> <span class="note">(æœ€åï¼Œå»ç å¤´å¸‚åœºã€‚)</span></li>
                    </ul>
                </div>
            </div>

            <div class="narrative-template">
                <h4>âœï¸ <span class="speakable-finnish">Minun Suunnitelma</span> (æˆ‘çš„è®¡åˆ’)</h4>
                <p>ä¸‹é¢æ˜¯ä¸€ä¸ªå·²ç»ä¸ºä½ å®Œæˆçš„è®¡åˆ’æè¿°ã€‚è¯·å¤§å£°æœ—è¯»ï¼Œæ„Ÿå—æ‰€æœ‰ç©ºé—´ç»´åº¦çš„çŸ¥è¯†æ˜¯å¦‚ä½•èåˆåœ¨ä¸€èµ·çš„ã€‚</p>
                <ol>
                    <li><span class="speakable-finnish">Ensin, minÃ¤ olen rautatieasemalla. MinÃ¤ menen lÃ¤nteen ja vÃ¤hÃ¤n etelÃ¤Ã¤n Stockmannille.</span> <span class="note">(é¦–å…ˆï¼Œæˆ‘åœ¨ç«è½¦ç«™ã€‚æˆ‘å‘è¥¿è¾¹å’Œå—è¾¹ä¸€ç‚¹å»Stockmannã€‚)</span></li>
                    <li><span class="speakable-finnish">Sitten, minÃ¤ tulen Stockmannilta. MinÃ¤ menen itÃ¤Ã¤n ja kÃ¤velen Esplanadin puiston vieressÃ¤. Tuomiokirkko on puiston pohjoispuolella.</span> <span class="note">(ç„¶åï¼Œæˆ‘ä»Stockmannå‡ºæ¥ã€‚æˆ‘å‘ä¸œèµ°ï¼Œå¹¶æ²¿ç€æ»¨æµ·å…¬å›­æ—è¾¹èµ°ã€‚å¤§æ•™å ‚åœ¨å…¬å›­çš„åŒ—è¾¹ã€‚)</span></li>
                    <li><span class="speakable-finnish">Lopuksi, minÃ¤ menen Tuomiokirkolta etelÃ¤Ã¤n. MinÃ¤ menen Kauppatorille. Se on meren vieressÃ¤.</span> <span class="note">(æœ€åï¼Œæˆ‘ä»å¤§æ•™å ‚å‘å—èµ°ã€‚æˆ‘åˆ°ç å¤´å¸‚åœºå»ã€‚å®ƒåœ¨æµ·çš„æ—è¾¹ã€‚)</span></li>
                    <li><span class="speakable-finnish">TÃ¤mÃ¤ on hieno pÃ¤ivÃ¤!</span> <span class="note">(è¿™æ˜¯ç¾å¥½çš„ä¸€å¤©ï¼)</span></li>
                </ol>
            </div>
        </div>

        <h2>æ­¥éª¤ä¸‰ï¼šå‡çº§ç‰ˆâ€œé—®è·¯æŒ‡è·¯â€æƒ…æ™¯å¯¹è¯</h2>
        <p>ä½ æ­£åœ¨<span class="finnish-phrase speakable-finnish">Tuomiokirkon</span>(å¤§æ•™å ‚)å‰æ‹ç…§ï¼Œä¸€ä¸ªæ¸¸å®¢å‘ä½ é—®è·¯ã€‚ä»–æƒ³å»<span class="finnish-phrase speakable-finnish">Rautatieasemalle</span>(ç«è½¦ç«™)ã€‚è¯·æ ¹æ®åœ°å›¾ï¼Œä»ä¸‹é¢ä¸‰ä¸ªå›ç­”ä¸­ï¼Œé€‰æ‹©ä¸€ä¸ª**è·¯å¾„æœ€åˆç†ã€æè¿°æœ€æ¸…æ™°**çš„é€‰é¡¹ã€‚</p>
        <div class="dialogue-challenge">
            <p><strong>Turisti (æ¸¸å®¢):</strong> <span class="speakable-finnish">Anteeksi, voitko auttaa? MissÃ¤ on rautatieasema?</span></p>
            <div id="dialogue-options">
                <div class="dialogue-option" onclick="checkDialogueAnswer('A', false)"><span class="speakable-finnish">A) Se on etelÃ¤ssÃ¤, Kauppatorin takana.</span> <span class="note">(å®ƒåœ¨å—è¾¹ï¼Œç å¤´å¸‚åœºçš„åé¢ã€‚)</span></div>
                <div class="dialogue-option" onclick="checkDialogueAnswer('B', true)"><span class="speakable-finnish">B) Mene lÃ¤nteen, Esplanadin puiston ohi. Asema on puiston pohjoispuolella.</span> <span class="note">(å‘è¥¿èµ°ï¼Œç»è¿‡æ»¨æµ·å…¬å›­ã€‚è½¦ç«™åœ¨å…¬å›­çš„åŒ—è¾¹ã€‚)</span></div>
                <div class="dialogue-option" onclick="checkDialogueAnswer('C', false)"><span class="speakable-finnish">C) Mene pohjoiseen. Se on hyvin lÃ¤hellÃ¤.</span> <span class="note">(å‘åŒ—èµ°ã€‚å®ƒéå¸¸è¿‘ã€‚)</span></div>
            </div>
            <div id="feedback-area-dialogue" class="feedback-area"></div>
        </div>
    </section>

    <hr style="border-width:2px; border-color:#4a235a;">

    <section class="final-summary">
        <h2>ğŸŒŒã€æœ€ç»ˆç« ã€‘ä½ çš„èŠ¬å…°è¯­ç©ºé—´å®‡å®™è§‚ï¼šäº”å¤§æ„ŸçŸ¥è½´çš„ç»Ÿä¸€</h2>
        <div class="example">
            <p>æ­å–œä½ ï¼Œæ¢é™©å®¶ï¼ä½ å·²ç»ç©¿è¶Šäº†èŠ¬å…°è¯­ç©ºé—´çš„äº”å¤§ç»´åº¦ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬é€€åä¸€æ­¥ï¼Œä»ä¸Šå¸è§†è§’çœ‹çœ‹ä½ æ‰€æ„å»ºçš„è¿™ä¸ªç²¾å¦™å®‡å®™ã€‚ä½ ä¼šå‘ç°ï¼Œæ‰€æœ‰å¤æ‚çš„æ ¼å˜åŒ–ï¼Œæœ€ç»ˆéƒ½åç¼©åœ¨å‡ ä¸ªæ ¸å¿ƒçš„â€œæ„ŸçŸ¥è½´â€ä¸Šã€‚</p>
        </div>
        
        <div class="challenge-card">
            <h3>ã€ç©ºé—´å‡ºè¡€Â·å…¨ç»´åº¦å›¾è°±ã€‘</h3>
            <table class="universe-map-table">
                <thead>
                    <tr>
                        <th>æ„ŸçŸ¥è½´</th>
                        <th>æˆ‘çš„çŠ¶æ€/åŠ¨ä½œ</th>
                        <th>â€œå°¾éŸ³é­”æ³•â€</th>
                        <th>ä½ å·²æŒæ¡çš„ä¾‹å­</th>
                        <th>æˆ‘çš„å†…å¿ƒç‹¬ç™½ (è¯­è¨€æ„ŸçŸ¥æ–¹å¼)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="axis-icon">ğŸ“¦</span><strong class="axis-title">å®¹å™¨è½´</strong></td>
                        <td>åœ¨é‡Œé¢ (é™æ€)</td>
                        <td><span class="finnish-phrase">-ssa/-ssÃ¤</span></td>
                        <td><span class="speakable-finnish">talo<span class="finnish-phrase">ssa</span>, kaupa<span class="finnish-phrase">ssa</span></span></td>
                        <td>â€œæˆ‘è¢«è¿™ä¸ªç©ºé—´**åŒ…è£¹**ç€ã€‚â€</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>å¾€é‡Œèµ° (åŠ¨æ€)</td>
                        <td><span class="finnish-phrase">-seen/-hVn/-Vn</span></td>
                        <td><span class="speakable-finnish">talo<span class="finnish-phrase">on</span>, koulu<span class="finnish-phrase">un</span></span></td>
                        <td>â€œæˆ‘æ­£**è¿›å…¥**è¿™ä¸ªç©ºé—´ã€‚â€</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>ä»é‡Œé¢å‡ºæ¥ (åŠ¨æ€)</td>
                        <td><span class="finnish-phrase">-sta/-stÃ¤</span></td>
                        <td><span class="speakable-finnish">talo<span class="finnish-phrase">sta</span>, lauku<span class="finnish-phrase">sta</span></span></td>
                        <td>â€œæˆ‘ä»è¿™ä¸ªç©ºé—´é‡Œè¢«**é‡Šæ”¾**å‡ºæ¥ã€‚â€</td>
                    </tr>
                    <tr>
                        <td><span class="axis-icon">ğŸ–ï¸</span><strong class="axis-title">è¡¨é¢è½´</strong></td>
                        <td>åœ¨ä¸Šé¢ (é™æ€)</td>
                        <td><span class="finnish-phrase">-lla/-llÃ¤</span></td>
                        <td><span class="speakable-finnish">pÃ¶ydÃ¤<span class="finnish-phrase">llÃ¤</span>, asema<span class="finnish-phrase">lla</span></span></td>
                        <td>â€œæˆ‘æ­£**æ¥è§¦**ç€è¿™ä¸ªè¡¨é¢ã€‚â€</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>åˆ°ä¸Šé¢å» (åŠ¨æ€)</td>
                        <td><span class="finnish-phrase">-lle</span></td>
                        <td><span class="speakable-finnish">pÃ¶ydÃ¤<span class="finnish-phrase">lle</span>, lattia<span class="finnish-phrase">lle</span></span></td>
                        <td>â€œæˆ‘æ­£**ç§»åŠ¨åˆ°**è¿™ä¸ªè¡¨é¢ä¸Šã€‚â€</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>ä»ä¸Šé¢ç¦»å¼€ (åŠ¨æ€)</td>
                        <td><span class="finnish-phrase">-lta/-ltÃ¤</span></td>
                        <td><span class="speakable-finnish">pÃ¶ydÃ¤<span class="finnish-phrase">ltÃ¤</span>, katolta</span></td>
                        <td>â€œæˆ‘æ­£**ç¦»å¼€**è¿™ä¸ªè¡¨é¢ã€‚â€</td>
                    </tr>
                    <tr>
                        <td><span class="axis-icon">ğŸ§­</span><strong class="axis-title">ç›¸å¯¹/æ–¹å‘è½´</strong></td>
                        <td>åœ¨æˆ‘çš„å·¦/å³/å‰</td>
                        <td><span class="finnish-phrase">vasemmalla, oikealla, edessÃ¤...</span></td>
                        <td><span class="speakable-finnish">Minun <span class="finnish-phrase">edessÃ¤</span></span></td>
                        <td>â€œæ–¹å‘ä»**æˆ‘çš„èº«ä½“**å‡ºå‘ã€‚â€</td>
                    </tr>
                     <tr>
                        <td></td>
                        <td>åœ¨åŒ—/å—/ä¸œ/è¥¿</td>
                        <td><span class="finnish-phrase">-ssa, -sta, -Vn</span></td>
                        <td><span class="speakable-finnish">pohjoise<span class="finnish-phrase">ssa</span>, etelÃ¤Ã¤<span class="finnish-phrase">n</span></span></td>
                        <td>â€œæˆ‘å¤„äº**ä¸–ç•Œåæ ‡**çš„æŸä¸ªåŒºåŸŸã€‚â€</td>
                    </tr>
                    <tr>
                        <td><span class="axis-icon">ğŸ”—</span><strong class="axis-title">å…³ç³»è½´</strong></td>
                        <td>åœ¨æ—è¾¹</td>
                        <td><span class="finnish-phrase">vieressÃ¤</span></td>
                        <td><span class="speakable-finnish">aseman <span class="finnish-phrase">vieressÃ¤</span></span></td>
                        <td>â€œæˆ‘**åœé **åœ¨â€˜å®ƒâ€™çš„æ—è¾¹ã€‚â€</td>
                    </tr>
                     <tr>
                        <td></td>
                        <td>åˆ°æ—è¾¹å»</td>
                        <td><span class="finnish-phrase">vierelle</span></td>
                        <td><span class="speakable-finnish">Tule minun <span class="finnish-phrase">vierelle</span>.</span></td>
                        <td>â€œæˆ‘**é è¿‘**â€˜å®ƒâ€™ï¼Œä½†ä¸è¿›å…¥ã€‚â€</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>åœ¨ä¸¤è€…ä¹‹é—´</td>
                        <td><span class="finnish-phrase">vÃ¤lissÃ¤</span></td>
                        <td><span class="speakable-finnish">postin ja kaupan <span class="finnish-phrase">vÃ¤lissÃ¤</span></span></td>
                        <td>â€œæˆ‘å¤„äºä¸¤è€…å½¢æˆçš„**ç¼éš™**ä¸­ã€‚â€</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>åœ¨æ­£ä¸­å¿ƒ</td>
                        <td><span class="finnish-phrase">keskellÃ¤</span></td>
                        <td><span class="speakable-finnish">puiston <span class="finnish-phrase">keskellÃ¤</span></span></td>
                        <td>â€œæˆ‘å¤„äºè¿™ä¸ªåŒºåŸŸçš„**æ ¸å¿ƒ**ã€‚â€</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="example">
            <p>çœ‹ï¼è¿™å°±æ˜¯ä½ æŒæ¡çš„èŠ¬å…°è¯­ç©ºé—´å®‡å®™ã€‚ä½ ä¸å†éœ€è¦æ­»è®°ç¡¬èƒŒ15ä¸ªæ ¼çš„åå­—ï¼Œå› ä¸ºä½ å·²ç»ç†è§£äº†å®ƒä»¬èƒŒåçš„**æ ¸å¿ƒæ„ŸçŸ¥é€»è¾‘**ã€‚ä½ å­¦ä¼šçš„ä¸æ˜¯è§„åˆ™ï¼Œè€Œæ˜¯ä¸€ç§å…¨æ–°çš„ã€ç”¨å£°éŸ³å’Œèº«ä½“å»æ„ŸçŸ¥ä¸–ç•Œçš„æ–¹å¼ã€‚</p>
            <p>ç°åœ¨ï¼Œå¸¦ç€ä½ çš„å†…ç½®GPSï¼Œå»æ¢ç´¢çœŸå®çš„èŠ¬å…°å§ï¼ <span class="speakable-finnish">HyvÃ¤Ã¤ matkaa!</span> (æ—…é€”æ„‰å¿«ï¼)</p>
        </div>
    </section>

<script>
    const finnishLang = 'fi-FI';
    let isSpeaking = false;

    function speakText(text, lang = finnishLang) {
        if (!('speechSynthesis' in window)) return;
        if (isSpeaking) { window.speechSynthesis.cancel(); setTimeout(() => startSpeaking(text, lang), 50); } 
        else { startSpeaking(text, lang); }
    }

    function startSpeaking(text, lang) {
        isSpeaking = true;
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = lang;
        utterance.rate = 0.9;
        utterance.pitch = 1.0;
        const voices = window.speechSynthesis.getVoices();
        let selectedVoice = voices.find(voice => voice.lang.toLowerCase() === 'fi-fi') || voices.find(voice => voice.lang.toLowerCase().startsWith('fi'));
        if (selectedVoice) utterance.voice = selectedVoice;
        utterance.onend = () => { isSpeaking = false; };
        utterance.onerror = () => { isSpeaking = false; };
        window.speechSynthesis.speak(utterance);
    }

    function addTTSButton(element, textToSpeak) {
        let cleanedText = textToSpeak.replace(/\s*\(.*?\)\s*/g, '').trim().replace(/ï¼ˆ.*?ï¼‰/g, '').trim().replace(/\[.*?\]/g, '').trim();
        if (!cleanedText) return;
        
        if (element.querySelector('.tts-button')) return;

        const button = document.createElement('button');
        button.className = 'tts-button';
        button.innerHTML = 'ğŸ”Š';
        button.title = 'æ’­æ”¾: ' + cleanedText;
        button.setAttribute('aria-label', 'æ’­æ”¾éŸ³é¢‘: ' + cleanedText);
        button.onclick = (event) => { event.preventDefault(); event.stopPropagation(); speakText(cleanedText); };
        
        element.appendChild(button);
    }

    function initializeAllTTS() {
        const elementsToMakeSpeakable = document.querySelectorAll('.speakable-finnish');
        elementsToMakeSpeakable.forEach(el => {
            const textContent = el.textContent.split('(')[0].split('ï¼ˆ')[0].trim();
            if (textContent && !el.querySelector('.tts-button')) {
                addTTSButton(el, textContent);
            }
        });

        document.querySelectorAll('h1, h2, h3, h4, p, li, .dialogue-option').forEach(container => {
             if (container.querySelector('.speakable-finnish')) return; // If it has a speakable child, don't add to parent.
             const clone = container.cloneNode(true);
             clone.querySelectorAll('.note, .tts-button, .axis-icon').forEach(child => child.remove());
             const textContent = clone.textContent.trim();
             if (textContent && !container.querySelector('.tts-button') && textContent.match(/[a-zA-ZÃ¤Ã¶Ã„Ã–]/)) {
                 addTTSButton(container, textContent);
             }
        });
    }

    const dialogueFeedbackEl = document.getElementById('feedback-area-dialogue');
    function checkDialogueAnswer(choice, isCorrect) {
        if (!dialogueFeedbackEl) return;
        let feedbackText = '';
        if (isCorrect) {
            feedbackText = `<span class="speakable-finnish">Aivan oikein! TÃ¤mÃ¤ on selkein ja oikea ohje.</span><span class="note">(å®Œå…¨æ­£ç¡®ï¼è¿™æ˜¯æœ€æ¸…æ™°ã€æœ€æ­£ç¡®çš„æŒ‡ç¤ºã€‚)</span>`;
            dialogueFeedbackEl.className = 'feedback-area correct';
        } else {
            feedbackText = `<span class="speakable-finnish">Ei ihan. TÃ¤mÃ¤ ohje on vÃ¤Ã¤rÃ¤ tai epÃ¤selvÃ¤. YritÃ¤ uudelleen!</span><span class="note">(ä¸å¤ªå¯¹ã€‚è¿™ä¸ªæŒ‡ç¤ºæ˜¯é”™è¯¯çš„æˆ–ä¸æ¸…æ¥šçš„ã€‚å†è¯•ä¸€æ¬¡ï¼)</span>`;
            dialogueFeedbackEl.className = 'feedback-area incorrect';
        }
        dialogueFeedbackEl.innerHTML = feedbackText;
        initializeAllTTS();
        speakText(dialogueFeedbackEl.querySelector('.speakable-finnish').textContent.trim());
    }

    document.addEventListener('DOMContentLoaded', () => {
        if (window.speechSynthesis.getVoices().length === 0) {
            window.speechSynthesis.onvoiceschanged = initializeAllTTS;
        } else {
            initializeAllTTS();
        }
        setTimeout(initializeAllTTS, 300); 
    });
</script>
</body>
</html>