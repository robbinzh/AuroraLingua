<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èµ«å°”è¾›åŸºä¸€æ—¥æ¸¸æŒ‘æˆ˜ - Helsinki-pÃ¤ivÃ¤n haaste</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Noto+Sans+SC:wght@400;700&display=swap');

        body {
            font-family: 'Roboto', 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: #e0e0e0;
            line-height: 1.7;
            padding: 20px;
            margin: 0;
        }

        .game-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #0f3460, #2a3a60);
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #16213e;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .header h1 {
            margin: 0;
            font-size: 2.3em;
            color: #8be9fd;
            text-shadow: 0 0 10px #8be9fd;
        }

        .header p {
            font-size: 1.1em;
            color: #c5c6c7;
            opacity: 0.9;
            margin: 10px 0 0 0;
        }

        .day-section {
            display: none;
            background-color: #16213e;
            border: 1px solid #0f3460;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            animation: fadeIn 0.6s ease-in;
        }

        .day-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            text-align: center;
            color: #f9a826;
            font-size: 1.8em;
            margin-bottom: 20px;
            border-bottom: 2px solid #2a3a60;
            padding-bottom: 10px;
        }

        .time-stamp {
            background: #2a3a60;
            color: #8be9fd;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 20px;
        }

        .helsinki-map {
            text-align: center;
            font-size: 3em;
            margin: 20px 0;
            padding: 20px;
            background: rgba(139, 233, 253, 0.1);
            border-radius: 10px;
            line-height: 1.3;
        }

        .story-text {
            font-size: 1.3em;
            line-height: 1.8;
            margin: 20px 0;
            text-align: center;
        }

        .story-text.clickable {
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 15px;
            border-radius: 8px;
        }

        .story-text.clickable:hover {
            background: rgba(249, 168, 38, 0.1);
            transform: translateY(-2px);
        }

        .highlight {
            color: #50fa7b;
            font-weight: bold;
            text-shadow: 0 0 5px #50fa7b;
        }

        .highlight-neg {
            color: #ff5555;
            font-weight: bold;
            text-shadow: 0 0 5px #ff5555;
        }

        .highlight-space {
            color: #8be9fd;
            font-weight: bold;
            text-shadow: 0 0 5px #8be9fd;
        }

        .highlight-reason {
            color: #ff79c6;
            font-weight: bold;
            text-shadow: 0 0 5px #ff79c6;
        }

        .choice-section {
            background: rgba(139, 233, 253, 0.1);
            border-left: 4px solid #8be9fd;
            padding: 25px;
            margin: 25px 0;
            border-radius: 8px;
        }

        .choice-question {
            font-size: 1.2em;
            color: #8be9fd;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }

        .choice-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .choice-btn {
            background: linear-gradient(135deg, #8be9fd, #50fa7b);
            color: #16213e;
            padding: 15px 25px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(139, 233, 253, 0.3);
            flex: 1;
            min-width: 200px;
        }

        .choice-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(139, 233, 253, 0.5);
        }

        .choice-btn:active {
            transform: translateY(-1px);
        }

        .result-box {
            display: none;
            background: rgba(249, 168, 38, 0.1);
            border: 2px solid #f9a826;
            padding: 25px;
            margin: 20px 0;
            border-radius: 12px;
            animation: slideIn 0.5s ease;
        }

        .result-box.show {
            display: block;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .continue-btn {
            background: linear-gradient(135deg, #f9a826, #f57c00);
            color: #16213e;
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(249, 168, 38, 0.3);
        }

        .continue-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(249, 168, 38, 0.5);
        }

        .controls {
            text-align: center;
            margin: 15px 0;
        }

        .tts-btn, .translation-toggle {
            background: #2a3a60;
            color: #f9a826;
            border: 1px solid #f9a826;
            border-radius: 20px;
            padding: 8px 15px;
            cursor: pointer;
            font-size: 0.9em;
            margin: 0 5px;
            transition: all 0.2s ease;
        }

        .tts-btn:hover, .translation-toggle:hover {
            background: #f9a826;
            color: #16213e;
        }

        .translation {
            color: #a7a9be;
            font-style: italic;
            margin-top: 15px;
            padding: 15px;
            background-color: #0f3460;
            border-radius: 8px;
            display: none;
            font-size: 1.1em;
        }

        .status-panel {
            background: #2a3a60;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .budget-display {
            color: #50fa7b;
            font-size: 1.2em;
            font-weight: bold;
        }

        .tasks-display {
            color: #8be9fd;
            font-size: 1.1em;
        }

        .weather-display {
            color: #ff79c6;
            font-size: 1.1em;
        }

        .celebration {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #50fa7b, #28a745);
            color: #16213e;
            border-radius: 15px;
            font-size: 1.3em;
            font-weight: bold;
            margin-top: 20px;
        }

        .progress-indicator {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #2a3a60;
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: #f9a826;
            transform: scale(1.2);
        }

        .progress-dot.completed {
            background: #50fa7b;
        }

        .causal-flow {
            position: relative;
            padding: 10px 0;
        }

        .causal-arrow {
            text-align: center;
            color: #ff79c6;
            font-size: 1.2em;
            margin: 10px 0;
            opacity: 0.8;
        }
    </style>
</head>
<body>

<div class="game-container">
    <div class="header">
        <h1>èµ«å°”è¾›åŸºä¸€æ—¥æ¸¸æŒ‘æˆ˜</h1>
        <p>Helsinki-pÃ¤ivÃ¤n haaste - å¤šåˆ†æ”¯å†³ç­–ç»ƒä¹ </p>
    </div>

    <div class="progress-indicator">
        <div class="progress-dot active" id="dot-0"></div>
        <div class="progress-dot" id="dot-1"></div>
        <div class="progress-dot" id="dot-2"></div>
        <div class="progress-dot" id="dot-3"></div>
        <div class="progress-dot" id="dot-4"></div>
    </div>

    <!-- ç¬¬0é˜¶æ®µï¼šä»»åŠ¡ç®€æŠ¥ -->
    <div id="section-0" class="day-section active">
        <div class="section-title">TehtÃ¤vÃ¤nanto (ä»»åŠ¡ç®€æŠ¥)</div>
        
        <div class="helsinki-map">ğŸ›ï¸â›ªğŸ°ğŸŒŠğŸ›ï¸<br>ğŸ—ºï¸ Helsinki ğŸ‡«ğŸ‡®</div>
        
        <div class="story-text clickable" onclick="speakText(this.textContent)">
            <strong>Minun Helsinki-pÃ¤ivÃ¤ni alkaa!</strong><br>
            TÃ¤nÃ¤Ã¤n minÃ¤ <span class="highlight-reason">haluan</span> viettÃ¤Ã¤ tÃ¤ydellisen pÃ¤ivÃ¤n HelsingissÃ¤.
        </div>
        <div class="controls">
            <button class="tts-btn" onclick="speakText('Minun Helsinki-pÃ¤ivÃ¤ni alkaa! TÃ¤nÃ¤Ã¤n minÃ¤ haluan viettÃ¤Ã¤ tÃ¤ydellisen pÃ¤ivÃ¤n HelsingissÃ¤.')">ğŸ”Š</button>
            <button class="translation-toggle" onclick="toggleTranslation('trans-0-1')">ä¸­æ–‡</button>
        </div>
        <div id="trans-0-1" class="translation">
            æˆ‘çš„èµ«å°”è¾›åŸºä¸€æ—¥å¼€å§‹äº†ï¼<br>
            ä»Šå¤©æˆ‘æƒ³åœ¨èµ«å°”è¾›åŸºåº¦è¿‡å®Œç¾çš„ä¸€å¤©ã€‚
        </div>

        <div class="status-panel">
            <div class="budget-display">ğŸ’° Budjetti: 50â‚¬</div>
            <div class="weather-display">ğŸŒ¤ï¸ SÃ¤Ã¤: Aurinkoista</div>
        </div>

        <div class="story-text">
            <strong>PÃ¤ivÃ¤n tavoitteet (ä»Šæ—¥ç›®æ ‡):</strong><br>
            âœ… KÃ¤y yhdessÃ¤ kuuluisassa paikassa<br>
            âœ… SyÃ¶ perinteistÃ¤ suomalaista ruokaa<br>
            âœ… Osta matkamuisto
        </div>
        <div class="controls">
            <button class="translation-toggle" onclick="toggleTranslation('trans-0-2')">ä¸­æ–‡</button>
        </div>
        <div id="trans-0-2" class="translation">
            å‚è§‚ä¸€ä¸ªè‘—åæ™¯ç‚¹<br>
            åƒä¸€é¡¿ä¼ ç»ŸèŠ¬å…°èœ<br>
            ä¹°ä¸€ä¸ªçºªå¿µå“
        </div>

        <button class="continue-btn" onclick="startAdventure()">Aloita seikkailu! ğŸš€</button>
    </div>

    <!-- ç¬¬1é˜¶æ®µï¼šç¬¬ä¸€ä¸ªå†³ç­– -->
    <div id="section-1" class="day-section">
        <div class="section-title">Aamun valinta (æ—©æ™¨é€‰æ‹©)</div>
        <div class="time-stamp">â° Kello 10:00</div>
        
        <div class="story-text clickable" onclick="speakText(this.textContent)">
            MinÃ¤ <span class="highlight">herÃ¤sin</span> <span class="highlight-space">hotellissa</span> ja <span class="highlight">sÃ¶in</span> aamiaisen. 
            Nyt minÃ¤ <span class="highlight-reason">haluan mennÃ¤</span> johonkin mielenkiintoiseen paikkaan.
        </div>
        <div class="controls">
            <button class="tts-btn" onclick="speakText('MinÃ¤ herÃ¤sin hotellissa ja sÃ¶in aamiaisen. Nyt minÃ¤ haluan mennÃ¤ johonkin mielenkiintoiseen paikkaan.')">ğŸ”Š</button>
            <button class="translation-toggle" onclick="toggleTranslation('trans-1')">ä¸­æ–‡</button>
        </div>
        <div id="trans-1" class="translation">
            æˆ‘åœ¨é…’åº—é†’æ¥ï¼Œåƒäº†æ—©é¤ã€‚ç°åœ¨æˆ‘æƒ³å»ä¸€ä¸ªæœ‰è¶£çš„åœ°æ–¹ã€‚
        </div>

        <div class="choice-section">
            <div class="choice-question">Minulla on kaksi vaihtoehtoa. MitÃ¤ valitsen?</div>
            <div class="choice-buttons">
                <button class="choice-btn" onclick="makeChoice1('church')">
                    â›ª Temppeliaukion kirkko<br>
                    <small>(å²©çŸ³æ•™å ‚)</small>
                </button>
                <button class="choice-btn" onclick="makeChoice1('island')">
                    ğŸï¸ Seurasaaren ulkomuseo<br>
                    <small>(ä¼´ä¾£å²›éœ²å¤©åšç‰©é¦†)</small>
                </button>
            </div>
        </div>

        <div id="result-church" class="result-box">
            <div class="story-text clickable" onclick="speakText(this.textContent)">
                MinÃ¤ <span class="highlight">valitsin</span> Temppeliaukion kirkon! 
                MinÃ¤ <span class="highlight">menin</span> <span class="highlight-space">kirkkoon</span> bussilla. 
                Se <span class="highlight">oli</span> todella kaunis ja ainutlaatuinen. 
                Lippu <span class="highlight">maksoi</span> 5 euroa. <span style="color: #ff5555; font-size: 0.9em;">(-5â‚¬)</span>
            </div>
            <div class="controls">
                <button class="tts-btn" onclick="speakText('MinÃ¤ valitsin Temppeliaukion kirkon! MinÃ¤ menin kirkkoon bussilla. Se oli todella kaunis ja ainutlaatuinen. Lippu maksoi 5 euroa.')">ğŸ”Š</button>
                <button class="translation-toggle" onclick="toggleTranslation('trans-church')">ä¸­æ–‡</button>
            </div>
            <div id="trans-church" class="translation">
                æˆ‘é€‰æ‹©äº†å²©çŸ³æ•™å ‚ï¼æˆ‘åå…¬äº¤è½¦å»äº†æ•™å ‚ã€‚å®ƒçœŸçš„å¾ˆç¾å¾ˆç‹¬ç‰¹ã€‚é—¨ç¥¨èŠ±äº†5æ¬§å…ƒã€‚
            </div>
            <div class="status-panel">
                <div class="budget-display">ğŸ’° JÃ¤ljellÃ¤: 45â‚¬</div>
                <div class="tasks-display">âœ… Kuuluisa paikka âœ…</div>
            </div>
        </div>

        <div id="result-island" class="result-box">
            <div class="story-text clickable" onclick="speakText(this.textContent)">
                MinÃ¤ <span class="highlight">valitsin</span> Seurasaaren! 
                MinÃ¤ <span class="highlight">menin</span> <span class="highlight-space">saarelle</span> lautalla. 
                SisÃ¤Ã¤npÃ¤Ã¤sy <span class="highlight">oli</span> ilmainen! MinÃ¤ <span class="highlight">kÃ¤velin</span> 
                siellÃ¤ kaksi tuntia ja <span class="highlight">nÃ¤in</span> vanhoja puutaloja.
            </div>
            <div class="controls">
                <button class="tts-btn" onclick="speakText('MinÃ¤ valitsin Seurasaaren! MinÃ¤ menin saarelle lautalla. SisÃ¤Ã¤npÃ¤Ã¤sy oli ilmainen! MinÃ¤ kÃ¤velin siellÃ¤ kaksi tuntia ja nÃ¤in vanhoja puutaloja.')">ğŸ”Š</button>
                <button class="translation-toggle" onclick="toggleTranslation('trans-island')">ä¸­æ–‡</button>
            </div>
            <div id="trans-island" class="translation">
                æˆ‘é€‰æ‹©äº†ä¼´ä¾£å²›ï¼æˆ‘åè½®æ¸¡å»äº†å²›ä¸Šã€‚é—¨ç¥¨æ˜¯å…è´¹çš„ï¼æˆ‘åœ¨é‚£é‡Œèµ°äº†ä¸¤ä¸ªå°æ—¶ï¼Œçœ‹åˆ°äº†å¤è€çš„æœ¨æˆ¿å­ã€‚
            </div>
            <div class="status-panel">
                <div class="budget-display">ğŸ’° JÃ¤ljellÃ¤: 50â‚¬</div>
                <div class="tasks-display">âœ… Kuuluisa paikka âœ…</div>
            </div>
        </div>

        <button id="continue-1" class="continue-btn" style="display:none;" onclick="showSection(2)">Jatka pÃ¤ivÃ¤Ã¤... â°</button>
    </div>

    <!-- ç¬¬2é˜¶æ®µï¼šåˆé¤æ—¶é—´ -->
    <div id="section-2" class="day-section">
        <div class="section-title">Lounasaika (åˆé¤æ—¶é—´)</div>
        <div class="time-stamp">â° Kello 13:00</div>
        
        <div class="story-text clickable" onclick="speakText(this.textContent)">
            Nyt minulla on nÃ¤lkÃ¤! MinÃ¤ <span class="highlight-reason">halusin syÃ¶dÃ¤</span> 
            lohikeittoa <span class="highlight-space">Kauppatorilla</span>, 
            joten minÃ¤ <span class="highlight">menin</span> sinne.
        </div>
        <div class="controls">
            <button class="tts-btn" onclick="speakText('Nyt minulla on nÃ¤lkÃ¤! MinÃ¤ halusin syÃ¶dÃ¤ lohikeittoa Kauppatorilla, joten minÃ¤ menin sinne.')">ğŸ”Š</button>
            <button class="translation-toggle" onclick="toggleTranslation('trans-2-1')">ä¸­æ–‡</button>
        </div>
        <div id="trans-2-1" class="translation">
            ç°åœ¨æˆ‘é¥¿äº†ï¼æˆ‘æƒ³åœ¨é›†å¸‚å¹¿åœºå–ä¸‰æ–‡é±¼æ±¤ï¼Œæ‰€ä»¥æˆ‘å»äº†é‚£é‡Œã€‚
        </div>

        <div class="causal-flow">
            <div class="story-text" style="background: rgba(255, 85, 85, 0.1); padding: 20px; border-radius: 10px;">
                <strong>Mutta voi ei!</strong> ğŸš«<br>
                Kaikki kalakojut <span class="highlight">olivat</span> jo <span class="highlight">suljettu</span>, 
                koska oli maanantai. MinÃ¤ <span class="highlight-neg">en siis syÃ¶nyt</span> lohikeittoa.
            </div>
            <div class="controls">
                <button class="tts-btn" onclick="speakText('Mutta voi ei! Kaikki kalakojut olivat jo suljettu, koska oli maanantai. MinÃ¤ en siis syÃ¶nyt lohikeittoa.')">ğŸ”Š</button>
                <button class="translation-toggle" onclick="toggleTranslation('trans-2-2')">ä¸­æ–‡</button>
            </div>
            <div id="trans-2-2" class="translation">
                ä½†æ˜¯å“¦ä¸ï¼æ‰€æœ‰é±¼æ‘Šéƒ½å·²ç»å…³äº†ï¼Œå› ä¸ºæ˜¯å‘¨ä¸€ã€‚æ‰€ä»¥æˆ‘æ²¡å–åˆ°ä¸‰æ–‡é±¼æ±¤ã€‚
            </div>

            <div class="causal-arrow">â¬‡ï¸ SIKSI / å› æ­¤ â¬‡ï¸</div>

            <div class="story-text clickable" onclick="speakText(this.textContent)">
                <span class="highlight-reason">Siksi</span> minÃ¤ <span class="highlight">etsin</span> toisen ravintolan. 
                MinÃ¤ <span class="highlight">lÃ¶ysin</span> pienen ravintolan ja <span class="highlight">sÃ¶in</span> 
                perinteisiÃ¤ lihapullia perunoiden kanssa. Se <span class="highlight">maksoi</span> 15 euroa. 
                <span style="color: #ff5555; font-size: 0.9em;">(-15â‚¬)</span>
            </div>
        </div>
        <div class="controls">
            <button class="tts-btn" onclick="speakText('Siksi minÃ¤ etsin toisen ravintolan. MinÃ¤ lÃ¶ysin pienen ravintolan ja sÃ¶in perinteisiÃ¤ lihapullia perunoiden kanssa. Se maksoi 15 euroa.')">ğŸ”Š</button>
            <button class="translation-toggle" onclick="toggleTranslation('trans-2-3')">ä¸­æ–‡</button>
        </div>
        <div id="trans-2-3" class="translation">
            å› æ­¤æˆ‘æ‰¾äº†å¦ä¸€å®¶é¤å…ã€‚æˆ‘æ‰¾åˆ°äº†ä¸€å®¶å°é¤å…ï¼Œåƒäº†ä¼ ç»Ÿè‚‰ä¸¸é…åœŸè±†ã€‚èŠ±äº†15æ¬§å…ƒã€‚
        </div>

        <div class="status-panel">
            <div class="budget-display" id="budget-after-lunch">ğŸ’° JÃ¤ljellÃ¤: â‚¬</div>
            <div class="tasks-display">âœ… Kuuluisa paikka âœ… | âœ… Suomalainen ruoka âœ…</div>
        </div>

        <button class="continue-btn" onclick="showSection(3)">MitÃ¤ teet lounaan jÃ¤lkeen? ğŸ›ï¸</button>
    </div>

    <!-- ç¬¬3é˜¶æ®µï¼šè´­ç‰©æ—¶é—´ -->
    <div id="section-3" class="day-section">
        <div class="section-title">Ostosaikaa (è´­ç‰©æ—¶é—´)</div>
        <div class="time-stamp">â° Kello 15:00</div>
        
        <div class="story-text clickable" onclick="speakText(this.textContent)">
            Lounaan jÃ¤lkeen minÃ¤ <span class="highlight-reason">halusin ostaa</span> matkamuiston. 
            MinÃ¤ <span class="highlight">kÃ¤velin</span> <span class="highlight-space">keskustassa</span> 
            ja <span class="highlight">lÃ¶ysin</span> pienen souvenir-kaupan.
        </div>
        <div class="controls">
            <button class="tts-btn" onclick="speakText('Lounaan jÃ¤lkeen minÃ¤ halusin ostaa matkamuiston. MinÃ¤ kÃ¤velin keskustassa ja lÃ¶ysin pienen souvenir-kaupan.')">ğŸ”Š</button>
            <button class="translation-toggle" onclick="toggleTranslation('trans-3-1')">ä¸­æ–‡</button>
        </div>
        <div id="trans-3-1" class="translation">
            åˆé¥­åæˆ‘æƒ³ä¹°ä¸ªçºªå¿µå“ã€‚æˆ‘åœ¨å¸‚ä¸­å¿ƒèµ°ï¼Œæ‰¾åˆ°äº†ä¸€å®¶å°çºªå¿µå“åº—ã€‚
        </div>

        <div class="choice-section">
            <div class="choice-question">MitÃ¤ ostan? Minulla on kaksi vaihtoehtoa:</div>
            <div class="choice-buttons">
                <button class="choice-btn" onclick="makeChoice2('mug')">
                    â˜• Muumi-muki<br>
                    <small>20â‚¬ (å§†æ˜é©¬å…‹æ¯)</small>
                </button>
                <button class="choice-btn" onclick="makeChoice2('keychain')">
                    ğŸ”‘ Helsingin avaimenperÃ¤<br>
                    <small>8â‚¬ (èµ«å°”è¾›åŸºé’¥åŒ™æ‰£)</small>
                </button>
            </div>
        </div>

        <div id="result-mug" class="result-box">
            <div class="story-text clickable" onclick="speakText(this.textContent)">
                MinÃ¤ <span class="highlight">ostin</span> Muumi-mukin! Se <span class="highlight">oli</span> 
                vÃ¤hÃ¤n kallis, mutta todella kaunis. Moomin-hahmot ovat suomalaisia! 
                <span style="color: #ff5555; font-size: 0.9em;">(-20â‚¬)</span>
            </div>
            <div class="controls">
                <button class="tts-btn" onclick="speakText('MinÃ¤ ostin Muumi-mukin! Se oli vÃ¤hÃ¤n kallis, mutta todella kaunis. Moomin-hahmot ovat suomalaisia!')">ğŸ”Š</button>
                <button class="translation-toggle" onclick="toggleTranslation('trans-mug')">ä¸­æ–‡</button>
            </div>
            <div id="trans-mug" class="translation">
                æˆ‘ä¹°äº†å§†æ˜é©¬å…‹æ¯ï¼å®ƒæœ‰ç‚¹è´µï¼Œä½†çœŸçš„å¾ˆæ¼‚äº®ã€‚å§†æ˜äººç‰©æ˜¯èŠ¬å…°çš„ï¼
            </div>
        </div>

        <div id="result-keychain" class="result-box">
            <div class="story-text clickable" onclick="speakText(this.textContent)">
                MinÃ¤ <span class="highlight">ostin</span> pienen avaimenperÃ¤n! Se <span class="highlight">oli</span> 
                halpa ja kÃ¤ytÃ¤nnÃ¶llinen. SiinÃ¤ on Helsingin tuomiokirkko. 
                <span style="color: #ff5555; font-size: 0.9em;">(-8â‚¬)</span>
            </div>
            <div class="controls">
                <button class="tts-btn" onclick="speakText('MinÃ¤ ostin pienen avaimenperÃ¤n! Se oli halpa ja kÃ¤ytÃ¤nnÃ¶llinen. SiinÃ¤ on Helsingin tuomiokirkko.')">ğŸ”Š</button>
                <button class="translation-toggle" onclick="toggleTranslation('trans-keychain')">ä¸­æ–‡</button>
            </div>
            <div id="trans-keychain" class="translation">
                æˆ‘ä¹°äº†ä¸€ä¸ªå°é’¥åŒ™æ‰£ï¼å®ƒä¾¿å®œåˆå®ç”¨ã€‚ä¸Šé¢æœ‰èµ«å°”è¾›åŸºå¤§æ•™å ‚ã€‚
            </div>
        </div>

        <button id="continue-3" class="continue-btn" style="display:none;" onclick="showSection(4)">SÃ¤Ã¤ alkaa muuttua... â›ˆï¸</button>
    </div>

    <!-- ç¬¬4é˜¶æ®µï¼šå¤©æ°”å˜åŒ–å’Œç»“å±€ -->
    <div id="section-4" class="day-section">
        <div class="section-title">SÃ¤Ã¤nmuutos ja pÃ¤ivÃ¤n loppu (å¤©æ°”å˜åŒ–å’Œä¸€å¤©çš„ç»“æŸ)</div>
        <div class="time-stamp">â° Kello 17:00</div>
        
        <div class="story-text" style="background: rgba(139, 233, 253, 0.1); padding: 20px; border-radius: 10px;">
            YhtÃ¤kkiÃ¤ taivas <span class="highlight">muuttui</span> harmaaksi ja <span class="highlight">alkoi</span> sataa! â˜”
        </div>
        <div class="controls">
            <button class="tts-btn" onclick="speakText('YhtÃ¤kkiÃ¤ taivas muuttui harmaaksi ja alkoi sataa!')">ğŸ”Š</button>
            <button class="translation-toggle" onclick="toggleTranslation('trans-4-1')">ä¸­æ–‡</button>
        </div>
        <div id="trans-4-1" class="translation">
            çªç„¶å¤©ç©ºå˜ç°äº†ï¼Œå¼€å§‹ä¸‹é›¨ï¼
        </div>

        <div class="causal-flow">
            <div class="story-text clickable" onclick="speakText(this.textContent)">
                Minun alkuperÃ¤inen suunnitelmani <span class="highlight">oli</span> <span class="highlight">mennÃ¤</span> 
                <span class="highlight-space">Suomenlinnaan</span> lautalla, mutta sateen <span class="highlight-reason">takia</span> 
                minÃ¤ <span class="highlight-neg">en mennyt</span> sinne. Harmi!
            </div>
            <div class="controls">
                <button class="tts-btn" onclick="speakText('Minun alkuperÃ¤inen suunnitelmani oli mennÃ¤ Suomenlinnaan lautalla, mutta sateen takia minÃ¤ en mennyt sinne. Harmi!')">ğŸ”Š</button>
                <button class="translation-toggle" onclick="toggleTranslation('trans-4-2')">ä¸­æ–‡</button>
            </div>
            <div id="trans-4-2" class="translation">
                æˆ‘æœ¬æ¥çš„è®¡åˆ’æ˜¯åè½®æ¸¡å»èŠ¬å…°å ¡ï¼Œä½†å› ä¸ºä¸‹é›¨ï¼Œæˆ‘æ²¡å»æˆã€‚çœŸå¯æƒœï¼
            </div>

            <div class="causal-arrow">â¬‡ï¸ SEN SIJAAN / ä½œä¸ºæ›¿ä»£ â¬‡ï¸</div>

            <div class="story-text clickable" onclick="speakText(this.textContent)">
                <span class="highlight-reason">Sen sijaan</span> minÃ¤ <span class="highlight">menin</span> 
                <span class="highlight-space">Kiasma-museoon</span>, koska se <span class="highlight">oli</span> sisÃ¤llÃ¤. 
                SiellÃ¤ minÃ¤ <span class="highlight">katsoin</span> nykyaikataidetta tunti.
            </div>
        </div>
        <div class="controls">
            <button class="tts-btn" onclick="speakText('Sen sijaan minÃ¤ menin Kiasma-museoon, koska se oli sisÃ¤llÃ¤. SiellÃ¤ minÃ¤ katsoin nykyaikataidetta tunti.')">ğŸ”Š</button>
            <button class="translation-toggle" onclick="toggleTranslation('trans-4-3')">ä¸­æ–‡</button>
        </div>
        <div id="trans-4-3" class="translation">
            æˆ‘å»äº†Kiasmaå½“ä»£è‰ºæœ¯é¦†ä½œä¸ºæ›¿ä»£ï¼Œå› ä¸ºå®ƒåœ¨å®¤å†…ã€‚æˆ‘åœ¨é‚£é‡Œçœ‹äº†ä¸€å°æ—¶ç°ä»£è‰ºæœ¯ã€‚
        </div>

        <div class="story-text" style="background: rgba(80, 250, 123, 0.1); padding: 20px; border-radius: 10px;">
            <strong>PÃ¤ivÃ¤ on ohi!</strong> ğŸŒ…<br>
            TÃ¤nÃ¤Ã¤n minÃ¤...
            <div id="daily-summary" style="margin-top: 15px;"></div>
        </div>

        <div class="status-panel">
            <div class="budget-display" id="final-budget">ğŸ’° Lopullinen budjetti: â‚¬</div>
            <div class="tasks-display">âœ… Kaikki tavoitteet saavutettu! âœ…</div>
        </div>

        <div class="celebration">
            ğŸ‰ Onneksi olkoon! ğŸ‰<br>
            Suoritit Helsinki-pÃ¤ivÃ¤n haasteen!<br><br>
            
            <div style="background: rgba(22, 33, 62, 0.3); padding: 20px; border-radius: 10px; margin: 15px 0; text-align: left;">
                <strong>PÃ¤ivÃ¤n tavoitteiden yhteenveto:</strong><br><br>
                <div id="goal-checklist">
                    âœ… KÃ¤vin kuuluisassa paikassa<br>
                    âœ… SÃ¶in perinteistÃ¤ suomalaista ruokaa<br>
                    âœ… Ostin matkamuiston<br>
                    âŒ En mennyt Suomenlinnaan (satoi vettÃ¤)
                </div>
            </div>
            
            ä½ æˆåŠŸå®Œæˆäº†èµ«å°”è¾›åŸºä¸€æ—¥æ¸¸æŒ‘æˆ˜ï¼<br>
            æ•´åˆäº†ï¼šå†³ç­–è¡¨è¾¾ + å› æœå…³ç³» + ç©ºé—´ç§»åŠ¨ + æ—¶é—´å™äº‹ï¼
        </div>

        <button class="continue-btn" onclick="restartGame()">Pelaa uudelleen! ğŸ”„</button>
    </div>

</div>

<script>
// æ¸¸æˆçŠ¶æ€å˜é‡
let currentSection = 0;
let budget = 50;
let choice1 = ""; // "church" æˆ– "island"
let choice2 = ""; // "mug" æˆ– "keychain"

/**
 * TTSè¯­éŸ³æ’­æ”¾åŠŸèƒ½
 * @param {string} text - è¦æ’­æ”¾çš„æ–‡æœ¬
 */
function speakText(text) {
    if (!text || text === '...') return;
    const cleanText = text.replace(/<[^>]*>/g, '').replace(/\s+/g, ' ').trim();
    if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(cleanText);
        utterance.lang = 'fi-FI';
        utterance.rate = 0.85;
        speechSynthesis.speak(utterance);
    } else {
        alert('æŠ±æ­‰ï¼Œæ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åŠŸèƒ½ã€‚');
    }
}

/**
 * åˆ‡æ¢ä¸­æ–‡ç¿»è¯‘æ˜¾ç¤º/éšè—
 * @param {string} elementId - ç¿»è¯‘å…ƒç´ çš„ID
 */
function toggleTranslation(elementId) {
    const element = document.getElementById(elementId);
    element.style.display = (element.style.display === 'none' || element.style.display === '') ? 'block' : 'none';
}

/**
 * æ›´æ–°è¿›åº¦æŒ‡ç¤ºå™¨
 * @param {number} sectionNum - å½“å‰ç« èŠ‚å·
 */
function updateProgress(sectionNum) {
    for (let i = 0; i <= 4; i++) {
        const dot = document.getElementById('dot-' + i);
        if (i < sectionNum) {
            dot.className = 'progress-dot completed';
        } else if (i === sectionNum) {
            dot.className = 'progress-dot active';
        } else {
            dot.className = 'progress-dot';
        }
    }
}

/**
 * æ˜¾ç¤ºæŒ‡å®šç« èŠ‚
 * @param {number} sectionNum - è¦æ˜¾ç¤ºçš„ç« èŠ‚å·
 */
function showSection(sectionNum) {
    // éšè—æ‰€æœ‰ç« èŠ‚
    document.querySelectorAll('.day-section').forEach(section => {
        section.classList.remove('active');
    });
    
    // æ˜¾ç¤ºç›®æ ‡ç« èŠ‚
    const targetSection = document.getElementById('section-' + sectionNum);
    if (targetSection) {
        targetSection.classList.add('active');
        currentSection = sectionNum;
        updateProgress(sectionNum);
        
        // æ»šåŠ¨åˆ°é¡¶éƒ¨
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
}

/**
 * å¼€å§‹å†’é™©æ¸¸æˆ
 */
function startAdventure() {
    showSection(1);
}

/**
 * å¤„ç†ç¬¬ä¸€ä¸ªé€‰æ‹©ï¼ˆæ™¯ç‚¹é€‰æ‹©ï¼‰
 * @param {string} choice - "church" æˆ– "island"
 */
function makeChoice1(choice) {
    choice1 = choice;
    
    // éšè—é€‰æ‹©æŒ‰é’®
    document.querySelector('#section-1 .choice-section').style.display = 'none';
    
    // æ˜¾ç¤ºå¯¹åº”ç»“æœ
    if (choice === 'church') {
        budget = 45;
        document.getElementById('result-church').classList.add('show');
    } else {
        budget = 50;
        document.getElementById('result-island').classList.add('show');
    }
    
    // æ˜¾ç¤ºç»§ç»­æŒ‰é’®
    document.getElementById('continue-1').style.display = 'block';
}

/**
 * å¤„ç†ç¬¬äºŒä¸ªé€‰æ‹©ï¼ˆè´­ç‰©é€‰æ‹©ï¼‰
 * @param {string} choice - "mug" æˆ– "keychain"
 */
function makeChoice2(choice) {
    choice2 = choice;
    
    // éšè—é€‰æ‹©æŒ‰é’®
    document.querySelector('#section-3 .choice-section').style.display = 'none';
    
    // æ˜¾ç¤ºå¯¹åº”ç»“æœå¹¶æ›´æ–°é¢„ç®—
    if (choice === 'mug') {
        budget -= 20;
        document.getElementById('result-mug').classList.add('show');
    } else {
        budget -= 8;
        document.getElementById('result-keychain').classList.add('show');
    }
    
    // æ›´æ–°é¢„ç®—æ˜¾ç¤º
    updateBudgetDisplay();
    
    // æ˜¾ç¤ºç»§ç»­æŒ‰é’®
    document.getElementById('continue-3').style.display = 'block';
}

/**
 * æ›´æ–°é¢„ç®—æ˜¾ç¤º
 */
function updateBudgetDisplay() {
    // åˆé¤åçš„é¢„ç®—
    const lunchBudget = budget + (choice2 === 'mug' ? 20 : 8); // è¿˜åŸè´­ç‰©è´¹ç”¨ï¼Œåªæ˜¾ç¤ºåˆé¤å
    document.getElementById('budget-after-lunch').textContent = `ğŸ’° JÃ¤ljellÃ¤: ${lunchBudget - 15}â‚¬`;
    
    // æœ€ç»ˆé¢„ç®—
    document.getElementById('final-budget').textContent = `ğŸ’° Lopullinen budjetti: ${budget}â‚¬`;
}

/**
 * ç”Ÿæˆæ¯æ—¥æ€»ç»“
 */
function generateDailySummary() {
    const place1 = choice1 === 'church' ? 'Temppeliaukion kirkossa' : 'Seurasaaressa';
    const souvenir = choice2 === 'mug' ? 'Muumi-mukin' : 'avaimenperÃ¤n';
    
    const summary = `
        ... <span class="highlight">kÃ¤vin</span> <span class="highlight-space">${place1}</span>.<br>
        ... <span class="highlight">sÃ¶in</span> lihapullia, mutta <span class="highlight-neg">en syÃ¶nyt</span> lohikeittoa.<br>
        ... <span class="highlight">ostin</span> ${souvenir}.<br>
        ... <span class="highlight-neg">en mennyt</span> Suomenlinnaan, koska <span class="highlight-reason">satoi</span> vettÃ¤.<br>
        ... <span class="highlight">menin</span> <span class="highlight-space">Kiasma-museoon</span> <span class="highlight-reason">sen sijaan</span>.
    `;
    
    document.getElementById('daily-summary').innerHTML = summary;
}

/**
 * é‡å¯æ¸¸æˆ
 */
function restartGame() {
    budget = 50;
    choice1 = "";
    choice2 = "";
    currentSection = 0;
    
    // é‡ç½®æ‰€æœ‰ç»“æœæ¡†
    document.querySelectorAll('.result-box').forEach(box => {
        box.classList.remove('show');
    });
    
    // é‡ç½®æ‰€æœ‰é€‰æ‹©åŒºåŸŸ
    document.querySelectorAll('.choice-section').forEach(section => {
        section.style.display = 'block';
    });
    
    // é‡ç½®ç»§ç»­æŒ‰é’®
    document.querySelectorAll('.continue-btn').forEach(btn => {
        if (btn.id.includes('continue-')) {
            btn.style.display = 'none';
        }
    });
    
    showSection(0);
}

// é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
window.onload = function() {
    updateProgress(0);
    
    // ç›‘å¬ç« èŠ‚4çš„æ˜¾ç¤ºï¼Œç”Ÿæˆæ€»ç»“
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.target.id === 'section-4' && mutation.target.classList.contains('active')) {
                setTimeout(() => {
                    generateDailySummary();
                    updateBudgetDisplay();
                }, 500);
            }
        });
    });
    
    const section4 = document.getElementById('section-4');
    if (section4) {
        observer.observe(section4, { attributes: true, attributeFilter: ['class'] });
    }
};
</script>

</body>
</html> 