<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ëµ´Â∞îËæõÂü∫‰∏ÄÊó•Ê∏∏ÊåëÊàò - Helsinki-p√§iv√§n haaste</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Noto+Sans+SC:wght@400;700&display=swap');

        body {
            font-family: 'Roboto', 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: #e0e0e0;
            line-height: 1.7;
            padding: 20px;
            margin: 0;
        }

        .game-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #0f3460, #2a3a60);
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #16213e;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .header h1 {
            margin: 0;
            font-size: 2.3em;
            color: #8be9fd;
            text-shadow: 0 0 10px #8be9fd;
        }

        .header p {
            font-size: 1.1em;
            color: #c5c6c7;
            opacity: 0.9;
            margin: 10px 0 0 0;
        }

        .day-section {
            display: none;
            background-color: #16213e;
            border: 1px solid #0f3460;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            animation: fadeIn 0.6s ease-in;
        }

        .day-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            text-align: center;
            color: #f9a826;
            font-size: 1.8em;
            margin-bottom: 20px;
            border-bottom: 2px solid #2a3a60;
            padding-bottom: 10px;
        }

        .time-stamp {
            background: #2a3a60;
            color: #8be9fd;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 20px;
        }

        .helsinki-map {
            text-align: center;
            font-size: 3em;
            margin: 20px 0;
            padding: 20px;
            background: rgba(139, 233, 253, 0.1);
            border-radius: 10px;
            line-height: 1.3;
        }

        .story-text {
            font-size: 1.3em;
            line-height: 1.8;
            margin: 20px 0;
            text-align: center;
        }

        .story-text.clickable {
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 15px;
            border-radius: 8px;
        }

        .story-text.clickable:hover {
            background: rgba(249, 168, 38, 0.1);
            transform: translateY(-2px);
        }

        .highlight {
            color: #50fa7b;
            font-weight: bold;
            text-shadow: 0 0 5px #50fa7b;
        }

        .highlight-neg {
            color: #ff5555;
            font-weight: bold;
            text-shadow: 0 0 5px #ff5555;
        }

        .highlight-space {
            color: #8be9fd;
            font-weight: bold;
            text-shadow: 0 0 5px #8be9fd;
        }

        .highlight-reason {
            color: #ff79c6;
            font-weight: bold;
            text-shadow: 0 0 5px #ff79c6;
        }

        .choice-section {
            background: rgba(139, 233, 253, 0.1);
            border-left: 4px solid #8be9fd;
            padding: 25px;
            margin: 25px 0;
            border-radius: 8px;
        }

        .choice-question {
            font-size: 1.2em;
            color: #8be9fd;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }

        .choice-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .choice-btn {
            background: linear-gradient(135deg, #8be9fd, #50fa7b);
            color: #16213e;
            padding: 15px 25px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(139, 233, 253, 0.3);
            flex: 1;
            min-width: 200px;
        }

        .choice-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(139, 233, 253, 0.5);
        }

        .choice-btn:active {
            transform: translateY(-1px);
        }

        .result-box {
            display: none;
            background: rgba(249, 168, 38, 0.1);
            border: 2px solid #f9a826;
            padding: 25px;
            margin: 20px 0;
            border-radius: 12px;
            animation: slideIn 0.5s ease;
        }

        .result-box.show {
            display: block;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .continue-btn {
            background: linear-gradient(135deg, #f9a826, #f57c00);
            color: #16213e;
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(249, 168, 38, 0.3);
        }

        .continue-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(249, 168, 38, 0.5);
        }

        .controls {
            text-align: center;
            margin: 15px 0;
        }

        .tts-btn, .translation-toggle {
            background: #2a3a60;
            color: #f9a826;
            border: 1px solid #f9a826;
            border-radius: 20px;
            padding: 8px 15px;
            cursor: pointer;
            font-size: 0.9em;
            margin: 0 5px;
            transition: all 0.2s ease;
        }

        .tts-btn:hover, .translation-toggle:hover {
            background: #f9a826;
            color: #16213e;
        }

        .translation {
            color: #a7a9be;
            font-style: italic;
            margin-top: 15px;
            padding: 15px;
            background-color: #0f3460;
            border-radius: 8px;
            display: none;
            font-size: 1.1em;
        }

        .status-panel {
            background: #2a3a60;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .budget-display {
            color: #50fa7b;
            font-size: 1.2em;
            font-weight: bold;
        }

        .tasks-display {
            color: #8be9fd;
            font-size: 1.1em;
        }

        .weather-display {
            color: #ff79c6;
            font-size: 1.1em;
        }

        .celebration {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #50fa7b, #28a745);
            color: #16213e;
            border-radius: 15px;
            font-size: 1.3em;
            font-weight: bold;
            margin-top: 20px;
        }

        .progress-indicator {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #2a3a60;
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: #f9a826;
            transform: scale(1.2);
        }

        .progress-dot.completed {
            background: #50fa7b;
        }

        .causal-flow {
            position: relative;
            padding: 10px 0;
        }

        .causal-arrow {
            text-align: center;
            color: #ff79c6;
            font-size: 1.2em;
            margin: 10px 0;
            opacity: 0.8;
        }
    </style>
</head>
<body>

<div class="game-container">
    <div class="header">
        <h1>Ëµ´Â∞îËæõÂü∫‰∏ÄÊó•Ê∏∏ÊåëÊàò</h1>
        <p>Helsinki-p√§iv√§n haaste - Â§öÂàÜÊîØÂÜ≥Á≠ñÁªÉ‰π†</p>
    </div>

    <div class="progress-indicator">
        <div class="progress-dot active" id="dot-0"></div>
        <div class="progress-dot" id="dot-1"></div>
        <div class="progress-dot" id="dot-2"></div>
        <div class="progress-dot" id="dot-3"></div>
        <div class="progress-dot" id="dot-4"></div>
    </div>

    <!-- Á¨¨0Èò∂ÊÆµÔºö‰ªªÂä°ÁÆÄÊä• -->
    <div id="section-0" class="day-section active">
        <div class="section-title">Teht√§v√§nanto (‰ªªÂä°ÁÆÄÊä•)</div>
        
        <div class="helsinki-map">üèõÔ∏è‚õ™üè∞üåäüõçÔ∏è<br>üó∫Ô∏è Helsinki üá´üáÆ</div>
        
        <div class="story-text clickable" onclick="speakText(this.textContent)">
            <strong>Minun Helsinki-p√§iv√§ni alkaa!</strong><br>
            T√§n√§√§n min√§ <span class="highlight-reason">haluan</span> viett√§√§ t√§ydellisen p√§iv√§n Helsingiss√§.
        </div>
        <div class="controls">
            <button class="tts-btn" onclick="speakText('Minun Helsinki-p√§iv√§ni alkaa! T√§n√§√§n min√§ haluan viett√§√§ t√§ydellisen p√§iv√§n Helsingiss√§.')">üîä</button>
            <button class="translation-toggle" onclick="toggleTranslation('trans-0-1')">‰∏≠Êñá</button>
        </div>
        <div id="trans-0-1" class="translation">
            ÊàëÁöÑËµ´Â∞îËæõÂü∫‰∏ÄÊó•ÂºÄÂßã‰∫ÜÔºÅ<br>
            ‰ªäÂ§©ÊàëÊÉ≥Âú®Ëµ´Â∞îËæõÂü∫Â∫¶ËøáÂÆåÁæéÁöÑ‰∏ÄÂ§©„ÄÇ
        </div>

        <div class="status-panel">
            <div class="budget-display">üí∞ Budjetti: 50‚Ç¨</div>
            <div class="weather-display">üå§Ô∏è S√§√§: Aurinkoista</div>
        </div>

        <div class="story-text">
            <strong>P√§iv√§n tavoitteet (‰ªäÊó•ÁõÆÊ†á):</strong><br>
            ‚úÖ K√§y yhdess√§ kuuluisassa paikassa<br>
            ‚úÖ Sy√∂ perinteist√§ suomalaista ruokaa<br>
            ‚úÖ Osta matkamuisto
        </div>
        <div class="controls">
            <button class="translation-toggle" onclick="toggleTranslation('trans-0-2')">‰∏≠Êñá</button>
        </div>
        <div id="trans-0-2" class="translation">
            ÂèÇËßÇ‰∏Ä‰∏™ËëóÂêçÊôØÁÇπ<br>
            ÂêÉ‰∏ÄÈ°ø‰º†ÁªüËä¨ÂÖ∞Ëèú<br>
            ‰π∞‰∏Ä‰∏™Á∫™ÂøµÂìÅ
        </div>

        <button class="continue-btn" onclick="startAdventure()">Aloita seikkailu! üöÄ</button>
    </div>

    <!-- Á¨¨1Èò∂ÊÆµÔºöÁ¨¨‰∏Ä‰∏™ÂÜ≥Á≠ñ -->
    <div id="section-1" class="day-section">
        <div class="section-title">Aamun valinta (Êó©Êô®ÈÄâÊã©)</div>
        <div class="time-stamp">‚è∞ Kello 10:00</div>
        
        <div class="story-text clickable" onclick="speakText(this.textContent)">
            Min√§ <span class="highlight">her√§sin</span> <span class="highlight-space">hotellissa</span> ja <span class="highlight">s√∂in</span> aamiaisen. 
            Nyt min√§ <span class="highlight-reason">haluan menn√§</span> johonkin mielenkiintoiseen paikkaan.
        </div>
        <div class="controls">
            <button class="tts-btn" onclick="speakText('Min√§ her√§sin hotellissa ja s√∂in aamiaisen. Nyt min√§ haluan menn√§ johonkin mielenkiintoiseen paikkaan.')">üîä</button>
            <button class="translation-toggle" onclick="toggleTranslation('trans-1')">‰∏≠Êñá</button>
        </div>
        <div id="trans-1" class="translation">
            ÊàëÂú®ÈÖíÂ∫óÈÜíÊù•ÔºåÂêÉ‰∫ÜÊó©È§ê„ÄÇÁé∞Âú®ÊàëÊÉ≥Âéª‰∏Ä‰∏™ÊúâË∂£ÁöÑÂú∞Êñπ„ÄÇ
        </div>

        <div class="choice-section">
            <div class="choice-question">Minulla on kaksi vaihtoehtoa. Mit√§ valitsen?</div>
            <div class="choice-buttons">
                <button class="choice-btn" onclick="makeChoice1('church')">
                    ‚õ™ Temppeliaukion kirkko<br>
                    <small>(Â≤©Áü≥ÊïôÂ†Ç)</small>
                </button>
                <button class="choice-btn" onclick="makeChoice1('island')">
                    üèùÔ∏è Seurasaaren ulkomuseo<br>
                    <small>(‰º¥‰æ£Â≤õÈú≤Â§©ÂçöÁâ©È¶Ü)</small>
                </button>
            </div>
        </div>

        <div id="result-church" class="result-box">
            <div class="story-text clickable" onclick="speakText(this.textContent)">
                Min√§ <span class="highlight">valitsin</span> Temppeliaukion kirkon! 
                Min√§ <span class="highlight">menin</span> <span class="highlight-space">kirkkoon</span> bussilla. 
                Se <span class="highlight">oli</span> todella kaunis ja ainutlaatuinen. 
                Lippu <span class="highlight">maksoi</span> 5 euroa. <span style="color: #ff5555; font-size: 0.9em;">(-5‚Ç¨)</span>
            </div>
            <div class="controls">
                <button class="tts-btn" onclick="speakText('Min√§ valitsin Temppeliaukion kirkon! Min√§ menin kirkkoon bussilla. Se oli todella kaunis ja ainutlaatuinen. Lippu maksoi 5 euroa.')">üîä</button>
                <button class="translation-toggle" onclick="toggleTranslation('trans-church')">‰∏≠Êñá</button>
            </div>
            <div id="trans-church" class="translation">
                ÊàëÈÄâÊã©‰∫ÜÂ≤©Áü≥ÊïôÂ†ÇÔºÅÊàëÂùêÂÖ¨‰∫§ËΩ¶Âéª‰∫ÜÊïôÂ†Ç„ÄÇÂÆÉÁúüÁöÑÂæàÁæéÂæàÁã¨Áâπ„ÄÇÈó®Á•®Ëä±‰∫Ü5Ê¨ßÂÖÉ„ÄÇ
            </div>
            <div class="status-panel">
                <div class="budget-display">üí∞ J√§ljell√§: 45‚Ç¨</div>
                <div class="tasks-display">‚úÖ Kuuluisa paikka ‚úÖ</div>
            </div>
        </div>

        <div id="result-island" class="result-box">
            <div class="story-text clickable" onclick="speakText(this.textContent)">
                Min√§ <span class="highlight">valitsin</span> Seurasaaren! 
                Min√§ <span class="highlight">menin</span> <span class="highlight-space">saarelle</span> lautalla. 
                Sis√§√§np√§√§sy <span class="highlight">oli</span> ilmainen! Min√§ <span class="highlight">k√§velin</span> 
                siell√§ kaksi tuntia ja <span class="highlight">n√§in</span> vanhoja puutaloja.
            </div>
            <div class="controls">
                <button class="tts-btn" onclick="speakText('Min√§ valitsin Seurasaaren! Min√§ menin saarelle lautalla. Sis√§√§np√§√§sy oli ilmainen! Min√§ k√§velin siell√§ kaksi tuntia ja n√§in vanhoja puutaloja.')">üîä</button>
                <button class="translation-toggle" onclick="toggleTranslation('trans-island')">‰∏≠Êñá</button>
            </div>
            <div id="trans-island" class="translation">
                ÊàëÈÄâÊã©‰∫Ü‰º¥‰æ£Â≤õÔºÅÊàëÂùêËΩÆÊ∏°Âéª‰∫ÜÂ≤õ‰∏ä„ÄÇÈó®Á•®ÊòØÂÖçË¥πÁöÑÔºÅÊàëÂú®ÈÇ£ÈáåËµ∞‰∫Ü‰∏§‰∏™Â∞èÊó∂ÔºåÁúãÂà∞‰∫ÜÂè§ËÄÅÁöÑÊú®ÊàøÂ≠ê„ÄÇ
            </div>
            <div class="status-panel">
                <div class="budget-display">üí∞ J√§ljell√§: 50‚Ç¨</div>
                <div class="tasks-display">‚úÖ Kuuluisa paikka ‚úÖ</div>
            </div>
        </div>

        <button id="continue-1" class="continue-btn" style="display:none;" onclick="showSection(2)">Jatka p√§iv√§√§... ‚è∞</button>
    </div>

    <!-- Á¨¨2Èò∂ÊÆµÔºöÂçàÈ§êÊó∂Èó¥ -->
    <div id="section-2" class="day-section">
        <div class="section-title">Lounasaika (ÂçàÈ§êÊó∂Èó¥)</div>
        <div class="time-stamp">‚è∞ Kello 13:00</div>
        
        <div class="story-text clickable" onclick="speakText(this.textContent)">
            Nyt minulla on n√§lk√§! Min√§ <span class="highlight-reason">halusin sy√∂d√§</span> 
            lohikeittoa <span class="highlight-space">Kauppatorilla</span>, 
            joten min√§ <span class="highlight">menin</span> sinne.
        </div>
        <div class="controls">
            <button class="tts-btn" onclick="speakText('Nyt minulla on n√§lk√§! Min√§ halusin sy√∂d√§ lohikeittoa Kauppatorilla, joten min√§ menin sinne.')">üîä</button>
            <button class="translation-toggle" onclick="toggleTranslation('trans-2-1')">‰∏≠Êñá</button>
        </div>
        <div id="trans-2-1" class="translation">
            Áé∞Âú®ÊàëÈ•ø‰∫ÜÔºÅÊàëÊÉ≥Âú®ÈõÜÂ∏ÇÂπøÂú∫Âñù‰∏âÊñáÈ±ºÊ±§ÔºåÊâÄ‰ª•ÊàëÂéª‰∫ÜÈÇ£Èáå„ÄÇ
        </div>

        <div class="causal-flow">
            <div class="story-text" style="background: rgba(255, 85, 85, 0.1); padding: 20px; border-radius: 10px;">
                <strong>Mutta voi ei!</strong> üö´<br>
                Kaikki kalakojut <span class="highlight">olivat</span> jo <span class="highlight">suljettu</span>, 
                koska oli maanantai. Min√§ <span class="highlight-neg">en siis sy√∂nyt</span> lohikeittoa.
            </div>
            <div class="controls">
                <button class="tts-btn" onclick="speakText('Mutta voi ei! Kaikki kalakojut olivat jo suljettu, koska oli maanantai. Min√§ en siis sy√∂nyt lohikeittoa.')">üîä</button>
                <button class="translation-toggle" onclick="toggleTranslation('trans-2-2')">‰∏≠Êñá</button>
            </div>
            <div id="trans-2-2" class="translation">
                ‰ΩÜÊòØÂì¶‰∏çÔºÅÊâÄÊúâÈ±ºÊëäÈÉΩÂ∑≤ÁªèÂÖ≥‰∫ÜÔºåÂõ†‰∏∫ÊòØÂë®‰∏Ä„ÄÇÊâÄ‰ª•ÊàëÊ≤°ÂñùÂà∞‰∏âÊñáÈ±ºÊ±§„ÄÇ
            </div>

            <div class="causal-arrow">‚¨áÔ∏è SIKSI / Âõ†Ê≠§ ‚¨áÔ∏è</div>

            <div class="story-text clickable" onclick="speakText(this.textContent)">
                <span class="highlight-reason">Siksi</span> min√§ <span class="highlight">etsin</span> toisen ravintolan. 
                Min√§ <span class="highlight">l√∂ysin</span> pienen ravintolan ja <span class="highlight">s√∂in</span> 
                perinteisi√§ lihapullia perunoiden kanssa. Se <span class="highlight">maksoi</span> 15 euroa. 
                <span style="color: #ff5555; font-size: 0.9em;">(-15‚Ç¨)</span>
            </div>
        </div>
        <div class="controls">
            <button class="tts-btn" onclick="speakText('Siksi min√§ etsin toisen ravintolan. Min√§ l√∂ysin pienen ravintolan ja s√∂in perinteisi√§ lihapullia perunoiden kanssa. Se maksoi 15 euroa.')">üîä</button>
            <button class="translation-toggle" onclick="toggleTranslation('trans-2-3')">‰∏≠Êñá</button>
        </div>
        <div id="trans-2-3" class="translation">
            Âõ†Ê≠§ÊàëÊâæ‰∫ÜÂè¶‰∏ÄÂÆ∂È§êÂéÖ„ÄÇÊàëÊâæÂà∞‰∫Ü‰∏ÄÂÆ∂Â∞èÈ§êÂéÖÔºåÂêÉ‰∫Ü‰º†ÁªüËÇâ‰∏∏ÈÖçÂúüË±Ü„ÄÇËä±‰∫Ü15Ê¨ßÂÖÉ„ÄÇ
        </div>

        <div class="status-panel">
            <div class="budget-display" id="budget-after-lunch">üí∞ J√§ljell√§: ‚Ç¨</div>
            <div class="tasks-display">‚úÖ Kuuluisa paikka ‚úÖ | ‚úÖ Suomalainen ruoka ‚úÖ</div>
        </div>

        <button class="continue-btn" onclick="showSection(3)">Mit√§ teet lounaan j√§lkeen? üõçÔ∏è</button>
    </div>

    <!-- Á¨¨3Èò∂ÊÆµÔºöË¥≠Áâ©Êó∂Èó¥ -->
    <div id="section-3" class="day-section">
        <div class="section-title">Ostosaikaa (Ë¥≠Áâ©Êó∂Èó¥)</div>
        <div class="time-stamp">‚è∞ Kello 15:00</div>
        
        <div class="story-text clickable" onclick="speakText(this.textContent)">
            Lounaan j√§lkeen min√§ <span class="highlight-reason">halusin ostaa</span> matkamuiston. 
            Min√§ <span class="highlight">k√§velin</span> <span class="highlight-space">keskustassa</span> 
            ja <span class="highlight">l√∂ysin</span> pienen souvenir-kaupan.
        </div>
        <div class="controls">
            <button class="tts-btn" onclick="speakText('Lounaan j√§lkeen min√§ halusin ostaa matkamuiston. Min√§ k√§velin keskustassa ja l√∂ysin pienen souvenir-kaupan.')">üîä</button>
            <button class="translation-toggle" onclick="toggleTranslation('trans-3-1')">‰∏≠Êñá</button>
        </div>
        <div id="trans-3-1" class="translation">
            ÂçàÈ•≠ÂêéÊàëÊÉ≥‰π∞‰∏™Á∫™ÂøµÂìÅ„ÄÇÊàëÂú®Â∏Ç‰∏≠ÂøÉËµ∞ÔºåÊâæÂà∞‰∫Ü‰∏ÄÂÆ∂Â∞èÁ∫™ÂøµÂìÅÂ∫ó„ÄÇ
        </div>

        <div class="choice-section">
            <div class="choice-question">Mit√§ ostan? Minulla on kaksi vaihtoehtoa:</div>
            <div class="choice-buttons">
                <button class="choice-btn" onclick="makeChoice2('mug')">
                    ‚òï Muumi-muki<br>
                    <small>20‚Ç¨ (ÂßÜÊòéÈ©¨ÂÖãÊùØ)</small>
                </button>
                <button class="choice-btn" onclick="makeChoice2('keychain')">
                    üîë Helsingin avaimenper√§<br>
                    <small>8‚Ç¨ (Ëµ´Â∞îËæõÂü∫Èí•ÂåôÊâ£)</small>
                </button>
            </div>
        </div>

        <div id="result-mug" class="result-box">
            <div class="story-text clickable" onclick="speakText(this.textContent)">
                Min√§ <span class="highlight">ostin</span> Muumi-mukin! Se <span class="highlight">oli</span> 
                v√§h√§n kallis, mutta todella kaunis. Moomin-hahmot ovat suomalaisia! 
                <span style="color: #ff5555; font-size: 0.9em;">(-20‚Ç¨)</span>
            </div>
            <div class="controls">
                <button class="tts-btn" onclick="speakText('Min√§ ostin Muumi-mukin! Se oli v√§h√§n kallis, mutta todella kaunis. Moomin-hahmot ovat suomalaisia!')">üîä</button>
                <button class="translation-toggle" onclick="toggleTranslation('trans-mug')">‰∏≠Êñá</button>
            </div>
            <div id="trans-mug" class="translation">
                Êàë‰π∞‰∫ÜÂßÜÊòéÈ©¨ÂÖãÊùØÔºÅÂÆÉÊúâÁÇπË¥µÔºå‰ΩÜÁúüÁöÑÂæàÊºÇ‰∫Æ„ÄÇÂßÜÊòé‰∫∫Áâ©ÊòØËä¨ÂÖ∞ÁöÑÔºÅ
            </div>
        </div>

        <div id="result-keychain" class="result-box">
            <div class="story-text clickable" onclick="speakText(this.textContent)">
                Min√§ <span class="highlight">ostin</span> pienen avaimenper√§n! Se <span class="highlight">oli</span> 
                halpa ja k√§yt√§nn√∂llinen. Siin√§ on Helsingin tuomiokirkko. 
                <span style="color: #ff5555; font-size: 0.9em;">(-8‚Ç¨)</span>
            </div>
            <div class="controls">
                <button class="tts-btn" onclick="speakText('Min√§ ostin pienen avaimenper√§n! Se oli halpa ja k√§yt√§nn√∂llinen. Siin√§ on Helsingin tuomiokirkko.')">üîä</button>
                <button class="translation-toggle" onclick="toggleTranslation('trans-keychain')">‰∏≠Êñá</button>
            </div>
            <div id="trans-keychain" class="translation">
                Êàë‰π∞‰∫Ü‰∏Ä‰∏™Â∞èÈí•ÂåôÊâ£ÔºÅÂÆÉ‰æøÂÆúÂèàÂÆûÁî®„ÄÇ‰∏äÈù¢ÊúâËµ´Â∞îËæõÂü∫Â§ßÊïôÂ†Ç„ÄÇ
            </div>
        </div>

        <button id="continue-3" class="continue-btn" style="display:none;" onclick="showSection(4)">S√§√§ alkaa muuttua... ‚õàÔ∏è</button>
    </div>

    <!-- Á¨¨4Èò∂ÊÆµÔºöÂ§©Ê∞îÂèòÂåñÂíåÁªìÂ±Ä -->
    <div id="section-4" class="day-section">
        <div class="section-title">S√§√§nmuutos ja p√§iv√§n loppu (Â§©Ê∞îÂèòÂåñÂíå‰∏ÄÂ§©ÁöÑÁªìÊùü)</div>
        <div class="time-stamp">‚è∞ Kello 17:00</div>
        
        <div class="story-text" style="background: rgba(139, 233, 253, 0.1); padding: 20px; border-radius: 10px;">
            Yht√§kki√§ taivas <span class="highlight">muuttui</span> harmaaksi ja <span class="highlight">alkoi</span> sataa! ‚òî
        </div>
        <div class="controls">
            <button class="tts-btn" onclick="speakText('Yht√§kki√§ taivas muuttui harmaaksi ja alkoi sataa!')">üîä</button>
            <button class="translation-toggle" onclick="toggleTranslation('trans-4-1')">‰∏≠Êñá</button>
        </div>
        <div id="trans-4-1" class="translation">
            Á™ÅÁÑ∂Â§©Á©∫ÂèòÁÅ∞‰∫ÜÔºåÂºÄÂßã‰∏ãÈõ®ÔºÅ
        </div>

        <div class="causal-flow">
            <div class="story-text clickable" onclick="speakText(this.textContent)">
                Minun alkuper√§inen suunnitelmani <span class="highlight">oli</span> <span class="highlight">menn√§</span> 
                <span class="highlight-space">Suomenlinnaan</span> lautalla, mutta sateen <span class="highlight-reason">takia</span> 
                min√§ <span class="highlight-neg">en mennyt</span> sinne. Harmi!
            </div>
            <div class="controls">
                <button class="tts-btn" onclick="speakText('Minun alkuper√§inen suunnitelmani oli menn√§ Suomenlinnaan lautalla, mutta sateen takia min√§ en mennyt sinne. Harmi!')">üîä</button>
                <button class="translation-toggle" onclick="toggleTranslation('trans-4-2')">‰∏≠Êñá</button>
            </div>
            <div id="trans-4-2" class="translation">
                ÊàëÊú¨Êù•ÁöÑËÆ°ÂàíÊòØÂùêËΩÆÊ∏°ÂéªËä¨ÂÖ∞Â†°Ôºå‰ΩÜÂõ†‰∏∫‰∏ãÈõ®ÔºåÊàëÊ≤°ÂéªÊàê„ÄÇÁúüÂèØÊÉúÔºÅ
            </div>

            <div class="causal-arrow">‚¨áÔ∏è SEN SIJAAN / ‰Ωú‰∏∫Êõø‰ª£ ‚¨áÔ∏è</div>

            <div class="story-text clickable" onclick="speakText(this.textContent)">
                <span class="highlight-reason">Sen sijaan</span> min√§ <span class="highlight">menin</span> 
                <span class="highlight-space">Kiasma-museoon</span>, koska se <span class="highlight">oli</span> sis√§ll√§. 
                Siell√§ min√§ <span class="highlight">katsoin</span> nykyaikataidetta tunti.
            </div>
        </div>
        <div class="controls">
            <button class="tts-btn" onclick="speakText('Sen sijaan min√§ menin Kiasma-museoon, koska se oli sis√§ll√§. Siell√§ min√§ katsoin nykyaikataidetta tunti.')">üîä</button>
            <button class="translation-toggle" onclick="toggleTranslation('trans-4-3')">‰∏≠Êñá</button>
        </div>
        <div id="trans-4-3" class="translation">
            ÊàëÂéª‰∫ÜKiasmaÂΩì‰ª£Ëâ∫ÊúØÈ¶Ü‰Ωú‰∏∫Êõø‰ª£ÔºåÂõ†‰∏∫ÂÆÉÂú®ÂÆ§ÂÜÖ„ÄÇÊàëÂú®ÈÇ£ÈáåÁúã‰∫Ü‰∏ÄÂ∞èÊó∂Áé∞‰ª£Ëâ∫ÊúØ„ÄÇ
        </div>

        <div class="story-text" style="background: rgba(80, 250, 123, 0.1); padding: 20px; border-radius: 10px;">
            <strong>P√§iv√§ on ohi!</strong> üåÖ<br>
            T√§n√§√§n min√§...
            <div id="daily-summary" style="margin-top: 15px;"></div>
        </div>

        <div class="status-panel">
            <div class="budget-display" id="final-budget">üí∞ Lopullinen budjetti: ‚Ç¨</div>
            <div class="tasks-display">‚úÖ Kaikki tavoitteet saavutettu! ‚úÖ</div>
        </div>

        <div class="celebration">
            üéâ Onneksi olkoon! üéâ<br>
            Suoritit Helsinki-p√§iv√§n haasteen!<br><br>
            
            <div style="background: rgba(22, 33, 62, 0.3); padding: 20px; border-radius: 10px; margin: 15px 0; text-align: left;">
                <strong>P√§iv√§n tavoitteiden yhteenveto:</strong><br><br>
                <div id="goal-checklist">
                    ‚úÖ K√§vin kuuluisassa paikassa<br>
                    ‚úÖ S√∂in perinteist√§ suomalaista ruokaa<br>
                    ‚úÖ Ostin matkamuiston<br>
                    ‚ùå En mennyt Suomenlinnaan (satoi vett√§)
                </div>
            </div>
            
            ‰Ω†ÊàêÂäüÂÆåÊàê‰∫ÜËµ´Â∞îËæõÂü∫‰∏ÄÊó•Ê∏∏ÊåëÊàòÔºÅ<br>
            Êï¥Âêà‰∫ÜÔºöÂÜ≥Á≠ñË°®Ëææ + Âõ†ÊûúÂÖ≥Á≥ª + Á©∫Èó¥ÁßªÂä® + Êó∂Èó¥Âèô‰∫ãÔºÅ
        </div>

        <button class="continue-btn" onclick="restartGame()">Pelaa uudelleen! üîÑ</button>
    </div>

</div>

<script>
// Ê∏∏ÊàèÁä∂ÊÄÅÂèòÈáè
let currentSection = 0;
let budget = 50;
let choice1 = ""; // "church" Êàñ "island"
let choice2 = ""; // "mug" Êàñ "keychain"

/**
 * TTSËØ≠Èü≥Êí≠ÊîæÂäüËÉΩ
 * @param {string} text - Ë¶ÅÊí≠ÊîæÁöÑÊñáÊú¨
 */
function speakText(text) {
    if (!text || text === '...') return;
    const cleanText = text.replace(/<[^>]*>/g, '').replace(/\s+/g, ' ').trim();
    if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(cleanText);
        utterance.lang = 'fi-FI';
        utterance.rate = 0.85;
        speechSynthesis.speak(utterance);
    } else {
        alert('Êä±Ê≠âÔºåÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅËØ≠Èü≥ÂäüËÉΩ„ÄÇ');
    }
}

/**
 * ÂàáÊç¢‰∏≠ÊñáÁøªËØëÊòæÁ§∫/ÈöêËóè
 * @param {string} elementId - ÁøªËØëÂÖÉÁ¥†ÁöÑID
 */
function toggleTranslation(elementId) {
    const element = document.getElementById(elementId);
    element.style.display = (element.style.display === 'none' || element.style.display === '') ? 'block' : 'none';
}

/**
 * Êõ¥Êñ∞ËøõÂ∫¶ÊåáÁ§∫Âô®
 * @param {number} sectionNum - ÂΩìÂâçÁ´†ËäÇÂè∑
 */
function updateProgress(sectionNum) {
    for (let i = 0; i <= 4; i++) {
        const dot = document.getElementById('dot-' + i);
        if (i < sectionNum) {
            dot.className = 'progress-dot completed';
        } else if (i === sectionNum) {
            dot.className = 'progress-dot active';
        } else {
            dot.className = 'progress-dot';
        }
    }
}

/**
 * ÊòæÁ§∫ÊåáÂÆöÁ´†ËäÇ
 * @param {number} sectionNum - Ë¶ÅÊòæÁ§∫ÁöÑÁ´†ËäÇÂè∑
 */
function showSection(sectionNum) {
    // ÈöêËóèÊâÄÊúâÁ´†ËäÇ
    document.querySelectorAll('.day-section').forEach(section => {
        section.classList.remove('active');
    });
    
    // ÊòæÁ§∫ÁõÆÊ†áÁ´†ËäÇ
    const targetSection = document.getElementById('section-' + sectionNum);
    if (targetSection) {
        targetSection.classList.add('active');
        currentSection = sectionNum;
        updateProgress(sectionNum);
        
        // ÊªöÂä®Âà∞È°∂ÈÉ®
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
}

/**
 * ÂºÄÂßãÂÜíÈô©Ê∏∏Êàè
 */
function startAdventure() {
    showSection(1);
}

/**
 * Â§ÑÁêÜÁ¨¨‰∏Ä‰∏™ÈÄâÊã©ÔºàÊôØÁÇπÈÄâÊã©Ôºâ
 * @param {string} choice - "church" Êàñ "island"
 */
function makeChoice1(choice) {
    choice1 = choice;
    
    // ÈöêËóèÈÄâÊã©ÊåâÈíÆ
    document.querySelector('#section-1 .choice-section').style.display = 'none';
    
    // ÊòæÁ§∫ÂØπÂ∫îÁªìÊûú
    if (choice === 'church') {
        budget = 45;
        document.getElementById('result-church').classList.add('show');
    } else {
        budget = 50;
        document.getElementById('result-island').classList.add('show');
    }
    
    // ÊòæÁ§∫ÁªßÁª≠ÊåâÈíÆ
    document.getElementById('continue-1').style.display = 'block';
}

/**
 * Â§ÑÁêÜÁ¨¨‰∫å‰∏™ÈÄâÊã©ÔºàË¥≠Áâ©ÈÄâÊã©Ôºâ
 * @param {string} choice - "mug" Êàñ "keychain"
 */
function makeChoice2(choice) {
    choice2 = choice;
    
    // ÈöêËóèÈÄâÊã©ÊåâÈíÆ
    document.querySelector('#section-3 .choice-section').style.display = 'none';
    
    // ÊòæÁ§∫ÂØπÂ∫îÁªìÊûúÂπ∂Êõ¥Êñ∞È¢ÑÁÆó
    if (choice === 'mug') {
        budget -= 20;
        document.getElementById('result-mug').classList.add('show');
    } else {
        budget -= 8;
        document.getElementById('result-keychain').classList.add('show');
    }
    
    // Êõ¥Êñ∞È¢ÑÁÆóÊòæÁ§∫
    updateBudgetDisplay();
    
    // ÊòæÁ§∫ÁªßÁª≠ÊåâÈíÆ
    document.getElementById('continue-3').style.display = 'block';
}

/**
 * Êõ¥Êñ∞È¢ÑÁÆóÊòæÁ§∫
 */
function updateBudgetDisplay() {
    // ÂçàÈ§êÂêéÁöÑÈ¢ÑÁÆó
    const lunchBudget = budget + (choice2 === 'mug' ? 20 : 8); // ËøòÂéüË¥≠Áâ©Ë¥πÁî®ÔºåÂè™ÊòæÁ§∫ÂçàÈ§êÂêé
    document.getElementById('budget-after-lunch').textContent = `üí∞ J√§ljell√§: ${lunchBudget - 15}‚Ç¨`;
    
    // ÊúÄÁªàÈ¢ÑÁÆó
    document.getElementById('final-budget').textContent = `üí∞ Lopullinen budjetti: ${budget}‚Ç¨`;
}

/**
 * ÁîüÊàêÊØèÊó•ÊÄªÁªì
 */
function generateDailySummary() {
    const place1 = choice1 === 'church' ? 'Temppeliaukion kirkossa' : 'Seurasaaressa';
    const souvenir = choice2 === 'mug' ? 'Muumi-mukin' : 'avaimenper√§n';
    
    const summary = `
        ... <span class="highlight">k√§vin</span> <span class="highlight-space">${place1}</span>.<br>
        ... <span class="highlight">s√∂in</span> lihapullia, mutta <span class="highlight-neg">en sy√∂nyt</span> lohikeittoa.<br>
        ... <span class="highlight">ostin</span> ${souvenir}.<br>
        ... <span class="highlight-neg">en mennyt</span> Suomenlinnaan, koska <span class="highlight-reason">satoi</span> vett√§.<br>
        ... <span class="highlight">menin</span> <span class="highlight-space">Kiasma-museoon</span> <span class="highlight-reason">sen sijaan</span>.
    `;
    
    document.getElementById('daily-summary').innerHTML = summary;
}

/**
 * ÈáçÂêØÊ∏∏Êàè
 */
function restartGame() {
    budget = 50;
    choice1 = "";
    choice2 = "";
    currentSection = 0;
    
    // ÈáçÁΩÆÊâÄÊúâÁªìÊûúÊ°Ü
    document.querySelectorAll('.result-box').forEach(box => {
        box.classList.remove('show');
    });
    
    // ÈáçÁΩÆÊâÄÊúâÈÄâÊã©Âå∫Âüü
    document.querySelectorAll('.choice-section').forEach(section => {
        section.style.display = 'block';
    });
    
    // ÈáçÁΩÆÁªßÁª≠ÊåâÈíÆ
    document.querySelectorAll('.continue-btn').forEach(btn => {
        if (btn.id.includes('continue-')) {
            btn.style.display = 'none';
        }
    });
    
    showSection(0);
}

// È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÁöÑÂàùÂßãÂåñ
window.onload = function() {
    updateProgress(0);
    
    // ÁõëÂê¨Á´†ËäÇ4ÁöÑÊòæÁ§∫ÔºåÁîüÊàêÊÄªÁªì
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.target.id === 'section-4' && mutation.target.classList.contains('active')) {
                setTimeout(() => {
                    generateDailySummary();
                    updateBudgetDisplay();
                }, 500);
            }
        });
    });
    
    const section4 = document.getElementById('section-4');
    if (section4) {
        observer.observe(section4, { attributes: true, attributeFilter: ['class'] });
    }
};
</script>

</body>
</html> 