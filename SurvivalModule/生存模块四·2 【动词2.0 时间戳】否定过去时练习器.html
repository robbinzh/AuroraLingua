<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡å— 4.1ï¼šå¦å®šè¿‡å»æ—¶ - "äº‹ä»¶æ’¤é”€æŒ‡ä»¤"</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
            line-height: 1.6;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(108,92,231,0.3);
        }

        .header h1 {
            margin: 0;
            font-size: 2.2em;
            margin-bottom: 10px;
        }

        .header p {
            margin: 0;
            font-size: 1.1em;
            opacity: 0.9;
        }

        .module {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            margin: 25px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 5px solid #6c5ce7;
        }

        .module h2 {
            color: #6c5ce7;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
            margin-top: 0;
        }

        .instructions {
            background-color: #e8f4f8;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            border-left: 4px solid #17a2b8;
        }

        /* ä¸‰æ å¯¹æ¯”ç•Œé¢ */
        .parallel-universe-container {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }

        .universe-column {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 2px solid #dee2e6;
            transition: all 0.3s ease;
        }

        .universe-column:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .universe-title {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 15px;
            padding: 8px 15px;
            border-radius: 20px;
            color: white;
        }

        .present-positive .universe-title {
            background: linear-gradient(135deg, #28a745, #20c997);
        }

        .present-negative .universe-title {
            background: linear-gradient(135deg, #ffc107, #fd7e14);
        }

        .past-negative .universe-title {
            background: linear-gradient(135deg, #dc3545, #e83e8c);
        }

        .sentence-display {
            font-size: 1.4em;
            font-weight: bold;
            margin: 20px 0;
            padding: 15px;
            background-color: white;
            border-radius: 8px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed #dee2e6;
        }

        .highlight {
            background-color: #fff3cd;
            padding: 2px 6px;
            border-radius: 4px;
            border: 2px solid #ffeaa7;
            font-weight: bold;
        }

        .highlight-negative {
            background-color: #f8d7da;
            padding: 2px 6px;
            border-radius: 4px;
            border: 2px solid #f5c6cb;
            font-weight: bold;
            color: #721c24;
        }

        .translation {
            font-style: italic;
            color: #6c757d;
            margin-top: 10px;
            display: none;
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
        }

        .button {
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            margin: 10px 5px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(108,92,231,0.3);
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(108,92,231,0.4);
        }

        .tts-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            margin: 5px;
            transition: all 0.3s ease;
        }

        .translation-toggle {
            background: linear-gradient(135deg, #17a2b8, #20c997);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            margin: 5px;
            transition: all 0.3s ease;
        }

        @media (max-width: 1024px) {
            .parallel-universe-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .sentence-display {
                font-size: 1.2em;
                word-break: break-word;
                overflow-wrap: break-word;
            }
            
            .universe-column {
                min-width: 0; /* é˜²æ­¢flex itemæº¢å‡º */
            }
        }

        @media (max-width: 768px) {
            .sentence-display {
                font-size: 1.1em;
                padding: 12px;
            }
            
            .universe-title {
                font-size: 1em;
                padding: 6px 12px;
            }
        }

        /* é€šç”¨é˜²ç ´æ¡†æ ·å¼ */
        .sentence-display {
            word-break: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
        }

        .parallel-universe-container {
            overflow-x: auto;
        }

        .universe-column {
            min-width: 280px; /* ç¡®ä¿æœ€å°å®½åº¦ */
            flex-shrink: 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ”„ æ¨¡å— 4.1ï¼šå¦å®šè¿‡å»æ—¶</h1>
        <p>"äº‹ä»¶æ’¤é”€æŒ‡ä»¤" - å­¦ä¼šå¯¹è¿‡å»è¯´"ä¸"</p>
    </div>

    <div class="module">
        <h2>å¹³è¡Œå®‡å®™è§‚å¯Ÿå™¨ - "ä¸‰æ æ—¶é—´ç©¿æ¢­æœº"</h2>
        <p class="instructions">
            <strong>è®¤çŸ¥ä»»åŠ¡ï¼š</strong>è§‚å¯Ÿä»"ç°åœ¨æ²¡åš"åˆ°"æ˜¨å¤©æ²¡åš"ï¼ŒèŠ¬å…°è¯­åŠ¨è¯å‘ç”Ÿäº†ä»€ä¹ˆç¥å¥‡çš„å˜åŒ–ï¼Ÿ<br>
            <strong>æ“ä½œæŒ‡å—ï¼š</strong>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ç”Ÿæˆæ–°çš„å¯¹æ¯”å¥ç»„ï¼Œä¸“æ³¨è§‚å¯Ÿç¬¬äºŒæ å’Œç¬¬ä¸‰æ çš„å·®å¼‚ï¼
        </p>

        <div class="parallel-universe-container">
            <!-- ç¬¬ä¸€æ ï¼šç°åœ¨æ—¶è‚¯å®š -->
            <div class="universe-column present-positive">
                <div class="universe-title">NYT (KyllÃ¤)<br>ç°åœ¨ãƒ»è‚¯å®š</div>
                <div class="sentence-display" id="present-positive-sentence">
                    ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹è§‚å¯Ÿ
                </div>
                <button class="tts-btn" onclick="speakText(document.getElementById('present-positive-sentence').textContent)">ğŸ”Š</button>
                <button class="translation-toggle" onclick="toggleTranslation('present-positive-translation')">ä¸­æ–‡</button>
                <div id="present-positive-translation" class="translation"></div>
            </div>

            <!-- ç¬¬äºŒæ ï¼šç°åœ¨æ—¶å¦å®š -->
            <div class="universe-column present-negative">
                <div class="universe-title">NYT (Ei)<br>ç°åœ¨ãƒ»å¦å®š</div>
                <div class="sentence-display" id="present-negative-sentence">
                    ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹è§‚å¯Ÿ
                </div>
                <button class="tts-btn" onclick="speakText(document.getElementById('present-negative-sentence').textContent)">ğŸ”Š</button>
                <button class="translation-toggle" onclick="toggleTranslation('present-negative-translation')">ä¸­æ–‡</button>
                <div id="present-negative-translation" class="translation"></div>
            </div>

            <!-- ç¬¬ä¸‰æ ï¼šè¿‡å»æ—¶å¦å®š -->
            <div class="universe-column past-negative">
                <div class="universe-title">EILEN (Ei)<br>è¿‡å»ãƒ»å¦å®š</div>
                <div class="sentence-display" id="past-negative-sentence">
                    ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹è§‚å¯Ÿ
                </div>
                <button class="tts-btn" onclick="speakText(document.getElementById('past-negative-sentence').textContent)">ğŸ”Š</button>
                <button class="translation-toggle" onclick="toggleTranslation('past-negative-translation')">ä¸­æ–‡</button>
                <div id="past-negative-translation" class="translation"></div>
            </div>
        </div>

        <div style="text-align: center;">
            <button class="button" onclick="runParallelUniverse()">ğŸ”„ ç”Ÿæˆæ–°çš„å¹³è¡Œå®‡å®™å¯¹æ¯”</button>
        </div>
    </div>

    <div class="module" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-left: 5px solid #5a67d8;">
        <h2 style="color: white; border-bottom: 2px solid rgba(255,255,255,0.3);">ğŸ§  è®¤çŸ¥å‡åï¼šèŠ¬å…°è¯­çš„"äº‹ä»¶æ’¤é”€æŒ‡ä»¤"</h2>
        
        <div style="background-color: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin: 15px 0; border: 2px dashed rgba(255,255,255,0.3);">
            <div style="font-family: 'Courier New', monospace; font-size: 1.3em; font-weight: bold; text-align: center; color: #fff3cd;">
                KIELTOSANA (en/et/ei...) + VERBI (-nut/-nytç»“å°¾)
            </div>
        </div>

        <p><strong>æ ¸å¿ƒåŸç†ï¼š</strong></p>
        <ul>
            <li><strong>æ­¥éª¤1ï¼š</strong>å…ˆå‘å‡ºå¦å®šå‘½ä»¤ (<code>en</code>, <code>et</code>, <code>ei</code>...)</li>
            <li><strong>æ­¥éª¤2ï¼š</strong>å°†åŠ¨è¯è½¬æ¢ä¸º"å·²å‘ç”Ÿ"å½¢æ€ï¼Œå³ä»¥ <code>-nut</code> æˆ– <code>-nyt</code> ç»“å°¾</li>
            <li><strong>å…³é”®æ´å¯Ÿï¼š</strong><code>-nut/-nyt</code> å·²ç»åŒ…å«äº†"è¿‡å»"çš„ä¿¡æ¯ï¼Œæ‰€ä»¥ä¸å†éœ€è¦è¿‡å»æ—¶çš„ <code>-i-</code> æ—¶é—´æˆ³ï¼</li>
        </ul>

        <p><strong>å˜ä½è§„å¾‹ï¼š</strong></p>
        <ul>
            <li><code>lukea</code> (è¯») â†’ <code>lukenut</code> (å·²ç»è¯»è¿‡)</li>
            <li><code>syÃ¶dÃ¤</code> (åƒ) â†’ <code>syÃ¶nyt</code> (å·²ç»åƒè¿‡)</li>
            <li><code>ostaa</code> (ä¹°) â†’ <code>ostanut</code> (å·²ç»ä¹°è¿‡)</li>
        </ul>
    </div>

    <div class="module" style="background-color: #e3f2fd; border-left: 4px solid #2196f3;">
        <h3>ğŸ¯ å¾®å‹éªŒè¯ç»ƒä¹ </h3>
        <div style="font-size: 1.1em; margin-bottom: 15px; font-weight: bold;">
            ä»»åŠ¡ï¼šä¸ºä»¥ä¸‹è‚¯å®šè¿‡å»æ—¶å¥å­åˆ›å»º"æ’¤é”€æŒ‡ä»¤"
        </div>
        
        <div id="practice-container">
            <div style="background-color: #f0f4f8; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 3px solid #28a745;">
                <strong>ç»™å®šï¼š</strong><span id="practice-given-sentence">ç‚¹å‡»ç”Ÿæˆç»ƒä¹ </span>
                <button class="tts-btn" onclick="speakText(document.getElementById('practice-given-sentence').textContent)" style="margin-left: 10px;">ğŸ”Š</button>
                <button class="translation-toggle" onclick="toggleTranslation('practice-given-translation')" style="margin-left: 5px;">ä¸­æ–‡</button>
                <div id="practice-given-translation" class="translation"></div>
            </div>
            <div id="practice-answer" style="background-color: #fff3e0; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 3px solid #ff9800; display: none;">
                <strong>ç­”æ¡ˆï¼š</strong><span id="practice-answer-sentence"></span>
                <button class="tts-btn" onclick="speakText(document.getElementById('practice-answer-sentence').textContent)" style="margin-left: 10px;">ğŸ”Š</button>
                <button class="translation-toggle" onclick="toggleTranslation('practice-answer-translation')" style="margin-left: 5px;">ä¸­æ–‡</button>
                <div id="practice-answer-translation" class="translation"></div>
            </div>
        </div>

        <button class="button" onclick="generatePractice()">ğŸ² ç”Ÿæˆæ–°ç»ƒä¹ </button>
        <button class="translation-toggle" onclick="togglePracticeAnswer()">æ˜¾ç¤ºç­”æ¡ˆ</button>
    </div>

    <!-- ========================================================== -->
    <!-- æœ€ç»ˆæ¨¡å—ï¼šç³»ç»Ÿæ•´åˆ - "çœŸå®æ€§æ ¸æŸ¥æ¨¡æ‹Ÿå™¨" -->
    <!-- ========================================================== -->
    <div class="module" style="border-left: 5px solid #fd7e14; background: linear-gradient(135deg, #ff7675, #fdcb6e); color: white;">
        <h2 style="color: white; border-bottom: 2px solid rgba(255,255,255,0.3);">ğŸ” ç³»ç»Ÿæ•´åˆï¼šçœŸå®æ€§æ ¸æŸ¥æ¨¡æ‹Ÿå™¨ (Aitous-Tarkistin)</h2>
        <p class="instructions" style="background-color: rgba(255,255,255,0.1); border-left: 4px solid rgba(255,255,255,0.5);">
            <strong>è®¤çŸ¥å†²å‡»ä»»åŠ¡ï¼š</strong>ä½ æ˜¯ä¸€ä¸ªäº‹å®æ ¸æŸ¥å‘˜ã€‚ç³»ç»Ÿä¼šå¿«é€Ÿå‘ˆç°ä¸€äº›å…³äº"æ˜¨å¤©"çš„é™ˆè¿°ï¼Œæœ‰äº›æ˜¯çœŸçš„(âœ…)ï¼Œæœ‰äº›æ˜¯å‡çš„(âŒ)ã€‚ä½ çš„ä»»åŠ¡æ˜¯å¿«é€Ÿåˆ¤æ–­ï¼Œå¹¶å¤§å£°è¯»å‡ºã€æ­£ç¡®çš„ã€‘èŠ¬å…°è¯­å¥å­ï¼
        </p>

        <div id="fact-checker-container" style="text-align: center; background-color: rgba(255,255,255,0.9); color: #333; padding: 30px; border-radius: 10px; border: 2px dashed rgba(255,255,255,0.7); margin: 20px 0;">
            <div style="font-size: 1.2em; margin-bottom: 15px; font-weight: bold;">ç³»ç»Ÿé™ˆè¿°:</div>
            <div style="margin-bottom: 20px;">
                <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                    <div id="fact-checker-statement" style="font-size: 1.5em; background-color: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 3px solid #007bff; flex: 1;">
                        ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼Œå¼€å§‹æ ¸æŸ¥...
                    </div>
                    <button class="tts-btn" onclick="speakText(document.getElementById('fact-checker-statement').textContent)" id="statement-tts" style="display: none;">ğŸ”Š</button>
                    <button class="translation-toggle" onclick="toggleTranslation('statement-translation')" id="statement-translation-btn" style="display: none;">ä¸­æ–‡</button>
                </div>
                <div id="statement-translation" class="translation" style="margin-top: 10px;"></div>
            </div>
            <div style="font-size: 1.2em; margin-bottom: 10px; font-weight: bold;">çœŸå®æƒ…å†µ:</div>
            <div id="fact-checker-truth-value" style="font-size: 3em; margin-bottom: 20px; font-weight: bold;">
                ...
            </div>
            <div id="fact-checker-correct-sentence" style="background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; padding: 15px; border-radius: 8px; font-size: 1.3em; font-weight: bold; display: none; margin-top: 15px;">
                <!-- æ­£ç¡®ç­”æ¡ˆå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 20px;">
            <button class="button" onclick="runFactChecker()">ğŸ” ç”Ÿæˆæ–°é™ˆè¿°</button>
            <button class="translation-toggle" onclick="toggleFactCheckerAnswer()">æ˜¾ç¤ºæ­£ç¡®å¥å­</button>
            <button class="tts-btn" onclick="speakCorrectSentence()" id="fact-checker-tts" style="display: none;">ğŸ”Š å¬æ­£ç¡®å¥å­</button>
        </div>
    </div>

    <script>
        // æ•°æ®å±‚
        const negationData = [
            {
                presentPositive: "MinÃ¤ <span class='highlight'>luen</span> kirjaa.",
                presentNegative: "MinÃ¤ <span class='highlight-negative'>en lue</span> kirjaa.",
                pastNegative: "MinÃ¤ <span class='highlight-negative'>en lukenut</span> kirjaa.",
                translations: {
                    presentPositive: "æˆ‘æ­£åœ¨è¯»ä¹¦ã€‚",
                    presentNegative: "æˆ‘ä¸è¯»ä¹¦/æ²¡åœ¨è¯»ä¹¦ã€‚",
                    pastNegative: "æˆ‘æ˜¨å¤©æ²¡è¯»è¿‡ä¹¦ã€‚"
                }
            },
            {
                presentPositive: "HÃ¤n <span class='highlight'>syÃ¶</span> omenaa.",
                presentNegative: "HÃ¤n <span class='highlight-negative'>ei syÃ¶</span> omenaa.",
                pastNegative: "HÃ¤n <span class='highlight-negative'>ei syÃ¶nyt</span> omenaa.",
                translations: {
                    presentPositive: "ä»–/å¥¹æ­£åœ¨åƒè‹¹æœã€‚",
                    presentNegative: "ä»–/å¥¹ä¸åƒè‹¹æœã€‚",
                    pastNegative: "ä»–/å¥¹æ˜¨å¤©æ²¡åƒè‹¹æœã€‚"
                }
            },
            {
                presentPositive: "Me <span class='highlight'>ostamme</span> autoa.",
                presentNegative: "Me <span class='highlight-negative'>emme osta</span> autoa.",
                pastNegative: "Me <span class='highlight-negative'>emme ostaneet</span> autoa.",
                translations: {
                    presentPositive: "æˆ‘ä»¬æ­£åœ¨ä¹°è½¦ã€‚",
                    presentNegative: "æˆ‘ä»¬ä¸ä¹°è½¦ã€‚",
                    pastNegative: "æˆ‘ä»¬æ˜¨å¤©æ²¡ä¹°è½¦ã€‚"
                }
            },
            {
                presentPositive: "Te <span class='highlight'>juotte</span> kahvia.",
                presentNegative: "Te <span class='highlight-negative'>ette juo</span> kahvia.",
                pastNegative: "Te <span class='highlight-negative'>ette juoneet</span> kahvia.",
                translations: {
                    presentPositive: "ä½ ä»¬æ­£åœ¨å–å’–å•¡ã€‚",
                    presentNegative: "ä½ ä»¬ä¸å–å’–å•¡ã€‚",
                    pastNegative: "ä½ ä»¬æ˜¨å¤©æ²¡å–å’–å•¡ã€‚"
                }
            },
            {
                presentPositive: "He <span class='highlight'>kirjoittavat</span> kirjettÃ¤.",
                presentNegative: "He <span class='highlight-negative'>eivÃ¤t kirjoita</span> kirjettÃ¤.",
                pastNegative: "He <span class='highlight-negative'>eivÃ¤t kirjoittaneet</span> kirjettÃ¤.",
                translations: {
                    presentPositive: "ä»–ä»¬æ­£åœ¨å†™ä¿¡ã€‚",
                    presentNegative: "ä»–ä»¬ä¸å†™ä¿¡ã€‚",
                    pastNegative: "ä»–ä»¬æ˜¨å¤©æ²¡å†™ä¿¡ã€‚"
                }
            },
            {
                presentPositive: "SinÃ¤ <span class='highlight'>kuuntelet</span> musiikkia.",
                presentNegative: "SinÃ¤ <span class='highlight-negative'>et kuuntele</span> musiikkia.",
                pastNegative: "SinÃ¤ <span class='highlight-negative'>et kuunnellut</span> musiikkia.",
                translations: {
                    presentPositive: "ä½ æ­£åœ¨å¬éŸ³ä¹ã€‚",
                    presentNegative: "ä½ ä¸å¬éŸ³ä¹ã€‚",
                    pastNegative: "ä½ æ˜¨å¤©æ²¡å¬éŸ³ä¹ã€‚"
                }
            }
        ];

        // ç»ƒä¹ ç”¨çš„æ•°æ®
        const practiceData = [
            {
                given: "HÃ¤n osti auton.",
                answer: "HÃ¤n ei ostanut autoa.",
                translation: "ä»–/å¥¹æ²¡ä¹°è½¦ã€‚"
            },
            {
                given: "Me sÃ¶imme pizzan.",
                answer: "Me emme syÃ¶neet pizzaa.",
                translation: "æˆ‘ä»¬æ²¡åƒæ¯”è¨ã€‚"
            },
            {
                given: "SinÃ¤ luit kirjan.",
                answer: "SinÃ¤ et lukenut kirjaa.",
                translation: "ä½ æ²¡è¯»ä¹¦ã€‚"
            },
            {
                given: "He kuuntelivat musiikkia.",
                answer: "He eivÃ¤t kuunnelleet musiikkia.",
                translation: "ä»–ä»¬æ²¡å¬éŸ³ä¹ã€‚"
            },
            {
                given: "Te kirjoititte kirjeen.",
                answer: "Te ette kirjoittaneet kirjettÃ¤.",
                translation: "ä½ ä»¬æ²¡å†™ä¿¡ã€‚"
            },
            {
                given: "MinÃ¤ join kahvin.",
                answer: "MinÃ¤ en juonut kahvia.",
                translation: "æˆ‘æ²¡å–å’–å•¡ã€‚"
            }
        ];

        // äº‹å®æ ¸æŸ¥å™¨æ•°æ®
        const factCheckerData = [
            {
                verb: "lukea",
                subject: "HÃ¤n",
                subjectChinese: "ä»–/å¥¹",
                pastPositive: "luki",
                pastNegative: "lukenut",
                objectPartitive: "kirjaa",
                objectGenitive: "kirjan",
                negationWord: "ei",
                actionChinese: "è¯»äº†",
                objectChinese: "ä¹¦"
            },
            {
                verb: "syÃ¶dÃ¤", 
                subject: "MinÃ¤",
                subjectChinese: "æˆ‘",
                pastPositive: "sÃ¶in",
                pastNegative: "syÃ¶nyt",
                objectPartitive: "pizzaa",
                objectGenitive: "pizzan",
                negationWord: "en",
                actionChinese: "åƒäº†",
                objectChinese: "æ¯”è¨"
            },
            {
                verb: "ostaa",
                subject: "Me",
                subjectChinese: "æˆ‘ä»¬",
                pastPositive: "ostimme",
                pastNegative: "ostaneet",
                objectPartitive: "autoa",
                objectGenitive: "auton",
                negationWord: "emme",
                actionChinese: "ä¹°äº†",
                objectChinese: "è½¦"
            },
            {
                verb: "juoda",
                subject: "Te",
                subjectChinese: "ä½ ä»¬",
                pastPositive: "joitte",
                pastNegative: "juoneet",
                objectPartitive: "kahvia",
                objectGenitive: "kahvin",
                negationWord: "ette",
                actionChinese: "å–äº†",
                objectChinese: "å’–å•¡"
            },
            {
                verb: "kirjoittaa",
                subject: "He",
                subjectChinese: "ä»–ä»¬",
                pastPositive: "kirjoittivat",
                pastNegative: "kirjoittaneet",
                objectPartitive: "kirjettÃ¤",
                objectGenitive: "kirjeen",
                negationWord: "eivÃ¤t",
                actionChinese: "å†™äº†",
                objectChinese: "ä¿¡"
            },
            {
                verb: "kuunnella",
                subject: "SinÃ¤",
                subjectChinese: "ä½ ",
                pastPositive: "kuuntelit",
                pastNegative: "kuunnellut",
                objectPartitive: "musiikkia",
                objectGenitive: "musiikin",
                negationWord: "et",
                actionChinese: "å¬äº†",
                objectChinese: "éŸ³ä¹"
            }
        ];

        let currentData = null;
        let currentPracticeData = null;
        let currentFactCheckerData = null;

        // TTSå‡½æ•°
        function speakText(text) {
            const cleanText = text.replace(/<[^>]*>/g, '');
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(cleanText);
                utterance.lang = 'fi-FI';
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
        }

        // ç¿»è¯‘æ˜¾ç¤º/éšè—å‡½æ•°
        function toggleTranslation(elementId) {
            const element = document.getElementById(elementId);
            if (element.style.display === 'none' || element.style.display === '') {
                element.style.display = 'block';
            } else {
                element.style.display = 'none';
            }
        }

        // ç”Ÿæˆå¹³è¡Œå®‡å®™å¯¹æ¯”
        function runParallelUniverse() {
            currentData = negationData[Math.floor(Math.random() * negationData.length)];
            
            document.getElementById('present-positive-sentence').innerHTML = currentData.presentPositive;
            document.getElementById('present-negative-sentence').innerHTML = currentData.presentNegative;
            document.getElementById('past-negative-sentence').innerHTML = currentData.pastNegative;
            
            document.getElementById('present-positive-translation').textContent = currentData.translations.presentPositive;
            document.getElementById('present-negative-translation').textContent = currentData.translations.presentNegative;
            document.getElementById('past-negative-translation').textContent = currentData.translations.pastNegative;
        }

        // ç”Ÿæˆç»ƒä¹ 
        function generatePractice() {
            currentPracticeData = practiceData[Math.floor(Math.random() * practiceData.length)];
            document.getElementById('practice-given-sentence').textContent = currentPracticeData.given;
            document.getElementById('practice-answer-sentence').textContent = currentPracticeData.answer;
            
            // è®¾ç½®ä¸­æ–‡ç¿»è¯‘
            // å¯¹äºç»™å®šå¥å­ï¼ˆè‚¯å®šè¿‡å»æ—¶ï¼‰ï¼Œæå–å¯¹åº”çš„ä¸­æ–‡
            const givenChinese = currentPracticeData.given
                .replace(/HÃ¤n .*/, 'ä»–/å¥¹' + currentPracticeData.translation.replace(/^ä»–\/å¥¹æ²¡/, '').replace(/^æˆ‘ä»¬æ²¡/, '').replace(/^ä½ æ²¡/, '').replace(/^ä»–ä»¬æ²¡/, '').replace(/^ä½ ä»¬æ²¡/, '').replace(/^æˆ‘æ²¡/, ''))
                .replace(/Me .*/, 'æˆ‘ä»¬' + currentPracticeData.translation.replace(/^ä»–\/å¥¹æ²¡/, '').replace(/^æˆ‘ä»¬æ²¡/, '').replace(/^ä½ æ²¡/, '').replace(/^ä»–ä»¬æ²¡/, '').replace(/^ä½ ä»¬æ²¡/, '').replace(/^æˆ‘æ²¡/, ''))
                .replace(/SinÃ¤ .*/, 'ä½ ' + currentPracticeData.translation.replace(/^ä»–\/å¥¹æ²¡/, '').replace(/^æˆ‘ä»¬æ²¡/, '').replace(/^ä½ æ²¡/, '').replace(/^ä»–ä»¬æ²¡/, '').replace(/^ä½ ä»¬æ²¡/, '').replace(/^æˆ‘æ²¡/, ''))
                .replace(/He .*/, 'ä»–ä»¬' + currentPracticeData.translation.replace(/^ä»–\/å¥¹æ²¡/, '').replace(/^æˆ‘ä»¬æ²¡/, '').replace(/^ä½ æ²¡/, '').replace(/^ä»–ä»¬æ²¡/, '').replace(/^ä½ ä»¬æ²¡/, '').replace(/^æˆ‘æ²¡/, ''))
                .replace(/Te .*/, 'ä½ ä»¬' + currentPracticeData.translation.replace(/^ä»–\/å¥¹æ²¡/, '').replace(/^æˆ‘ä»¬æ²¡/, '').replace(/^ä½ æ²¡/, '').replace(/^ä»–ä»¬æ²¡/, '').replace(/^ä½ ä»¬æ²¡/, '').replace(/^æˆ‘æ²¡/, ''))
                .replace(/MinÃ¤ .*/, 'æˆ‘' + currentPracticeData.translation.replace(/^ä»–\/å¥¹æ²¡/, '').replace(/^æˆ‘ä»¬æ²¡/, '').replace(/^ä½ æ²¡/, '').replace(/^ä»–ä»¬æ²¡/, '').replace(/^ä½ ä»¬æ²¡/, '').replace(/^æˆ‘æ²¡/, ''));
            
            // ç®€åŒ–ï¼šç›´æ¥åŸºäºç­”æ¡ˆæ¨å¯¼ç»™å®šå¥çš„ä¸­æ–‡
            let givenTranslation = currentPracticeData.translation.replace('æ²¡', '');
            document.getElementById('practice-given-translation').textContent = givenTranslation;
            document.getElementById('practice-answer-translation').textContent = currentPracticeData.translation;
            
            // éšè—ç­”æ¡ˆ
            document.getElementById('practice-answer').style.display = 'none';
        }

        // æ˜¾ç¤º/éšè—ç»ƒä¹ ç­”æ¡ˆ
        function togglePracticeAnswer() {
            const answerElement = document.getElementById('practice-answer');
            if (answerElement.style.display === 'none' || answerElement.style.display === '') {
                answerElement.style.display = 'block';
            } else {
                answerElement.style.display = 'none';
            }
        }

        // äº‹å®æ ¸æŸ¥å™¨é€»è¾‘
        function runFactChecker() {
            // éšæœºé€‰æ‹©æ•°æ®
            currentFactCheckerData = factCheckerData[Math.floor(Math.random() * factCheckerData.length)];
            
            // éšæœºå†³å®šçœŸå®æƒ…å†µï¼ˆçœŸ=è‚¯å®šå¥æ­£ç¡®ï¼Œå‡=å¦å®šå¥æ­£ç¡®ï¼‰
            const isTrue = Math.random() < 0.5;
            
            // éšæœºå†³å®šç³»ç»Ÿç»™å‡ºçš„é™ˆè¿°ç±»å‹ï¼ˆè‚¯å®šæˆ–å¦å®šï¼‰
            const isPositiveStatement = Math.random() < 0.5;
            
            let systemStatement, correctAnswer, chineseTranslation, systemStatementChinese;
            
            if (isPositiveStatement) {
                // ç³»ç»Ÿç»™å‡ºè‚¯å®šé™ˆè¿°
                systemStatement = `${currentFactCheckerData.subject} ${currentFactCheckerData.pastPositive} ${currentFactCheckerData.objectGenitive}.`;
                systemStatementChinese = `${currentFactCheckerData.subjectChinese}${currentFactCheckerData.actionChinese}${currentFactCheckerData.objectChinese}ã€‚`;
                
                if (isTrue) {
                    // çœŸå®æƒ…å†µï¼šç¡®å®å‘ç”Ÿäº†ï¼Œè‚¯å®šå¥æ˜¯æ­£ç¡®çš„
                    correctAnswer = systemStatement;
                    chineseTranslation = systemStatementChinese;
                } else {
                    // çœŸå®æƒ…å†µï¼šæ²¡æœ‰å‘ç”Ÿï¼Œå¦å®šå¥æ˜¯æ­£ç¡®çš„
                    correctAnswer = `${currentFactCheckerData.subject} ${currentFactCheckerData.negationWord} ${currentFactCheckerData.pastNegative} ${currentFactCheckerData.objectPartitive}.`;
                    chineseTranslation = `${currentFactCheckerData.subjectChinese}æ²¡${currentFactCheckerData.actionChinese.replace('äº†', '')}${currentFactCheckerData.objectChinese}ã€‚`;
                }
            } else {
                // ç³»ç»Ÿç»™å‡ºå¦å®šé™ˆè¿°
                systemStatement = `${currentFactCheckerData.subject} ${currentFactCheckerData.negationWord} ${currentFactCheckerData.pastNegative} ${currentFactCheckerData.objectPartitive}.`;
                systemStatementChinese = `${currentFactCheckerData.subjectChinese}æ²¡${currentFactCheckerData.actionChinese.replace('äº†', '')}${currentFactCheckerData.objectChinese}ã€‚`;
                
                if (isTrue) {
                    // çœŸå®æƒ…å†µï¼šç¡®å®å‘ç”Ÿäº†ï¼Œè‚¯å®šå¥æ˜¯æ­£ç¡®çš„
                    correctAnswer = `${currentFactCheckerData.subject} ${currentFactCheckerData.pastPositive} ${currentFactCheckerData.objectGenitive}.`;
                    chineseTranslation = `${currentFactCheckerData.subjectChinese}${currentFactCheckerData.actionChinese}${currentFactCheckerData.objectChinese}ã€‚`;
                } else {
                    // çœŸå®æƒ…å†µï¼šæ²¡æœ‰å‘ç”Ÿï¼Œå¦å®šå¥æ˜¯æ­£ç¡®çš„
                    correctAnswer = systemStatement;
                    chineseTranslation = systemStatementChinese;
                }
            }
            
            // æ›´æ–°ç•Œé¢
            document.getElementById('fact-checker-statement').textContent = systemStatement;
            document.getElementById('fact-checker-truth-value').textContent = isTrue ? 'âœ… çœŸçš„' : 'âŒ å‡çš„';
            document.getElementById('fact-checker-correct-sentence').innerHTML = `<strong>æ­£ç¡®å¥å­ï¼š</strong>${correctAnswer}<br><em>${chineseTranslation}</em>`;
            document.getElementById('statement-translation').textContent = systemStatementChinese;
            
            // æ˜¾ç¤ºç³»ç»Ÿé™ˆè¿°çš„TTSå’Œä¸­æ–‡æŒ‰é’®ï¼Œéšè—ç­”æ¡ˆå’Œç­”æ¡ˆTTSæŒ‰é’®
            document.getElementById('statement-tts').style.display = 'inline-block';
            document.getElementById('statement-translation-btn').style.display = 'inline-block';
            document.getElementById('fact-checker-correct-sentence').style.display = 'none';
            document.getElementById('fact-checker-tts').style.display = 'none';
            
            // å­˜å‚¨å½“å‰æ­£ç¡®ç­”æ¡ˆä¾›TTSä½¿ç”¨
            currentFactCheckerData.correctAnswer = correctAnswer;
        }

        // æ˜¾ç¤º/éšè—äº‹å®æ ¸æŸ¥å™¨ç­”æ¡ˆ
        function toggleFactCheckerAnswer() {
            const answerElement = document.getElementById('fact-checker-correct-sentence');
            const ttsButton = document.getElementById('fact-checker-tts');
            
            if (answerElement.style.display === 'none' || answerElement.style.display === '') {
                answerElement.style.display = 'block';
                ttsButton.style.display = 'inline-block';
            } else {
                answerElement.style.display = 'none';
                ttsButton.style.display = 'none';
            }
        }

        // æœ—è¯»æ­£ç¡®å¥å­
        function speakCorrectSentence() {
            if (currentFactCheckerData && currentFactCheckerData.correctAnswer) {
                speakText(currentFactCheckerData.correctAnswer);
            }
        }

        // åˆå§‹åŒ–
        window.onload = () => {
            runParallelUniverse();
            generatePractice();
            runFactChecker();
        };
    </script>
</body>
</html> 