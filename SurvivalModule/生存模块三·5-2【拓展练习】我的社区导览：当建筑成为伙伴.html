<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>èŠ¬å…°è¯­æ¨¡å—ä¸‰Â·ç»´åº¦äº”Â·æ‹“å±•ï¼šæˆ‘çš„ç¤¾åŒºå¯¼è§ˆ (æœ€ç»ˆæ•´åˆä¼˜åŒ–ç‰ˆ)</title>
    <style>
        /* å¤ç”¨ç»´åº¦äº”çš„CSSï¼Œç¡®ä¿é£æ ¼ç»Ÿä¸€ */
        body { font-family: "Microsoft YaHei", sans-serif; line-height: 1.7; margin: 20px auto; max-width: 900px; padding: 0 20px; color: #333; background-color: #f9f9f9; }
        h1, h2, h3, h4 { color: #2c3e50; }
        h1 { text-align: center; margin-bottom: 35px; font-size: 2.2em; }
        h2 { border-bottom: 2px solid #e67e22; padding-bottom: 12px; margin-top: 45px; font-size: 1.8em; color: #e67e22; }
        h3 { margin-top: 30px; font-size: 1.5em; color: #d35400; }
        h4 { font-size: 1.3em; color: #d35400; margin-top:25px; margin-bottom:15px; }
        table.vocab-scaffolding-table, table.vocab-list-table, table.dynamics-table { width: 100%; border-collapse: collapse; margin-bottom: 25px; display: table; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: top;}
        thead { background-color: #fef9e7; }
        .vocab-scaffolding-table td:first-child, .vocab-list-table td:first-child, .dynamics-table td:first-child { font-weight: bold; }
        .svg-icon { font-size: 1.5em; text-align: center; }
        .community-card, .practice-plan-card, .dialogue-box, .usage-example, .summary-card, .example, .new-vocab-section, .trap-card-container {
            background-color: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; margin-bottom: 30px; box-shadow: 0 4px 10px rgba(0,0,0,0.08);
        }
        .example { border-left: 6px solid #e67e22 !important; }
        .community-card-content { display: flex; align-items: center; gap: 20px; }
        .community-card-content .svg-icon { font-size: 3em; flex-shrink: 0; }
        .finnish-phrase { font-weight: bold; color: #d35400; font-size: 1.15em; }
        .genitive-n { color: #c0392b; font-weight: bold; text-decoration: underline; font-size: 1.2em; }
        .example-sentence .finnish-phrase { font-size: 1.1em; }
        .chinese-sense, .note { font-size: 0.95em; color: #555; font-style: italic; display: block; margin-top: 4px; }
        .tts-button { background: none; border: none; cursor: pointer; font-size: 1.2em; margin-left: 8px; padding: 0; display: inline-block; vertical-align: middle; color: #d35400; }
        .tts-button:hover { color: #a04000; opacity: 0.8; }
        .interactive-map-container, .interactive-choice, .trap-quiz-container { background-color: #fdfefe; border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; margin: 20px 0; }
        .highlight { color: #c0392b; font-weight: bold; }
        hr { border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0,0,0,0), rgba(230,126,34,0.3), rgba(0,0,0,0)); margin: 40px 0; }
        .interactive-choice button { background-color: #f39c12; color: white; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; margin: 8px; font-size: 1em; transition: background-color 0.2s; }
        .interactive-choice button:hover { background-color: #d35400; }
        .feedback-area { margin-top: 15px; padding: 12px; border-radius: 5px; text-align:center; font-size: 1.1em; min-height: 1.5em; }
        .correct { background-color: #d1f2eb; color: #0c6255; border: 1px solid #a3e4d7; }
        .incorrect { background-color: #fdedec; color: #c0392b; border: 1px solid #f5b7b1; }
        .action-button { background-color: #f39c12; color: white; padding: 12px 18px; border: none; border-radius: 5px; cursor: pointer; margin-top:12px; font-size: 1em; transition: background-color 0.2s; }
        .action-button:hover { background-color: #d35400; }
        .dialogue-line { margin-bottom: 12px; }
        .dialogue-line .speaker { font-weight: bold; color: #2980b9; }
        .dialogue-line .learner { font-weight: bold; color: #27ae60; }
        .clickable-spot { cursor: pointer; transition: fill 0.2s, stroke 0.2s; }
        .clickable-spot:hover { fill: #f39c12; stroke: #c0392b; stroke-width: 2px;}
        .trap-card-container { display: flex; justify-content: space-around; gap: 20px; flex-wrap: wrap; }
        .trap-card { width: 45%; min-width: 280px; padding: 15px; border: 2px solid; border-radius: 8px; text-align: center; }
        .trap-card.space { border-color: #2980b9; } /* Blue for space */
        .trap-card.time { border-color: #27ae60; } /* Green for time */
        .trap-card h4 { margin-top: 0; }
        .trap-card .icon { font-size: 2.5em; margin-bottom: 10px; }
        .trap-quiz-container ul { list-style-type: none; padding-left: 0; }
        .trap-quiz-container li { margin-bottom: 15px; }
        .trap-quiz-container .options { margin-top: 5px; }
        .trap-quiz-container .options label { margin-right: 15px; cursor: pointer; }
    </style>
</head>
<body>

    <!-- Thisæ‹“å±•æ¨¡å— is inserted between dimension five's main content and its summary -->

    <hr style="border-width:2px; border-color:#e67e22;">
    
    <section id="community-expansion">
        <h2>ğŸ™ï¸ã€æ‹“å±•ç»ƒä¹ ã€‘æˆ‘çš„ç¤¾åŒºå¯¼è§ˆï¼šå½“å»ºç­‘æˆä¸ºä¼™ä¼´</h2>
        <div class="example">
            <p><span class="speakable-finnish">Olet oppinut paljon!</span> (ä½ å·²ç»å­¦äº†å¾ˆå¤šäº†ï¼) ç°åœ¨è®©æˆ‘ä»¬æŠŠæ¡Œé¢å¯»å®çš„æŠ€èƒ½åº”ç”¨åˆ°æ›´å¹¿é˜”çš„ä¸–ç•Œâ€”â€”ä½ èº«è¾¹çš„ç¤¾åŒºï¼</p>
        </div>

        <h3>æ­¥éª¤ä¸€ï¼šè®¤è¯†æ–°çš„å»ºç­‘ä¼™ä¼´å’Œå®ƒä»¬çš„â€œ-n å°æ‰‹â€</h3>
        <p>åœ¨å¼€å§‹å¯¼è§ˆå‰ï¼Œæˆ‘ä»¬å…ˆæ¥è®¤è¯†ä¸€ä¸‹ç¤¾åŒºé‡Œçš„æ–°æœ‹å‹ï¼Œå¹¶çœ‹çœ‹å®ƒä»¬ä¼¸å‡º <span class="genitive-n">-n</span> â€œå°æ‰‹â€åæ˜¯ä»€ä¹ˆæ ·å­ã€‚</p>
        <div class="community-card">
            <table class="vocab-scaffolding-table">
                <thead>
                    <tr>
                        <th>èŠ¬å…°è¯­å»ºç­‘ (åŸå½¢)</th>
                        <th>ä¼¸å‡ºâ€œ-nå°æ‰‹â€å (æ‰€æœ‰æ ¼)</th>
                        <th>ä¸­æ–‡æ„æ€</th>
                        <th class="svg-icon">å›¾æ ‡</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><span class="speakable-finnish">asema</span></td><td><span class="speakable-finnish">asema<span class="genitive-n">n</span></span></td><td>è½¦ç«™</td><td class="svg-icon">ğŸš‚</td></tr>
                    <tr><td><span class="speakable-finnish">puisto</span></td><td><span class="speakable-finnish">puisto<span class="genitive-n">n</span></span></td><td>å…¬å›­</td><td class="svg-icon">ğŸŒ³</td></tr>
                    <tr><td><span class="speakable-finnish">apteekki</span></td><td><span class="speakable-finnish">apteeki<span class="genitive-n">n</span></span></td><td>è¯åº—</td><td class="svg-icon">â•</td></tr>
                    <tr><td><span class="speakable-finnish">posti</span></td><td><span class="speakable-finnish">posti<span class="genitive-n">n</span></span></td><td>é‚®å±€</td><td class="svg-icon">âœ‰ï¸</td></tr>
                    <tr><td><span class="speakable-finnish">kauppakeskus</span></td><td><span class="speakable-finnish">kauppakeskukse<span class="genitive-n">n</span></span></td><td>å•†åœº</td><td class="svg-icon">ğŸ›’</td></tr>
                    <tr><td><span class="speakable-finnish">kerrostalo</span></td><td><span class="speakable-finnish">kerrostalo<span class="genitive-n">n</span></span></td><td>å…¬å¯“æ¥¼</td><td class="svg-icon">ğŸ¢</td></tr>
                </tbody>
            </table>
        </div>

        <h3>æ­¥éª¤äºŒï¼šæƒ…æ™¯æµ¸æ¶¦ - å¬æˆ‘è¯´æˆ‘çš„ç¤¾åŒº</h3>
        <div class="community-card">
            <div class="community-card-content">
                <span class="svg-icon">â• â€¦ ğŸš‚</span>
                <div>
                    <p class="example-sentence"><span class="speakable-finnish">Minun naapurustossa apteekki on aseman vieressÃ¤.</span> <span class="note">(naapurusto=ç¤¾åŒº)</span></p>
                </div>
            </div>
        </div>
        <div class="community-card">
            <div class="community-card-content">
                <span class="svg-icon">âœ‰ï¸ â†”ï¸ ğŸ›’</span>
                <div>
                    <p class="example-sentence"><span class="speakable-finnish">MinÃ¤ nÃ¤en, ettÃ¤ posti on ison kauppakeskuksen vastapÃ¤Ã¤tÃ¤.</span> <span class="note">(nÃ¤en=æˆ‘çœ‹è§, ettÃ¤=that..., iso=å¤§çš„)</span></p>
                </div>
            </div>
        </div>
        <div class="community-card">
            <div class="community-card-content">
                <span class="svg-icon">ğŸ¢ â€¦ ğŸŒ³ â€¦ ğŸš‚</span>
                <div>
                    <p class="example-sentence"><span class="speakable-finnish">Sinun koti on puiston ja aseman vÃ¤lissÃ¤. Se on tosi kÃ¤tevÃ¤Ã¤!</span> <span class="note">(tosi kÃ¤tevÃ¤=éå¸¸æ–¹ä¾¿)</span></p>
                </div>
            </div>
        </div>

        <h3>æ­¥éª¤ä¸‰ï¼šäº’åŠ¨åœ°å›¾ç»ƒä¹  - å»ºç«‹ä½ è‡ªå·±çš„ç¤¾åŒº</h3>
        <div class="interactive-map-container">
            <p id="map-task-text" style="font-weight:bold; font-size:1.1em; text-align:center;"></p>
            <div style="text-align:center;">
                <svg id="community-map" width="90%" viewBox="0 0 500 300" style="border:1px solid #ddd; border-radius: 5px; background-color: #e8f5e9;">
                    <rect x="0" y="125" width="500" height="50" fill="#bdc3c7"></rect>
                    <rect x="225" y="0" width="50" height="300" fill="#bdc3c7"></rect>
                    <rect x="50" y="50" width="100" height="50" fill="#3498db"></rect>
                    <text x="100" y="80" text-anchor="middle" fill="white" class="speakable-finnish">Asema ğŸš‚</text>
                    <rect id="spot-A" class="clickable-spot" x="325" y="50" width="100" height="50" fill="#ecf0f1" stroke="#95a5a6" stroke-dasharray="4" onclick="checkMapAnswer('A')"></rect>
                    <text x="375" y="80" text-anchor="middle" fill="#7f8c8d" style="pointer-events:none;">A</text>
                    <rect id="spot-B" class="clickable-spot" x="50" y="200" width="100" height="50" fill="#ecf0f1" stroke="#95a5a6" stroke-dasharray="4" onclick="checkMapAnswer('B')"></rect>
                    <text x="100" y="230" text-anchor="middle" fill="#7f8c8d" style="pointer-events:none;">B</text>
                    <rect id="spot-C" class="clickable-spot" x="325" y="200" width="100" height="50" fill="#ecf0f1" stroke="#95a5a6" stroke-dasharray="4" onclick="checkMapAnswer('C')"></rect>
                    <text x="375" y="230" text-anchor="middle" fill="#7f8c8d" style="pointer-events:none;">C</text>
                </svg>
            </div>
            <div id="feedback-area-map" class="feedback-area"></div>
            <div style="text-align:center;">
                 <button class="action-button" onclick="generateNewMapTask()">ä¸‹ä¸€ä¸ªä»»åŠ¡</button>
            </div>
        </div>
        
        <h3>æ­¥éª¤å››ï¼šå¾®å‹å¯¹è¯æ¨¡æ‹Ÿ - çœŸå®åœºæ™¯åº”ç”¨</h3>
        <p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æŠŠå­¦åˆ°çš„çŸ¥è¯†ç”¨åœ¨æœ€çœŸå®çš„åœºæ™¯ä¸­ï¼šé—®è·¯ï¼æƒ³è±¡ä¸€ä¸‹ï¼Œä½ ï¼ˆ<span class="learner">å­¦ä¹ è€…</span>ï¼‰åœ¨ä¸€ä¸ªæ–°ç¤¾åŒºï¼Œå‘æˆ‘ï¼ˆ<span class="speaker">å‘å¯¼</span>ï¼‰è¯¢é—®è¯åº—çš„ä½ç½®ã€‚</p>
        <div class="dialogue-box">
            <div class="dialogue-line"><span class="speaker">MinÃ¤:</span> <span class="speakable-finnish">Hei! Voinko auttaa sinua?</span></div>
            <div class="dialogue-line"><span class="learner">SinÃ¤:</span> <span class="speakable-finnish">Hei! Anteeksi, minÃ¤ etsin apteekkia. MissÃ¤ se on?</span> <span class="note">(etsin=æˆ‘æ­£åœ¨æ‰¾)</span></div>
            <div class="dialogue-line"><span class="speaker">MinÃ¤:</span> <span class="speakable-finnish">Apteekki... Se on tuon ison puiston vastapÃ¤Ã¤tÃ¤.</span></div>
            <div class="dialogue-line"><span class="learner">SinÃ¤:</span> <span class="speakable-finnish">Aha, puiston vastapÃ¤Ã¤tÃ¤. Onko se aseman vieressÃ¤?</span></div>
            <div class="dialogue-line"><span class="speaker">MinÃ¤:</span> <span class="speakable-finnish">Ei, se ei ole aseman vieressÃ¤. Se on postin ja pienen kaupan vÃ¤lissÃ¤.</span> <span class="note">(pieni=å°çš„, kauppa=å•†åº—)</span></div>
            <div class="dialogue-line"><span class="learner">SinÃ¤:</span> <span class="speakable-finnish">SelvÃ¤, nyt minÃ¤ ymmÃ¤rrÃ¤n. Kiitos paljon avusta!</span> <span class="note">(ymmÃ¤rrÃ¤n=æˆ‘æ˜ç™½, apu=å¸®åŠ© -> avusta=ä»å¸®åŠ©)</span></div>
        </div>

        <!-- NEW INTEGRATED MINI-MODULE STARTS HERE -->
        <hr>
        <h3>æ·±åŒ–ç†è§£ï¼šä¼™ä¼´å…³ç³»çš„åŠ¨æ€ä¸é™·é˜±</h3>
        <p>ä½ å·²ç»æŒæ¡äº†é™æ€çš„ä½ç½®å…³ç³»ï¼Œç°åœ¨æˆ‘ä»¬æ¥æ¢ç´¢ä¸€ä¸‹åŠ¨æ€çš„å˜åŒ–ï¼Œå¹¶é¿å¼€ä¸€ä¸ªåˆå­¦è€…å¸¸è§çš„è®¤çŸ¥é™·é˜±ï¼</p>

        <h4>A. ä¼™ä¼´çš„åŠ¨æ€ï¼šä»â€œåœ¨â€åˆ°â€œå»â€ä¸â€œæ¥â€</h4>
        <div class="community-card">
            <p>å°±åƒç‰©ä½“å¯ä»¥â€œåœ¨â€æ¡Œå­ä¸Šã€ä¹Ÿå¯ä»¥â€œæ”¾åˆ°â€æ¡Œå­ä¸Šä¸€æ ·ï¼Œæˆ‘ä»¬çš„ä½ç½®ä¼™ä¼´ä¹Ÿæœ‰åŠ¨æ€å½¢å¼ã€‚</p>
            <table class="dynamics-table">
                <thead>
                    <tr>
                        <th>æ ¸å¿ƒæ„Ÿè§‰</th>
                        <th>â€œæ—è¾¹â€ç³»åˆ— (<span class="speakable-finnish">vieri-</span>)</th>
                        <th>â€œä¸­é—´â€ç³»åˆ— (<span class="speakable-finnish">vÃ¤li-</span>)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>é™æ€ (åœ¨)</strong> ğŸ“</td>
                        <td><span class="example-sentence speakable-finnish">MinÃ¤ istun sinun <span class="finnish-phrase">vieressÃ¤</span>.</span><span class="note">(æˆ‘ååœ¨ä½ æ—è¾¹ã€‚)</span></td>
                        <td><span class="example-sentence speakable-finnish">Avain on kupin ja kirjan <span class="finnish-phrase">vÃ¤lissÃ¤</span>.</span><span class="note">(é’¥åŒ™åœ¨æ¯å­å’Œä¹¦ä¹‹é—´ã€‚)</span></td>
                    </tr>
                    <tr>
                        <td><strong>åŠ¨æ€ (å»)</strong> â¡ï¸</td>
                        <td><span class="example-sentence speakable-finnish">MinÃ¤ tulen sinun <span class="finnish-phrase">vierelle</span>.</span><span class="note">(æˆ‘åˆ°ä½ æ—è¾¹æ¥ã€‚)</span></td>
                        <td><span class="example-sentence speakable-finnish">Laita avain kupin ja kirjan <span class="finnish-phrase">vÃ¤lille</span>.</span><span class="note">(æŠŠé’¥åŒ™æ”¾åˆ°æ¯å­å’Œä¹¦ä¹‹é—´å»ã€‚)</span></td>
                    </tr>
                    <tr>
                        <td><strong>åŠ¨æ€ (æ¥)</strong> â¬…ï¸</td>
                        <td><span class="example-sentence speakable-finnish">Ota kissa minun <span class="finnish-phrase">viereltÃ¤</span> pois.</span><span class="note">(æŠŠçŒ«ä»æˆ‘æ—è¾¹æ‹¿èµ°ã€‚)</span></td>
                        <td><span class="example-sentence speakable-finnish">Ota avain kupin ja kirjan <span class="finnish-phrase">vÃ¤liltÃ¤</span>.</span><span class="note">(ä»æ¯å­å’Œä¹¦ä¹‹é—´æŠŠé’¥åŒ™æ‹¿å‡ºæ¥ã€‚)</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h4>B. è®¤æ¸…ä½ çš„ä¼™ä¼´ï¼šä¸€ä¸ªé‡è¦çš„è®¤çŸ¥é™·é˜±ï¼</h4>
        <p>èŠ¬å…°è¯­ä¸­æœ‰ä¸¤ä¸ªè¯å¬èµ·æ¥å¾ˆåƒï¼Œä½†æ„æ€å®Œå…¨ä¸åŒï¼š<span class="finnish-phrase speakable-finnish">vÃ¤lissÃ¤</span> å’Œ <span class="finnish-phrase speakable-finnish">vÃ¤lillÃ¤</span>ã€‚å¼„æ¸…å®ƒä»¬çš„åŒºåˆ«æ˜¯è¿ˆå‘æµåˆ©çš„ä¸€å¤§æ­¥ï¼</p>
        <div class="trap-card-container">
            <div class="trap-card space">
                <div class="icon">ğŸ+ğŸ§€+ğŸ</div>
                <h4>ã€ç©ºé—´ä¸‰æ˜æ²»ã€‘ <span class="finnish-phrase speakable-finnish">vÃ¤lissÃ¤</span></h4>
                <p><strong>åŠŸèƒ½ï¼š</strong> åœ¨**ç©ºé—´**ä¸Šï¼Œä½äºä¸¤è€…ä¹‹é—´ã€‚</p>
                <p><strong>å¿…è¦ä¼™ä¼´ï¼š</strong> éœ€è¦åè¯ä¼¸å‡º <span class="genitive-n">-n</span> å°æ‰‹ã€‚</p>
                <p class="example-sentence"><span class="speakable-finnish">MinÃ¤ seison sinun ja oven <span class="finnish-phrase">vÃ¤lissÃ¤</span>.</span> <span class="note">(æˆ‘ç«™åœ¨ä½ å’Œé—¨ä¹‹é—´ã€‚)</span></p>
            </div>
            <div class="trap-card time">
                <div class="icon">â°ğŸµ</div>
                <h4>ã€æ—¶é—´èŠ‚æ‹å™¨ã€‘ <span class="finnish-phrase speakable-finnish">vÃ¤lillÃ¤</span></h4>
                <p><strong>åŠŸèƒ½ï¼š</strong> åœ¨**æ—¶é—´**ä¸Šï¼Œæœ‰æ—¶ã€å¶å°”ã€‚</p>
                <p><strong>å¿…è¦ä¼™ä¼´ï¼š</strong> é€šå¸¸ç‹¬ç«‹å·¥ä½œï¼Œä½œä¸ºå‰¯è¯ã€‚</p>
                <p class="example-sentence"><span class="speakable-finnish">MinÃ¤ juon teetÃ¤ <span class="finnish-phrase">vÃ¤lillÃ¤</span>.</span> <span class="note">(æˆ‘æœ‰æ—¶å€™å–èŒ¶ã€‚)</span></p>
            </div>
        </div>

        <h4>C. äº’åŠ¨å°æµ‹éªŒï¼šé€‰æ‹©æ­£ç¡®çš„ä¼™ä¼´</h4>
        <div class="trap-quiz-container">
            <ul>
                <li>
                    <p>1. <span class="speakable-finnish">MinÃ¤ istun kahden ystÃ¤vÃ¤n _______.</span> <span class="note">(æˆ‘ååœ¨ä¸¤ä¸ªæœ‹å‹ä¹‹é—´ã€‚)</span></p>
                    <div class="options">
                        <label><input type="radio" name="quiz1" value="a" onclick="checkTrapAnswer(1, true)"> <span class="finnish-phrase speakable-finnish">vÃ¤lissÃ¤</span></label>
                        <label><input type="radio" name="quiz1" value="b" onclick="checkTrapAnswer(1, false)"> <span class="finnish-phrase speakable-finnish">vÃ¤lillÃ¤</span></label>
                    </div>
                </li>
                <li>
                    <p>2. <span class="speakable-finnish">SinÃ¤ syÃ¶t suklaata _______, mutta et joka pÃ¤ivÃ¤.</span> <span class="note">(ä½ å¶å°”åƒå·§å…‹åŠ›, ä½†æ˜¯ä¸æ˜¯æ¯å¤©ã€‚)</span></p>
                    <div class="options">
                        <label><input type="radio" name="quiz2" value="a" onclick="checkTrapAnswer(2, false)"> <span class="finnish-phrase speakable-finnish">vÃ¤lissÃ¤</span></label>
                        <label><input type="radio" name="quiz2" value="b" onclick="checkTrapAnswer(2, true)"> <span class="finnish-phrase speakable-finnish">vÃ¤lillÃ¤</span></label>
                    </div>
                </li>
            </ul>
            <div id="feedback-area-trap" class="feedback-area"></div>
        </div>
        <!-- NEW INTEGRATED MINI-MODULE ENDS HERE -->

    </section>

    <hr style="border-width:2px; border-color:#e67e22;">
    
    <section id="expanded-vocabulary-list" class="new-vocab-section">
        <h3>ğŸ“š æ‹“å±•ç»ƒä¹ æ–°æœ‹å‹ï¼šé«˜é¢‘åœ°ç‚¹ä¸å»ºç­‘</h3>
        <p>è¿™æ˜¯æœ¬æ¬¡æ‹“å±•ç»ƒä¹ ä¸­æˆ‘ä»¬æ¥è§¦åˆ°çš„ï¼Œä»¥åŠå…¶ä»–ä¸€äº›åœ¨åŸå¸‚ä¸­éå¸¸å¸¸è§çš„é«˜é¢‘åœ°ç‚¹ã€‚ç†Ÿæ‚‰å®ƒä»¬çš„æ‰€æœ‰æ ¼å½¢å¼ï¼ˆä¼¸å‡º<span class="genitive-n">-n</span>å°æ‰‹ï¼‰å¯¹äºæè¿°ä½ç½®å…³ç³»è‡³å…³é‡è¦ï¼</p>
        <table class="vocab-list-table">
            <thead>
                <tr>
                    <th>èŠ¬å…°è¯­ (åŸå½¢)</th>
                    <th>æ‰€æœ‰æ ¼ (-n â€œå°æ‰‹â€)</th>
                    <th>ä¸­æ–‡æ„æ€</th>
                </tr>
            </thead>
            <tbody>
                <tr><td><span class="speakable-finnish">kirjasto</span></td><td><span class="speakable-finnish">kirjaston</span></td><td>å›¾ä¹¦é¦†</td></tr>
                <tr><td><span class="speakable-finnish">museo</span></td><td><span class="speakable-finnish">museon</span></td><td>åšç‰©é¦†</td></tr>
                <tr><td><span class="speakable-finnish">pysÃ¤kÃ¶intialue</span></td><td><span class="speakable-finnish">pysÃ¤kÃ¶intialueen</span></td><td>åœè½¦åœº</td></tr>
                <tr><td><span class="speakable-finnish">sairaala</span></td><td><span class="speakable-finnish">sairaalan</span></td><td>åŒ»é™¢</td></tr>
                <tr><td><span class="speakable-finnish">pankki</span></td><td><span class="speakable-finnish">pankin</span></td><td>é“¶è¡Œ</td></tr>
                <tr><td><span class="speakable-finnish">elokuvateatteri</span></td><td><span class="speakable-finnish">elokuvateatterin</span></td><td>ç”µå½±é™¢</td></tr>
                <tr><td><span class="speakable-finnish">ravintola</span></td><td><span class="speakable-finnish">ravintolan</span></td><td>é¤é¦†</td></tr>
                <tr><td><span class="speakable-finnish">hotelli</span></td><td><span class="speakable-finnish">hotellin</span></td><td>é…’åº—</td></tr>
                <tr><td><span class="speakable-finnish">yliopisto</span></td><td><span class="speakable-finnish">yliopiston</span></td><td>å¤§å­¦</td></tr>
                <tr><td><span class="speakable-finnish">kirkko</span></td><td><span class="speakable-finnish">kirkon</span></td><td>æ•™å ‚</td></tr>
                <tr><td><span class="speakable-finnish">etsiÃ¤</span></td><td><span class="note speakable-finnish">(minÃ¤ etsin, sinÃ¤ etsit)</span></td><td>å¯»æ‰¾</td></tr>
                <tr><td><span class="speakable-finnish">ymmÃ¤rtÃ¤Ã¤</span></td><td><span class="note speakable-finnish">(minÃ¤ ymmÃ¤rrÃ¤n, sinÃ¤ ymmÃ¤rrÃ¤t)</span></td><td>æ˜ç™½ï¼Œç†è§£</td></tr>
                <tr><td><span class="speakable-finnish">auttaa</span></td><td><span class="note speakable-finnish">(minÃ¤ autan, sinÃ¤ autat)</span></td><td>å¸®åŠ©</td></tr>
                <tr><td><span class="speakable-finnish">nÃ¤hdÃ¤</span></td><td><span class="note speakable-finnish">(minÃ¤ nÃ¤en, sinÃ¤ nÃ¤et)</span></td><td>çœ‹è§ (å¤ä¹ )</td></tr>
            </tbody>
        </table>
    </section>

<script>
    const finnishLang = 'fi-FI';
    let isSpeaking = false;

    function speakText(text, lang = finnishLang) {
        if (!('speechSynthesis' in window)) return;
        if (isSpeaking) { window.speechSynthesis.cancel(); setTimeout(() => startSpeaking(text, lang), 50); } 
        else { startSpeaking(text, lang); }
    }

    function startSpeaking(text, lang) {
        isSpeaking = true;
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = lang;
        utterance.rate = 0.9;
        utterance.pitch = 1.0;
        const voices = window.speechSynthesis.getVoices();
        let selectedVoice = voices.find(voice => voice.lang.toLowerCase() === 'fi-fi') || voices.find(voice => voice.lang.toLowerCase().startsWith('fi'));
        if (selectedVoice) utterance.voice = selectedVoice;
        utterance.onend = () => { isSpeaking = false; };
        utterance.onerror = () => { isSpeaking = false; };
        window.speechSynthesis.speak(utterance);
    }

    function addTTSButton(element, textToSpeak) {
        let cleanedText = textToSpeak.replace(/\s*\(.*?\)\s*/g, '').trim().replace(/ï¼ˆ.*?ï¼‰/g, '').trim().replace(/\[.*?\]/g, '').trim();
        if (!cleanedText) return;
        if (element.querySelector('.tts-button')) return;

        const button = document.createElement('button');
        button.className = 'tts-button';
        button.innerHTML = 'ğŸ”Š';
        button.title = 'æ’­æ”¾: ' + cleanedText;
        button.setAttribute('aria-label', 'æ’­æ”¾éŸ³é¢‘: ' + cleanedText);
        button.onclick = (event) => { event.preventDefault(); event.stopPropagation(); speakText(cleanedText); };
        
        element.appendChild(button);
    }

    function initializeAllTTS() {
        const elementsToMakeSpeakable = document.querySelectorAll('.speakable-finnish');
        
        elementsToMakeSpeakable.forEach(el => {
            // This simplified selector targets only the specific spans that should be speakable.
            // This avoids double-adding buttons to parent elements.
            const textContent = el.textContent.split('(')[0].split('ï¼ˆ')[0].trim();
            if (textContent) {
                addTTSButton(el, textContent);
            }
        });
    }

    const mapTasks = [
        { task_fi: "MinÃ¤ olen asemalla. Posti on aseman vastapÃ¤Ã¤tÃ¤. MissÃ¤ posti on?", task_zh: "æˆ‘åœ¨è½¦ç«™ã€‚é‚®å±€åœ¨è½¦ç«™å¯¹é¢ã€‚é‚®å±€åœ¨å“ªé‡Œï¼Ÿ", correct_spot: "B" },
        { task_fi: "Kauppakeskus on aseman vieressÃ¤, tien toisella puolella. MissÃ¤ kauppakeskus on?", task_zh: "å•†åœºåœ¨è½¦ç«™æ—è¾¹ï¼Œåœ¨é©¬è·¯çš„å¦ä¸€è¾¹ã€‚å•†åœºåœ¨å“ªé‡Œï¼Ÿ", correct_spot: "A" },
        { task_fi: "Apteekki on aseman ja kauppakeskuksen vÃ¤lissÃ¤, mutta tien vastapÃ¤Ã¤tÃ¤. MissÃ¤ se on?", task_zh: "è¯åº—åœ¨è½¦ç«™å’Œå•†åœºä¹‹é—´ï¼Œä½†æ˜¯åœ¨é©¬è·¯å¯¹é¢ã€‚å®ƒåœ¨å“ªé‡Œï¼Ÿ", correct_spot: "C" }
    ];
    let currentMapTaskIndex = 0;
    const mapTaskTextEl = document.getElementById('map-task-text');
    const feedbackMapEl = document.getElementById('feedback-area-map');

    function generateNewMapTask() {
        currentMapTaskIndex = (currentMapTaskIndex + 1) % mapTasks.length;
        displayMapTask();
    }
    function displayMapTask() {
        if (!mapTaskTextEl || !feedbackMapEl) return;
        const task = mapTasks[currentMapTaskIndex];
        mapTaskTextEl.innerHTML = `<span class="speakable-finnish">${task.task_fi}</span> <span class="note">(${task.task_zh})</span>`;
        feedbackMapEl.innerHTML = "";
        feedbackMapEl.className = 'feedback-area';
        initializeAllTTS(); // Re-initialize TTS for new content
    }
    function checkMapAnswer(selectedSpot) {
        if (!feedbackMapEl) return;
        const correctSpot = mapTasks[currentMapTaskIndex].correct_spot;
        let feedbackText = (selectedSpot === correctSpot)
            ? `<span class="speakable-finnish">Oikein! Hyvin sijoitettu!</span><span class="note">(æ­£ç¡®ï¼æ”¾å¯¹åœ°æ–¹äº†ï¼)</span>`
            : `<span class="speakable-finnish">Ei ihan. Katso karttaa ja ohjeita uudelleen.</span><span class="note">(ä¸å¤ªå¯¹ã€‚å†çœ‹çœ‹åœ°å›¾å’ŒæŒ‡ç¤ºã€‚)</span>`;
        feedbackMapEl.className = `feedback-area ${selectedSpot === correctSpot ? 'correct' : 'incorrect'}`;
        feedbackMapEl.innerHTML = feedbackText;
        initializeAllTTS(); // Re-initialize TTS for new content
        speakText(feedbackMapEl.querySelector('.speakable-finnish').textContent.trim());
    }
    
    const trapFeedbackEl = document.getElementById('feedback-area-trap');
    function checkTrapAnswer(quizNum, isCorrect) {
        if (!trapFeedbackEl) return;
        let feedbackText = isCorrect
            ? `<span class="speakable-finnish">Aivan oikein!</span>`
            : `<span class="speakable-finnish">Ei ihan. Mieti uudelleen!</span><span class="note">(ä¸å¤ªå¯¹ï¼Œå†æƒ³æƒ³ï¼)</span>`;
        trapFeedbackEl.className = `feedback-area ${isCorrect ? 'correct' : 'incorrect'}`;
        trapFeedbackEl.innerHTML = feedbackText;
        initializeAllTTS(); // Re-initialize TTS for new content
        speakText(trapFeedbackEl.querySelector('.speakable-finnish').textContent.trim());
    }

    document.addEventListener('DOMContentLoaded', () => {
        if (window.speechSynthesis.getVoices().length === 0) {
            window.speechSynthesis.onvoiceschanged = initializeAllTTS;
        } else {
            initializeAllTTS();
        }
        setTimeout(initializeAllTTS, 300);
        if (document.getElementById('community-map')) { displayMapTask(); }
    });
</script>
</body>
</html>