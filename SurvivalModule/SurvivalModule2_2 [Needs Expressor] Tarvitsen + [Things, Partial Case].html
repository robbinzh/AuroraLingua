<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>èŠ¬å…°è¯­å…¥é—¨ - æˆ‘éœ€è¦è¡¨è¾¾ç³»ç»Ÿ (TTS)</title>
    <style>
        body {
            font-family: "Microsoft YaHei", sans-serif;
            line-height: 1.6;
            margin: 20px auto;
            max-width: 900px;
            padding: 0 20px;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            overflow-x: auto;
            display: block;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        thead {
            background-color: #f4f4f4;
        }
        details {
            margin-bottom: 10px;
        }
        .example {
            background-color: #f9f9f9;
            padding: 10px;
            border-left: 4px solid #3498db;
            margin: 10px 0;
        }
        .tts-button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2em;
            margin-left: 5px;
            padding: 0;
            display: inline-block;
            vertical-align: middle;
        }
        .tts-button:hover {
            opacity: 0.7;
        }
        .debug-section {
            background-color: #fffbf0;
            border: 2px solid #ffa500;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .debug-button {
            background-color: #4CAF50;
            color: white;
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .debug-button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>

<h1>ğŸ§± æ¨¡å—äºŒÂ·2ï¼šã€éœ€æ±‚è¡¨è¾¾å™¨ã€‘"Tarvitsen + [äº‹ç‰©ï¼Œéƒ¨åˆ†æ ¼]"</h1>

<!-- TTSè°ƒè¯•åŒºåŸŸ -->
<div class="debug-section">
    <h3>ğŸ”§ TTSåŠŸèƒ½æµ‹è¯•</h3>
    <p>å¦‚æœTTSæŒ‰é’®æ²¡æœ‰å£°éŸ³ï¼Œè¯·å…ˆæµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
    <button class="debug-button" onclick="testBasicTTS()">æµ‹è¯•åŸºæœ¬TTS</button>
    <button class="debug-button" onclick="testFinnishTTS()">æµ‹è¯•èŠ¬å…°è¯­TTS</button>
    <button class="debug-button" onclick="listVoices()">æŸ¥çœ‹å¯ç”¨è¯­éŸ³</button>
    <button class="debug-button" onclick="removeDebugSection()">ç§»é™¤è°ƒè¯•åŒºåŸŸ</button>
    <div id="debug-output" style="margin-top: 10px; padding: 10px; background-color: #f0f0f0; border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto;"></div>
</div>

<hr>

<section id="cognitive-core">
    <h2>ğŸ§  è®¤çŸ¥ç»‘å®šæ ¸å¿ƒï¼š</h2>
    <p><strong>â€œHaluanâ€ æ˜¯æˆ‘æƒ³è¦ï¼Œâ€œTarvitsenâ€ æ˜¯æˆ‘éœ€è¦ã€‚</strong></p>
    <p>è¿™ä¸¤è€…éƒ½åœ¨ç”¨ã€éƒ¨åˆ†æ ¼ã€‘ï¼Œä½†èƒŒåçš„å¿ƒç†é©±åŠ¨ä¸åŒï¼š</p>
    <table>
        <thead>
            <tr>
                <th>ç±»å‹</th>
                <th>æ„å›¾</th>
                <th>èŠ¬å…°è¯­ç»“æ„</th>
                <th>ä¸­æ–‡æ˜ å°„</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Haluan + éƒ¨åˆ†æ ¼</td>
                <td>æƒ³è¦ â†’ æ„æ„¿</td>
                <td>Haluan kahvia</td>
                <td>æˆ‘æƒ³è¦ç‚¹å’–å•¡</td>
            </tr>
            <tr>
                <td>Tarvitsen + éƒ¨åˆ†æ ¼</td>
                <td>éœ€è¦ â†’ å­˜åœ¨æ€§</td>
                <td>Tarvitsen lippua</td>
                <td>æˆ‘éœ€è¦å¼ ç¥¨</td>
            </tr>
        </tbody>
    </table>
</section>

<hr>

<section id="vocab-table">
    <h2>ğŸ§¬ é«˜é¢‘æ—¥å¸¸ç”¨å“è¯æ±‡è¡¨ï¼ˆéƒ¨åˆ†æ ¼å½¢å¼ + åŸå½¢ + ä¸­æ–‡ï¼‰</h2>
    <p>ä»¥ä¸‹è¯æ±‡æ˜¯ä½ åœ¨èŠ¬å…°æ—¥å¸¸ç”Ÿæ´»ä¸­â€œéœ€è¦â€ç”¨åˆ°æœ€å¤šçš„ã€‚</p>
    <table>
        <thead>
            <tr>
                <th>åŸå½¢</th>
                <th>éƒ¨åˆ†æ ¼</th>
                <th>ä¸­æ–‡</th>
                <th>ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>lippu</td><td>lippua</td><td>ç¥¨ï¼ˆè½¦ç¥¨ã€å…¥åœºç¥¨ï¼‰</td><td>Tarvitsen lippua.</td></tr>
            <tr><td>avain</td><td>avainta</td><td>é’¥åŒ™</td><td>Tarvitsen avainta.</td></tr>
            <tr><td>laukku</td><td>laukkua</td><td>åŒ…ã€æ‰‹æåŒ…</td><td>Tarvitsen laukkua.</td></tr>
            <tr><td>puhelin</td><td>puhelinta</td><td>æ‰‹æœº</td><td>Tarvitsen puhelinta.</td></tr>
            <tr><td>kirje</td><td>kirjettÃ¤</td><td>ä¿¡ã€é‚®ä»¶</td><td>Tarvitsen kirjettÃ¤.</td></tr>
            <tr><td>paperi</td><td>paperia</td><td>çº¸å¼ ã€æ–‡æ¡£</td><td>Tarvitsen paperia.</td></tr>
            <tr><td>tieto</td><td>tietoa</td><td>ä¿¡æ¯ã€æ•°æ®</td><td>Tarvitsen tietoa.</td></tr>
            <tr><td>apu</td><td>apua</td><td>å¸®åŠ©</td><td>Tarvitsen apua.</td></tr>
            <tr><td>aika</td><td>aikaa</td><td>æ—¶é—´</td><td>Tarvitsen aikaa.</td></tr>
            <tr><td>lomake</td><td>lomaketta</td><td>è¡¨æ ¼</td><td>Tarvitsen lomaketta.</td></tr>
            <tr><td>kartta</td><td>karttaa</td><td>åœ°å›¾</td><td>Tarvitsen karttaa.</td></tr>
            <tr><td>laturi</td><td>laturia</td><td>å……ç”µå™¨</td><td>Tarvitsen laturia.</td></tr>
            <tr><td>lÃ¤Ã¤ke</td><td>lÃ¤Ã¤kettÃ¤</td><td>è¯</td><td>Tarvitsen lÃ¤Ã¤kettÃ¤.</td></tr>
            <tr><td>resepti</td><td>reseptiÃ¤</td><td>å¤„æ–¹</td><td>Tarvitsen reseptiÃ¤.</td></tr>
            <tr><td>neuvo</td><td>neuvoa</td><td>å»ºè®®</td><td>Tarvitsen neuvoa.</td></tr>
            <tr><td>raha</td><td>rahaa</td><td>é’±</td><td>Tarvitsen rahaa.</td></tr>
            <tr><td>tila</td><td>tilaa</td><td>ç©ºé—´</td><td>Tarvitsen tilaa.</td></tr>
            <tr><td>lepo</td><td>lepoa</td><td>ä¼‘æ¯</td><td>Tarvitsen lepoa.</td></tr>
            <tr><td>uni</td><td>unta</td><td>ç¡çœ </td><td>Tarvitsen unta.</td></tr>
            <tr><td>hiljaisuus</td><td>hiljaisuutta</td><td>å®‰é™</td><td>Tarvitsen hiljaisuutta.</td></tr>
            <tr><td>juoma</td><td>juomaa</td><td>é¥®æ–™ï¼ˆæ³›æŒ‡ï¼‰</td><td>Tarvitsen juomaa.</td></tr>
            <tr><td>ruoka</td><td>ruokaa</td><td>é£Ÿç‰©ï¼ˆæ³›æŒ‡ï¼‰</td><td>Tarvitsen ruokaa.</td></tr>
            <tr><td>vesi</td><td>vettÃ¤</td><td>æ°´ï¼ˆå°½ç®¡Haluanæ›´å¸¸ç”¨ï¼Œè¿™é‡Œä¹Ÿé€‚ç”¨ï¼‰</td><td>Tarvitsen vettÃ¤.</td></tr>
            <tr><td>sokeri</td><td>sokeria</td><td>ç³–ï¼ˆæœ‰æ—¶ç”¨äºè¡¥å……å’–å•¡ï¼‰</td><td>Tarvitsen sokeria.</td></tr>
        </tbody>
    </table>
</section>

<hr>

<section id="core-blocks">
    <h2>ğŸ§© æ ¸å¿ƒè¯­å—æ¨¡æ¿ï¼ˆç»‘å®šä½ çš„çœŸå®éœ€æ±‚ï¼‰</h2>
    <p>â€œTarvitsenâ€ä¸æ˜¯ç¤¼è²Œçš„â€œæˆ‘æƒ³éœ€è¦â€ï¼Œè€Œæ˜¯<strong>ç”Ÿå­˜é©±åŠ¨çš„â€œæˆ‘å¾—ç”¨â€</strong>ï¼Œå°±åƒä¸­æ–‡é‡Œè¯´â€œæˆ‘å¾—æ‹¿åŒ…â€ã€â€œæˆ‘å¾—ç”¨ä¸ªæ‰‹æœºâ€ã€‚</p>
    <table>
        <thead>
            <tr>
                <th>è¯­å—</th>
                <th>ä¸­æ–‡æ˜ å°„</th>
                <th>åœºæ™¯</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>Tarvitsen lippua.</td><td>æˆ‘éœ€è¦ä¸€å¼ ç¥¨ã€‚</td><td>ä¹°ç¥¨ã€åè½¦ã€å…¥åœº</td></tr>
            <tr><td>Tarvitsen avainta.</td><td>æˆ‘éœ€è¦é’¥åŒ™ã€‚</td><td>æ‰¾é’¥åŒ™ã€ç§Ÿæˆ¿ã€ç™»è®°</td></tr>
            <tr><td>Tarvitsen laukkua.</td><td>æˆ‘éœ€è¦ä¸€ä¸ªåŒ…ã€‚</td><td>ä¹°ä¸œè¥¿ã€æ—…è¡Œã€è£…è´§</td></tr>
            <tr><td>Tarvitsen apua.</td><td>æˆ‘éœ€è¦å¸®å¿™ã€‚</td><td>é‡åˆ°å›°éš¾æ—¶</td></tr>
            <tr><td>Tarvitsen tietoa.</td><td>æˆ‘éœ€è¦ä¿¡æ¯ã€‚</td><td>é‚®å±€ã€ç­¾è¯å¤„ã€æŸœå°</td></tr>
            <tr><td>Tarvitsen kirjettÃ¤.</td><td>æˆ‘éœ€è¦ä¸€å°ä¿¡ã€‚</td><td>ä¹¦å†™ã€é‚®å¯„ã€ç”³è¯·</td></tr>
            <tr><td>Tarvitsen paperia.</td><td>æˆ‘éœ€è¦çº¸ã€‚</td><td>å®˜æ–¹åœºåˆã€æ‰“å°åº—</td></tr>
            <tr><td>Tarvitsen aikaa.</td><td>æˆ‘éœ€è¦æ—¶é—´ã€‚</td><td>æ‹–å»¶ã€è¯·æ±‚å®½é™</td></tr>
            <tr><td>Tarvitsen lomaketta.</td><td>æˆ‘éœ€è¦è¡¨æ ¼ã€‚</td><td>å®˜æ–¹ç”³è¯·ã€æ³¨å†Œ</td></tr>
            <tr><td>Tarvitsen jotain.</td><td>æˆ‘éœ€è¦ç‚¹ä»€ä¹ˆã€‚</td><td>é€šç”¨è¡¨è¾¾ã€åº”æ€¥ä½¿ç”¨</td></tr>
            <tr><td>Tarvitsen laturia.</td><td>æˆ‘éœ€è¦å……ç”µå™¨ã€‚</td><td>æ‰‹æœºæ²¡ç”µæ—¶</td></tr>
            <tr><td>Tarvitsen lÃ¤Ã¤kettÃ¤.</td><td>æˆ‘éœ€è¦è¯ã€‚</td><td>ç”Ÿç—…æˆ–ç´§æ€¥æƒ…å†µ</td></tr>
            <tr><td>Tarvitsen rahaa.</td><td>æˆ‘éœ€è¦é’±ã€‚</td><td>æ”¯ä»˜æˆ–ç´§æ€¥æƒ…å†µ</td></tr>
            <tr><td>Tarvitsen hiljaisuutta.</td><td>æˆ‘éœ€è¦å®‰é™ã€‚</td><td>å™ªéŸ³ç¯å¢ƒ</td></tr>
            <tr><td>Tarvitsen lepoa.</td><td>æˆ‘éœ€è¦ä¼‘æ¯ã€‚</td><td>ç–²æƒ«æ—¶</td></tr>
        </tbody>
    </table>
</section>

<hr>

<section id="scenario-training">
    <h2>ğŸ§ª åœºæ™¯è®­ç»ƒå¥—ä»¶ï¼ˆç”Ÿå­˜çº§ï¼‰</h2>
    <div class="example">
        <h3>ğŸ“ åœºæ™¯ 1ï¼šå…¬å…±äº¤é€šç«™</h3>
        <p><span class="speakable-finnish">Tarvitsen lippua.</span></p>
        <p>[æå‡ºé›¶é’± + æŒ‡å‘å”®ç¥¨æœº] â†’ <span class="speakable-finnish">"TÃ¤ssÃ¤ lippua?"</span></p>
    </div>
    <div class="example">
        <h3>ğŸ“ åœºæ™¯ 2ï¼šç§Ÿæˆ¿ / æˆ¿é—´ / å®¿èˆ</h3>
        <p><span class="speakable-finnish">En lÃ¶ydÃ¤ avainta.</span></p>
        <p><span class="speakable-finnish">Tarvitsen avainta!</span></p>
        <p><span class="speakable-finnish">MissÃ¤ on avain?</span></p>
    </div>
    <div class="example">
        <h3>ğŸ“ åœºæ™¯ 3ï¼šè´­ç‰© / åŒ… / è¡Œæ</h3>
        <p><span class="speakable-finnish">Tarvitsen laukkua.</span></p>
        <p><span class="speakable-finnish">TÃ¤mÃ¤ laukku hyvÃ¤?</span></p>
        <p><span class="speakable-finnish">Onko tÃ¤ssÃ¤ laukkuja?</span></p>
    </div>
    <div class="example">
        <h3>ğŸ“ åœºæ™¯ 4ï¼šå®˜æ–¹æœºæ„ / é‚®å±€ / æ”¿åºœéƒ¨é—¨</h3>
        <p><span class="speakable-finnish">Tarvitsen tietoa.</span></p>
        <p><span class="speakable-finnish">Tarvitsen lomaketta.</span></p>
        <p><span class="speakable-finnish">MinÃ¤ en tiedÃ¤ mitÃ¤ tÃ¤ssÃ¤ tarvitse.</span></p>
    </div>
    <div class="example">
        <h3>ğŸ“ åœºæ™¯ 5ï¼šç´§æ€¥æƒ…å†µ / èº«ä½“ä¸é€‚</h3>
        <p><span class="speakable-finnish">Tarvitsen apua.</span></p>
        <p><span class="speakable-finnish">Tarvitsen lÃ¤Ã¤kettÃ¤.</span></p>
        <p><span class="speakable-finnish">Tarvitsen lepoa.</span></p>
    </div>
</section>

<hr>

<section id="body-binding">
    <h2>ğŸ§¬ è‚¢ä½“ç»‘å®šè®­ç»ƒï¼ˆTarvitsen + è¯ï¼‰</h2>
    <p>è¯­è¨€ä¸æ˜¯ä»å˜´ä¸­è¯ç”Ÿçš„ï¼Œæ˜¯ä»èº«ä½“ä¸­<strong>æ¨å‡ºæ¥çš„</strong>ã€‚</p>
    <table>
        <thead>
            <tr>
                <th>åŠ¨ä½œ</th>
                <th>é…å¥—è¯­è¨€</th>
                <th>åœºæ™¯</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>æ‰‹ä¼¸å‘å”®ç¥¨æœº</td><td><span class="speakable-finnish">Tarvitsen lippua.</span></td><td>åè½¦æ—¶</td></tr>
            <tr><td>æ‘¸å£è¢‹æ‰¾é’¥åŒ™</td><td><span class="speakable-finnish">Tarvitsen avainta.</span></td><td>è¿›é—¨æ—¶</td></tr>
            <tr><td>æŒ‡ç€åŒ…</td><td><span class="speakable-finnish">TÃ¤mÃ¤ laukku ok? Tarvitsen laukkua.</span></td><td>è´­ç‰©æ—¶</td></tr>
            <tr><td>æ‰‹æŒ‰æ–‡æ¡£</td><td><span class="speakable-finnish">Tarvitsen lomaketta.</span></td><td>åŠå…¬å®¤/é‚®å±€</td></tr>
            <tr><td>æ‰‹æŒ‡è„‘è¢‹</td><td><span class="speakable-finnish">Tarvitsen tietoa.</span></td><td>é—®ä¿¡æ¯</td></tr>
            <tr><td>æ‰‹æŒåœ¨ç©ºä¸­åœé¡¿</td><td><span class="speakable-finnish">En tiedÃ¤ mitÃ¤ tarvitse.</span></td><td>ä¸ç¡®å®šæ—¶</td></tr>
            <tr><td>æŒ‡å‘æ‰‹æœºå……ç”µå£</td><td><span class="speakable-finnish">Tarvitsen laturia.</span></td><td>æ‰‹æœºæ²¡ç”µæ—¶</td></tr>
            <tr><td>æŒ‡å‘èº«ä½“ä¸é€‚éƒ¨ä½</td><td><span class="speakable-finnish">Tarvitsen lÃ¤Ã¤kettÃ¤.</span></td><td>æ„Ÿåˆ°ä¸é€‚æ—¶</td></tr>
            <tr><td>æ¯”åˆ’é’±çš„æ‰‹åŠ¿</td><td><span class="speakable-finnish">Tarvitsen rahaa.</span></td><td>éœ€è¦ä»˜é’±æˆ–å€Ÿé’±æ—¶</td></tr>
        </tbody>
    </table>
</section>

<hr>

<section id="structure-deformation">
    <h2>ğŸ§  ç»“æ„å˜å½¢è®­ç»ƒï¼ˆä¸åªæ˜¯â€œTarvitsenâ€ï¼‰</h2>
    <p>ä¸€æ—¦ä½ æŒæ¡äº†Tarvitsen + éƒ¨åˆ†æ ¼ï¼Œå°±è¦å¼€å§‹<strong>å˜å½¢ä½ çš„éœ€æ±‚è¡¨è¾¾</strong>ï¼Œä»¥é€‚é…ä¸åŒåœºæ™¯ï¼š</p>
    <table>
        <thead>
            <tr>
                <th>åŠŸèƒ½</th>
                <th>è¯­å—</th>
                <th>ä¸­æ–‡æ˜ å°„</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>éœ€è¦å¸®åŠ©</td><td><span class="speakable-finnish">Tarvitsen apua</span></td><td>éœ€è¦å¸®åŠ©ï¼ˆæ˜¯èŠ¬å…°äººæœ€å¸¸å¬åˆ°çš„ï¼‰</td></tr>
            <tr><td>éœ€è¦æ—¶é—´</td><td><span class="speakable-finnish">Tarvitsen aikaa</span></td><td>è¯·ç»™æˆ‘ç‚¹æ—¶é—´</td></tr>
            <tr><td>éœ€è¦ä¿¡æ¯</td><td><span class="speakable-finnish">Tarvitsen tietoa</span></td><td>æˆ‘å¾—æŸ¥ä¸€ä¸‹</td></tr>
            <tr><td>éœ€è¦è¡¨æ ¼</td><td><span class="speakable-finnish">Tarvitsen lomaketta</span></td><td>æˆ‘è¦å¡«è¿™ä¸ª</td></tr>
            <tr><td>éœ€è¦åŒ…</td><td><span class="speakable-finnish">Tarvitsen laukkua</span></td><td>æˆ‘å¾—æ‰¾ä¸ªåŒ…è£…ä¸œè¥¿</td></tr>
            <tr><td>éœ€è¦é’¥åŒ™</td><td><span class="speakable-finnish">Tarvitsen avainta</span></td><td>æˆ‘å¾—æ‹¿é’¥åŒ™å¼€é—¨</td></tr>
            <tr><td>éœ€è¦ç¥¨</td><td><span class="speakable-finnish">Tarvitsen lippua</span></td><td>æˆ‘å¾—ä¸Šè½¦/å…¥åœº</td></tr>
            <tr><td>éœ€è¦ä¿¡</td><td><span class="speakable-finnish">Tarvitsen kirjettÃ¤</span></td><td>æˆ‘å¾—å†™å°ä¿¡</td></tr>
            <tr><td>éœ€è¦çº¸</td><td><span class="speakable-finnish">Tarvitsen paperia</span></td><td>æˆ‘å¾—å¡«è¡¨æ ¼</td></tr>
            <tr><td>æƒ³è¦+éœ€è¦æ··åˆ</td><td><span class="speakable-finnish">Haluan ja tarvitsen</span></td><td>æˆ‘æƒ³è¦ä¹Ÿå¾—ç”¨</td></tr>
            <tr><td>éœ€è¦å……ç”µå™¨</td><td><span class="speakable-finnish">Tarvitsen laturia</span></td><td>æ‰‹æœºæ²¡ç”µäº†</td></tr>
            <tr><td>éœ€è¦è¯</td><td><span class="speakable-finnish">Tarvitsen lÃ¤Ã¤kettÃ¤</span></td><td>ç”Ÿç—…äº†</td></tr>
            <tr><td>éœ€è¦é’±</td><td><span class="speakable-finnish">Tarvitsen rahaa</span></td><td>æ²¡é’±äº†</td></tr>
            <tr><td>éœ€è¦å®‰é™</td><td><span class="speakable-finnish">Tarvitsen hiljaisuutta</span></td><td>å¤ªåµäº†</td></tr>
        </tbody>
    </table>
</section>

<hr>

<section id="daily-bleeding-training">
    <h2>ğŸ§ª æ¯æ—¥è¯­è¨€å‡ºè¡€è®­ç»ƒï¼ˆå®æˆ˜å”¤é†’ï¼‰</h2>
    <h3>ğŸ“… ç¬¬1å‘¨ï¼šæ¤å…¥â€œTarvitsenâ€ç³»ç»Ÿ</h3>
    <ul>
        <li>æ¯æ¬¡é‡åˆ°å›°éš¾ â†’ è¯´ï¼š<span class="speakable-finnish">"Tarvitsen apua."</span></li>
        <li>æ¯æ¬¡è¿›é‚®å±€/æŸœå° â†’ è¯´ï¼š<span class="speakable-finnish">"Tarvitsen tÃ¤tÃ¤."</span>ï¼ˆæŒ‡ä»»æ„ç‰©å“ï¼‰</li>
        <li>æ¯æ¬¡åœ¨è½¦ç«™ â†’ è¯´ï¼š<span class="speakable-finnish">"Tarvitsen lippua."</span></li>
        <li>æ‰‹æœºæ²¡ç”µæ—¶ â†’ è¯´ï¼š<span class="speakable-finnish">"Tarvitsen laturia."</span></li>
    </ul>
    <h3>ğŸ“… ç¬¬2å‘¨ï¼šæ··åˆ"Tarvitsen"ä¸"MinÃ¤"</h3>
    <ul>
        <li>ç»ƒä¹ ï¼š<span class="speakable-finnish">"MinÃ¤ en tarvitse tÃ¤tÃ¤."</span></li>
        <li>å¯¹æ¯”ï¼š<span class="speakable-finnish">"MinÃ¤ haluan tÃ¤tÃ¤, mutta en tarvitse tÃ¤tÃ¤."</span></li>
        <li>å®è·µï¼š<span class="speakable-finnish">"MinÃ¤ tulen kotiin â†’ Tarvitsen avainta."</span></li>
        <li>æ„Ÿå—ç–²æƒ«æ—¶ â†’ è¯´ï¼š<span class="speakable-finnish">"Tarvitsen lepoa."</span></li>
    </ul>
</section>

<hr>

<section id="challenge">
    <h2>ğŸš¨ è¯­è¨€å‡ºè¡€å®éªŒæŒ‘æˆ˜ï¼ˆä¸‰æ—¥ç”Ÿå­˜è®¡åˆ’ï¼‰</h2>
    <h3>ğŸ“† ç¬¬1æ—¥ï¼š</h3>
    <ul>
        <li>åœ¨å”®ç¥¨æœºå‰è¯´ï¼š<span class="speakable-finnish">"Tarvitsen lippua."</span></li>
        <li>æŒ‡ç€å±å¹•é—®ï¼š<span class="speakable-finnish">"TÃ¤ssÃ¤ ok?"</span></li>
        <li>åœ¨å…¬å…±åœºåˆæ„Ÿè§‰åµé—¹ â†’ å¯¹è‡ªå·±è¯´ï¼š<span class="speakable-finnish">"Tarvitsen hiljaisuutta."</span></li>
    </ul>
    <h3>ğŸ“† ç¬¬2æ—¥ï¼š</h3>
    <ul>
        <li>åœ¨é‚®å±€è¯´ï¼š<span class="speakable-finnish">"Tarvitsen lomaketta."</span></li>
        <li>æ‹¿èµ·è¡¨æ ¼é—®ï¼š<span class="speakable-finnish">"TÃ¤ssÃ¤ on kaikki?"</span></li>
        <li>æ„Ÿè§‰ä¸é€‚æ—¶ â†’ æ€è€ƒï¼š<span class="speakable-finnish">"Tarvitsen lÃ¤Ã¤kettÃ¤?"</span></li>
    </ul>
    <h3>ğŸ“† ç¬¬3æ—¥ï¼š</h3>
    <ul>
        <li>åœ¨å®¶æ‰¾é’¥åŒ™ï¼š<span class="speakable-finnish">"En lÃ¶ydÃ¤ avainta..."</span></li>
        <li>å¯¹å®¤å‹/æˆ¿ä¸œè¯´ï¼š<span class="speakable-finnish">"Tarvitsen avainta."</span></li>
        <li>é‡åˆ°ä¸€ä¸ªå¤æ‚çš„é—®é¢˜ â†’ è¯´ï¼š<span class="speakable-finnish">"Tarvitsen tietoa."</span></li>
    </ul>
</section>

<hr>

<section id="practice-list">
    <h2>âœ… é«˜é¢‘æ—¥å¸¸ç”¨å“è¯­å—ç»ƒä¹ æ¸…å•</h2>
    <p>æ¯å¤©é€‰å…¶ä¸­3å¥ï¼Œåœ¨ä¸åŒåœºæ™¯ä¸­å®è·µï¼š</p>
    <ul>
        <li><span class="speakable-finnish">Tarvitsen lippua.</span></li>
        <li><span class="speakable-finnish">Tarvitsen avainta.</span></li>
        <li><span class="speakable-finnish">Tarvitsen laukkua.</span></li>
        <li><span class="speakable-finnish">Tarvitsen lomaketta.</span></li>
        <li><span class="speakable-finnish">Tarvitsen tietoa.</span></li>
        <li><span class="speakable-finnish">Tarvitsen kirjettÃ¤.</span></li>
        <li><span class="speakable-finnish">Tarvitsen paperia.</span></li>
        <li><span class="speakable-finnish">Tarvitsen jotain.</span></li>
        <li><span class="speakable-finnish">Tarvitsen apua.</span></li>
        <li><span class="speakable-finnish">Tarvitsen aikaa.</span></li>
        <li><span class="speakable-finnish">Tarvitsen laturia.</span></li>
        <li><span class="speakable-finnish">Tarvitsen lÃ¤Ã¤kettÃ¤.</span></li>
        <li><span class="speakable-finnish">Tarvitsen rahaa.</span></li>
        <li><span class="speakable-finnish">Tarvitsen hiljaisuutta.</span></li>
        <li><span class="speakable-finnish">Tarvitsen lepoa.</span></li>
    </ul>
</section>

<hr>

<section id="cognitive-implantation">
    <h2>ğŸ§  è®¤çŸ¥æ¤å…¥æ‰‹æœ¯ï¼ˆä»Šæ—¥ä»»åŠ¡ï¼‰</h2>
    <p>ä½ çš„ä»»åŠ¡ä¸æ˜¯æŒæ¡è¯­æ³•ï¼Œè€Œæ˜¯<strong>æ¿€æ´»â€œæˆ‘å¾—ç”¨â€çš„è¯­è¨€ç´§è¿«æ„Ÿ</strong>ã€‚</p>
    <h3>ğŸ§  è¯­è¨€å‡ºè¡€ä»»åŠ¡ï¼š</h3>
    <ol>
        <li>åœ¨è¶…å¸‚æ‹¿èµ·ä¸€ä¸ªåŒ… â†’ è¯´ï¼š<span class="speakable-finnish">"TÃ¤mÃ¤ laukku ok? Tarvitsen laukkua."</span></li>
        <li>åœ¨è½¦ç«™å¯¹æœºå™¨è¯´ï¼š<span class="speakable-finnish">"Tarvitsen lippua. Ostaessa... miten tÃ¤ssÃ¤?"</span></li>
        <li>æ‰‹æœºæ²¡ç”µæ—¶ â†’ è¯´ï¼š<span class="speakable-finnish">"Tarvitsen laturia."</span></li>
    </ol>
</section>

<hr>

<footer>
    <p>ç‰ˆæƒå½’èŠ¬å…°è¯­æ•™å­¦è®¾è®¡å›¢é˜Ÿæ‰€æœ‰ | å¦‚éœ€ç»§ç»­æ„å»ºä¸‹ä¸€é˜¶æ®µå†…å®¹ï¼Œè¯·è”ç³»ä½œè€…ã€‚</p>
</footer>

<script>
/**
 * è°ƒè¯•è¾“å‡ºå‡½æ•°
 * @param {string} message - è¦æ˜¾ç¤ºçš„æ¶ˆæ¯
 */
function debugLog(message) {
    const output = document.getElementById('debug-output');
    if (output) {
        const time = new Date().toLocaleTimeString();
        output.innerHTML += `[${time}] ${message}<br>`;
        output.scrollTop = output.scrollHeight;
    }
    console.log(message);
}

/**
 * æµ‹è¯•åŸºæœ¬TTSåŠŸèƒ½
 */
function testBasicTTS() {
    debugLog('å¼€å§‹æµ‹è¯•åŸºæœ¬TTSåŠŸèƒ½...');
    if (!('speechSynthesis' in window)) {
        debugLog('âŒ é”™è¯¯ï¼šæµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆAPI');
        alert('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆåŠŸèƒ½ï¼Œè¯·å°è¯•ä½¿ç”¨Chromeã€Edgeæˆ–Firefoxçš„æœ€æ–°ç‰ˆæœ¬ã€‚');
        return;
    }
    debugLog('âœ… æµè§ˆå™¨æ”¯æŒè¯­éŸ³åˆæˆAPI');
    
    const utterance = new SpeechSynthesisUtterance('Hello World');
    utterance.onstart = () => debugLog('âœ… è‹±è¯­æµ‹è¯•å¼€å§‹æ’­æ”¾');
    utterance.onend = () => debugLog('âœ… è‹±è¯­æµ‹è¯•æ’­æ”¾å®Œæˆ');
    utterance.onerror = (event) => debugLog('âŒ è‹±è¯­æµ‹è¯•é”™è¯¯: ' + event.error);
    
    window.speechSynthesis.speak(utterance);
}

/**
 * æµ‹è¯•èŠ¬å…°è¯­TTSåŠŸèƒ½
 */
function testFinnishTTS() {
    debugLog('å¼€å§‹æµ‹è¯•èŠ¬å…°è¯­TTSåŠŸèƒ½...');
    const utterance = new SpeechSynthesisUtterance('Tarvitsen lippua');
    utterance.lang = 'fi-FI';
    utterance.onstart = () => debugLog('âœ… èŠ¬å…°è¯­æµ‹è¯•å¼€å§‹æ’­æ”¾');
    utterance.onend = () => debugLog('âœ… èŠ¬å…°è¯­æµ‹è¯•æ’­æ”¾å®Œæˆ');
    utterance.onerror = (event) => debugLog('âŒ èŠ¬å…°è¯­æµ‹è¯•é”™è¯¯: ' + event.error);
    
    window.speechSynthesis.speak(utterance);
}

/**
 * åˆ—å‡ºæ‰€æœ‰å¯ç”¨è¯­éŸ³
 */
function listVoices() {
    debugLog('æ­£åœ¨è·å–å¯ç”¨è¯­éŸ³åˆ—è¡¨...');
    const voices = window.speechSynthesis.getVoices();
    
    if (voices.length === 0) {
        debugLog('âš ï¸ æœªæ‰¾åˆ°ä»»ä½•è¯­éŸ³ï¼Œè¯­éŸ³å¯èƒ½è¿˜åœ¨åŠ è½½ä¸­');
        return;
    }
    
    debugLog(`æ‰¾åˆ° ${voices.length} ä¸ªå¯ç”¨è¯­éŸ³:`);
    voices.forEach((voice, index) => {
        const isDefault = voice.default ? ' (é»˜è®¤)' : '';
        debugLog(`${index + 1}. ${voice.name} (${voice.lang})${isDefault}`);
    });
    
    // æŸ¥æ‰¾èŠ¬å…°è¯­è¯­éŸ³
    const finnishVoices = voices.filter(voice => 
        voice.lang.toLowerCase().startsWith('fi') || 
        voice.name.toLowerCase().includes('finnish') ||
        voice.name.toLowerCase().includes('suomi')
    );
    
    if (finnishVoices.length > 0) {
        debugLog(`âœ… æ‰¾åˆ° ${finnishVoices.length} ä¸ªèŠ¬å…°è¯­è¯­éŸ³:`);
        finnishVoices.forEach(voice => {
            debugLog(`  - ${voice.name} (${voice.lang})`);
        });
    } else {
        debugLog('âŒ æœªæ‰¾åˆ°èŠ¬å…°è¯­è¯­éŸ³');
    }
}

/**
 * ç§»é™¤è°ƒè¯•åŒºåŸŸ
 */
function removeDebugSection() {
    const debugSection = document.querySelector('.debug-section');
    if (debugSection) {
        debugSection.style.display = 'none';
        debugLog('è°ƒè¯•åŒºåŸŸå·²éšè—');
    }
}

// å…¨å±€å˜é‡è·Ÿè¸ªæ’­æ”¾çŠ¶æ€
let isSpeaking = false;

/**
 * æ ¸å¿ƒè¯­éŸ³åˆæˆå‡½æ•°
 * @param {string} text - è¦æ’­æ”¾çš„æ–‡æœ¬
 * @param {string} lang - è¯­è¨€ä»£ç  (ä¾‹å¦‚ 'fi-FI')
 */
function speakText(text, lang) {
    debugLog(`å°è¯•æ’­æ”¾: "${text}" (è¯­è¨€: ${lang})`);
    
    if (!('speechSynthesis' in window)) {
        alert('æŠ±æ­‰ï¼Œæ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆã€‚');
        debugLog('âŒ è¯­éŸ³åˆæˆAPIä¸å¯ç”¨');
        return;
    }
    
    // å¦‚æœæ­£åœ¨æ’­æ”¾ï¼Œå…ˆåœæ­¢
    if (isSpeaking) {
        window.speechSynthesis.cancel();
        debugLog('â¹ï¸ åœæ­¢ä¹‹å‰çš„æ’­æ”¾');
        // ç­‰å¾…ä¸€å°æ®µæ—¶é—´ç¡®ä¿åœæ­¢å®Œæˆ
        setTimeout(() => {
            startSpeaking(text, lang);
        }, 100);
    } else {
        startSpeaking(text, lang);
    }
}

/**
 * å¼€å§‹è¯­éŸ³æ’­æ”¾çš„å†…éƒ¨å‡½æ•°
 * @param {string} text - è¦æ’­æ”¾çš„æ–‡æœ¬
 * @param {string} lang - è¯­è¨€ä»£ç 
 */
function startSpeaking(text, lang) {
    isSpeaking = true;
    
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = lang;
    utterance.rate = 0.85; // ç¨æ…¢è¯­é€Ÿ
    utterance.volume = 1.0;
    utterance.pitch = 1.0;

    // å°è¯•è·å–å¹¶è®¾ç½®ç‰¹å®šè¯­è¨€çš„è¯­éŸ³
    const voices = window.speechSynthesis.getVoices();
    let selectedVoice = null;
    if (lang.startsWith('fi')) {
        selectedVoice = voices.find(voice => 
            voice.lang.toLowerCase().startsWith('fi') || 
            voice.name.toLowerCase().includes('finnish') ||
            voice.name.toLowerCase().includes('suomi')
        );
    }
    
    if (selectedVoice) {
        utterance.voice = selectedVoice;
        debugLog(`ä½¿ç”¨è¯­éŸ³: ${selectedVoice.name} (${selectedVoice.lang})`);
    } else {
        debugLog(`âš ï¸ æœªæ‰¾åˆ°è¯­è¨€ ${lang} çš„ç‰¹å®šè¯­éŸ³ï¼Œä½¿ç”¨é»˜è®¤è¯­éŸ³`);
    }
    
    utterance.onstart = () => {
        debugLog(`âœ… å¼€å§‹æ’­æ”¾: "${text}"`);
    };
    
    utterance.onend = () => {
        debugLog(`âœ… æ’­æ”¾å®Œæˆ: "${text}"`);
        isSpeaking = false;
    };
    
    utterance.onerror = (event) => {
        debugLog(`âŒ æ’­æ”¾é”™è¯¯: ${event.error} (æ–‡æœ¬: "${text}")`);
        isSpeaking = false;
        // åªåœ¨ä¸æ˜¯interruptedé”™è¯¯æ—¶æ˜¾ç¤ºalert
        if (event.error !== 'interrupted') {
            alert('è¯­éŸ³æ’­æ”¾å‡ºé”™: ' + event.error);
        }
    };

    window.speechSynthesis.speak(utterance);
}

/**
 * ä¸ºHTMLå…ƒç´ æ·»åŠ TTSæ’­æ”¾æŒ‰é’®
 * @param {HTMLElement} element - è¦é™„åŠ æŒ‰é’®çš„HTMLå…ƒç´ 
 * @param {string} textToSpeak - ç‚¹å‡»æŒ‰é’®æ—¶è¦æœ—è¯»çš„æ–‡æœ¬
 * @param {string} lang - æ–‡æœ¬çš„è¯­è¨€ä»£ç 
 */
function addTTSButton(element, textToSpeak, lang) {
    if (!textToSpeak || textToSpeak.trim() === '') {
        debugLog(`âš ï¸ è·³è¿‡ç©ºæ–‡æœ¬å…ƒç´ : ${element.tagName}`);
        return; // å¦‚æœæ²¡æœ‰æ–‡æœ¬åˆ™ä¸æ·»åŠ æŒ‰é’®
    }
    
    // æ£€æŸ¥æ˜¯å¦å·²ç»æœ‰æŒ‰é’®äº†
    if (element.querySelector('.tts-button')) {
        debugLog(`âš ï¸ å…ƒç´ å·²æœ‰TTSæŒ‰é’®: "${textToSpeak.trim()}"`);
        return;
    }
    
    const button = document.createElement('button');
    button.className = 'tts-button';
    button.innerHTML = 'ğŸ”Š'; //å–‡å­å›¾æ ‡
    button.title = 'æ’­æ”¾: ' + textToSpeak.trim();
    button.setAttribute('aria-label', 'æ’­æ”¾éŸ³é¢‘: ' + textToSpeak.trim());
    
    button.onclick = function(event) {
        event.preventDefault(); // é˜²æ­¢é»˜è®¤è¡Œä¸º
        event.stopPropagation(); // é˜²æ­¢è§¦å‘çˆ¶å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶
        
        // é˜²æ­¢åœ¨æ’­æ”¾æœŸé—´é‡å¤ç‚¹å‡»
        if (isSpeaking) {
            debugLog(`âš ï¸ æ’­æ”¾ä¸­ï¼Œå¿½ç•¥é‡å¤ç‚¹å‡»: "${textToSpeak.trim()}"`);
            return false;
        }
        
        debugLog(`ğŸ”Š æŒ‰é’®è¢«ç‚¹å‡»: "${textToSpeak.trim()}" (è¯­è¨€: ${lang})`);
        
        // æ·»åŠ è§†è§‰åé¦ˆ
        const originalText = button.innerHTML;
        button.innerHTML = 'ğŸ”‡'; // æ”¹ä¸ºé™éŸ³å›¾æ ‡è¡¨ç¤ºæ­£åœ¨æ’­æ”¾
        button.disabled = true;
        
        // æ’­æ”¾å®Œæˆåæ¢å¤æŒ‰é’®
        const checkCompletion = () => {
            if (!isSpeaking) {
                button.innerHTML = originalText;
                button.disabled = false;
            } else {
                setTimeout(checkCompletion, 100);
            }
        };
        
        speakText(textToSpeak.trim(), lang);
        setTimeout(checkCompletion, 100);
        
        return false; // ç¡®ä¿ä¸ä¼šè§¦å‘å…¶ä»–äº‹ä»¶
    };
    
    element.appendChild(button);
    debugLog(`âœ… å·²æ·»åŠ TTSæŒ‰é’®: "${textToSpeak.trim()}" (è¯­è¨€: ${lang})`);
}

/**
 * åˆå§‹åŒ–TTSæŒ‰é’®ï¼Œåœ¨æ–‡æ¡£åŠ è½½å®Œæˆåæ‰§è¡Œã€‚
 * ç¡®ä¿åœ¨è¯­éŸ³åˆ—è¡¨åŠ è½½åå†æ·»åŠ æŒ‰é’®ï¼Œä»¥æ­£ç¡®é€‰æ‹©è¯­éŸ³ã€‚
 */
function initializeTTSFunctionality() {
    debugLog('ğŸš€ å¼€å§‹åˆå§‹åŒ–TTSåŠŸèƒ½...');
    const finnishLang = 'fi-FI';

    // ç­‰å¾…ä¸€ä¸‹ç¡®ä¿DOMå®Œå…¨åŠ è½½
    setTimeout(() => {
        debugLog('ğŸ“ å¼€å§‹æ·»åŠ TTSæŒ‰é’®åˆ°å„ä¸ªéƒ¨åˆ†...');

        // è®¤çŸ¥ç»‘å®šæ ¸å¿ƒè¡¨
        document.querySelectorAll('#cognitive-core table tbody tr').forEach((row) => {
            const fiTextCell = row.cells[2]; // èŠ¬å…°è¯­ç»“æ„åˆ—
            if (fiTextCell) {
                addTTSButton(fiTextCell, fiTextCell.textContent, finnishLang);
            }
        });

        // é«˜é¢‘æ—¥å¸¸ç”¨å“è¯æ±‡è¡¨
        document.querySelectorAll('#vocab-table table tbody tr').forEach((row) => {
            const originalCell = row.cells[0]; // åŸå½¢
            if (originalCell) addTTSButton(originalCell, originalCell.textContent, finnishLang);
            const partitiveCell = row.cells[1]; // éƒ¨åˆ†æ ¼
            if (partitiveCell) addTTSButton(partitiveCell, partitiveCell.textContent, finnishLang);
            const exampleCell = row.cells[3]; // ç¤ºä¾‹å¥å­
            if (exampleCell) addTTSButton(exampleCell, exampleCell.textContent, finnishLang);
        });

        // æ ¸å¿ƒè¯­å—æ¨¡æ¿
        document.querySelectorAll('#core-blocks table tbody tr').forEach((row) => {
            const chunkCell = row.cells[0]; // è¯­å—
            if (chunkCell) addTTSButton(chunkCell, chunkCell.textContent, finnishLang);
        });

        // åœºæ™¯è®­ç»ƒå¥—ä»¶
        document.querySelectorAll('#scenario-training .example p').forEach((p) => {
            const speakableSpan = p.querySelector('.speakable-finnish');
            if (speakableSpan) {
                addTTSButton(speakableSpan, speakableSpan.textContent, finnishLang);
            } else { // Fallback for raw text without span, but check if it's Finnish
                const text = p.textContent.trim();
                // Check if it looks like a Finnish sentence (starts with capital, contains common Finnish words)
                if (text.match(/^[A-ZÃ…Ã„Ã–].*\.$/) || text.includes('Tarvitsen') || text.includes('MissÃ¤') || text.includes('En lÃ¶ydÃ¤') || text.includes('TÃ¤ssÃ¤')) {
                    addTTSButton(p, text, finnishLang);
                }
            }
        });


        // è‚¢ä½“ç»‘å®šè®­ç»ƒ
        document.querySelectorAll('#body-binding table tbody tr').forEach((row) => {
            const langCell = row.cells[1]; // é…å¥—è¯­è¨€
            if (langCell) addTTSButton(langCell, langCell.textContent, finnishLang);
        });

        // ç»“æ„å˜å½¢è®­ç»ƒ
        document.querySelectorAll('#structure-deformation table tbody tr').forEach((row) => {
            const chunkCell = row.cells[1]; // è¯­å—
            if (chunkCell) addTTSButton(chunkCell, chunkCell.textContent, finnishLang);
        });

        // æ¯æ—¥è¯­è¨€å‡ºè¡€è®­ç»ƒ (ul/li)
        document.querySelectorAll('#daily-bleeding-training ul li').forEach((li) => {
            const speakableSpan = li.querySelector('.speakable-finnish');
            if (speakableSpan) {
                addTTSButton(speakableSpan, speakableSpan.textContent, finnishLang);
            }
        });

        // è¯­è¨€å‡ºè¡€å®éªŒæŒ‘æˆ˜ (ul/li)
        document.querySelectorAll('#challenge ul li').forEach((li) => {
            const speakableSpan = li.querySelector('.speakable-finnish');
            if (speakableSpan) {
                addTTSButton(speakableSpan, speakableSpan.textContent, finnishLang);
            }
        });

        // é«˜é¢‘æ—¥å¸¸ç”¨å“è¯­å—ç»ƒä¹ æ¸…å• (ul/li)
        document.querySelectorAll('#practice-list ul li').forEach((li) => {
            const speakableSpan = li.querySelector('.speakable-finnish');
            if (speakableSpan) {
                addTTSButton(speakableSpan, speakableSpan.textContent, finnishLang);
            }
        });

        // è®¤çŸ¥æ¤å…¥æ‰‹æœ¯ (ol/li)
        document.querySelectorAll('#cognitive-implantation ol li').forEach((li) => {
            const speakableSpan = li.querySelector('.speakable-finnish');
            if (speakableSpan) {
                addTTSButton(speakableSpan, speakableSpan.textContent, finnishLang);
            }
        });


        debugLog('âœ… TTSåŠŸèƒ½åˆå§‹åŒ–å®Œæ¯•ï¼');
        
    }, 500); // å»¶è¿Ÿ500æ¯«ç§’ç¡®ä¿DOMå®Œå…¨åŠ è½½

}

document.addEventListener('DOMContentLoaded', () => {
    if (window.speechSynthesis.getVoices().length === 0) {
        window.speechSynthesis.onvoiceschanged = initializeTTSFunctionality;
    } else {
        initializeTTSFunctionality();
    }
});

</script>

</body>
</html>